/* empty css                   */import{_ as v,a as y,z as w,c as b,o as c,b as g,e as f,g as m,t as P,f as d,A as p,k,r as o,l as n}from"./app-B4B1Mz8a.js";import{C as _}from"./vue-select.es-CweVXps7.js";const D={components:{vSelect:_},computed:{sortIcon(){return this.sortDesc?"fas fa-sort-down":"fas fa-sort-up"},rangeStart(){return this.totalrows===0?0:(this.currentPage-1)*this.perPage+1},rangeEnd(){return this.currentPage*this.perPage>=this.totalrows?this.totalrows:this.currentPage*this.perPage}},data(){return{showSidebar:!1,TickeListData:[],fields:[{key:"customer_id",label:"Customer ID"},{key:"name",label:"Name",sortable:!0},{key:"contactperson",label:"Contact Person"},{key:"email",label:"Email"},{key:"contactnumber",label:"Contact No."},{key:"assigned_to",label:"Assigned To"},{key:"engagement",label:"Engagement"},{key:"actions",label:"Action"}],TicketData:{name:"",contactperson:"",email:null,contactnumber:null,assignee:null,tags:[],followers:[],message_from:null,message:""},totalrows:0,encodeBase64:t=>btoa(t.toString()),sortBy:"",sortDesc:!1,successMessage:"",showfilter:!1,modalVisible:!1,file:null,successMessage:"",deviceCodeData:null,accessToken:null,tokenPollInterval:null}},mounted(){this.fetchEntries(),n.get("/get-ticket-type").then(e=>{this.ticketTypeOptions=e.data.data,this.priorityOptions=e.data.priorityOptions}),n.get("/get-ticket-teg").then(e=>{this.tagOptions=e.data.data}),n.get("/alluser").then(e=>{this.assigneeOptions=e.data.alluser,this.requesterOptions=e.data.alluser,this.followerOptions=e.data.alluser})},watch:{currentPage(e){this.fetchEntries()},perPage(e){this.currentPage=1,this.fetchEntries()}},methods:{showModal(){this.modalVisible=!0},handleFileUpload(e){const t=e.target.files[0];this.file=t},async checkauth(){try{const e=await n.get("/outlook/authenticate");this.deviceCodeData=e.data,alert(`To authenticate, go to ${this.deviceCodeData.verification_url} and enter the code: ${this.deviceCodeData.device_code}`),this.tokenPollInterval=setInterval(this.fetchAccessToken,5e3)}catch(e){console.error("Error initiating authentication:",e)}},async fetchAccessToken(){try{const e=await n.get("/outlook/get-access-token");e.data["User token"]&&(this.accessToken=e.data["User token"],alert(`Access Token: ${this.accessToken}`),clearInterval(this.tokenPollInterval),this.tokenPollInterval=null)}catch{console.error("Still waiting for user to authenticate...")}},checkauthc(){n.get("/outlook/authenticate").then(e=>{console.log(e)}).catch(e=>{console.error("Upload failed:",e)})},getInbox(){n.get("/outlook/getInbox").then(e=>{console.log(e)}).catch(e=>{console.error("Upload failed:",e)})},downloadSampleFile(){window.location.href="/files/customers_dummy_data.xlsx"},resetForm(){this.TicketData={id:null,name:"",contactperson:"",email:null,contactnumber:null,assignee:null,tags:[],followers:[],message_from:null,message:""}},onSortChanged(e){this.sortBy=e.sortBy,this.sortDesc=e.sortDesc},changeSorting(e){this.sortBy===e?this.sortDesc=!this.sortDesc:(this.sortBy=e,this.sortDesc=!1),this.fetchEntries()},getSortIcon(e){return this.sortBy===e?this.sortDesc?"fas fa-sort-down":"fas fa-sort-up":"fas fa-sort"},resetFilter(){this.filterData={customer_id:"",name:"",email:"",contactperson:""},this.currentPage=1,this.fetchEntries(),this.showfilter=!1},searchFilter(){this.currentPage=1,this.fetchEntries(),this.showfilter=!1},fetchEntries(){n.get("/auth/token",{params:{page:this.currentPage,perPage:this.perPage,...this.filterData}}).then(e=>{this.TickeListData=e.data.data.data,this.totalrows=e.data.data.total}).catch(e=>{})},clearSuccessMessage(){setTimeout(()=>{this.successMessage=""},2e3)}},setup(){const e=o({customer_id:"",name:"",email:"",contactperson:"",engagement:""}),t=o(1),u=o(10),h=[10,50,75,100],r=s=>{a.value[s]=" "},l=s=>s in a.value,i=s=>a.value[s][0],a=o([]);return{RemoveError:r,filterData:e,hasErrors:l,getErrors:i,errors:a,currentPage:t,perPage:u,perPageOptions:h}},setup(){const e=o({ticket_id:"",ticket_name:"",ticket_type:"",priority:""}),t=o(1),u=o(10),h=[10,50,75,100],r=s=>{a.value[s]=" "},l=s=>s in a.value,i=s=>a.value[s][0],a=o([]);return{RemoveError:r,filterData:e,hasErrors:l,getErrors:i,errors:a,currentPage:t,perPage:u,perPageOptions:h}}},E={class:"dashboard"},C={class:"list__page"},B={key:0,class:"alert alert-success"};function T(e,t,u,h,r,l){const i=y("b-button"),a=w("ripple");return c(),b("div",E,[g("div",C,[r.successMessage?(c(),b("div",B,P(r.successMessage),1)):f("",!0),t[6]||(t[6]=g("h4",null,[g("i",{class:"fas fa-ticket"}),d(" Customer ")],-1)),m((c(),p(i,{variant:"primary",class:"mb-0 ml-md-1 basicButton shift3",onClick:t[0]||(t[0]=s=>r.modalVisible=!0)},{default:k(()=>t[3]||(t[3]=[d(" Upload ")])),_:1})),[[a,"rgba(113, 102, 240, 0.15)",void 0,{400:!0}]]),r.showSidebar?f("",!0):m((c(),p(i,{key:1,variant:"primary",class:"mb-0 ml-md-1 basicButton shift3",onClick:t[1]||(t[1]=s=>l.checkauth())},{default:k(()=>t[4]||(t[4]=[d(" auth ")])),_:1})),[[a,"rgba(113, 102, 240, 0.15)",void 0,{400:!0}]]),r.showSidebar?f("",!0):m((c(),p(i,{key:2,variant:"primary",class:"mb-0 ml-md-1 basicButton shift3",onClick:t[2]||(t[2]=s=>l.getInbox())},{default:k(()=>t[5]||(t[5]=[d(" getInbox ")])),_:1})),[[a,"rgba(113, 102, 240, 0.15)",void 0,{400:!0}]])])])}const O=v(D,[["render",T],["__scopeId","data-v-68baf79f"]]);export{O as default};
