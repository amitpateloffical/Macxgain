import{_ as h,c as o,o as d,b as e,h as b,i as c,n as u,t as r,j as U,v as _,F as m,r as f,w}from"./app-B0UYXXM2.js";const k={name:"AITrading",data(){return{users:[],isLoading:!1,searchQuery:"",activeFilter:"all",currentPage:1,itemsPerPage:20,filters:[{label:"All",value:"all"},{label:"Active",value:"A"},{label:"Inactive",value:"I"},{label:"New",value:"new"}],apiBaseUrl:`${window.location.origin}/api`,showUserModal:!1,selectedUser:null}},computed:{filteredUsers(){let t=this.users;if(this.searchQuery){const s=this.searchQuery.toLowerCase();t=t.filter(n=>n.name.toLowerCase().includes(s)||n.email.toLowerCase().includes(s)||n.id.toString().includes(s))}if(this.activeFilter!=="all")switch(this.activeFilter){case"A":t=t.filter(n=>n.status==="A");break;case"I":t=t.filter(n=>n.status==="I");break;case"new":const s=new Date;s.setMonth(s.getMonth()-1),t=t.filter(n=>new Date(n.created_at)>s);break}return t},paginatedUsers(){const t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return this.filteredUsers.slice(t,s)},totalPages(){return Math.ceil(this.filteredUsers.length/this.itemsPerPage)},visiblePages(){const t=[];let n=Math.max(1,this.currentPage-Math.floor(2.5)),v=Math.min(this.totalPages,n+5-1);v-n+1<5&&(n=Math.max(1,v-5+1));for(let l=n;l<=v;l++)t.push(l);return t},totalUsers(){return this.users.length},totalBalance(){return this.users.reduce((t,s)=>t+(parseFloat(s.total_balance)||0),0)},activeUsers(){return this.users.filter(t=>t.status==="A").length},newUsers(){const t=new Date;return t.setMonth(t.getMonth()-1),this.users.filter(s=>new Date(s.created_at)>t).length}},mounted(){this.fetchUsers()},methods:{async fetchUsers(){var t,s;this.isLoading=!0;try{const n=localStorage.getItem("access_token");if(!n)throw new Error("No authentication token found");const v=await fetch(`${this.apiBaseUrl}/users`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json",Accept:"application/json"}});if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);const l=await v.json();if(l.success&&l.data)this.users=l.data.filter(a=>!a.is_admin).map(a=>({id:a.id,name:a.name,email:a.email,total_balance:a.total_balance||0,status:a.status||"I",created_at:a.created_at,phone:a.phone,is_admin:a.is_admin||0}));else throw new Error(l.message||"Failed to fetch users")}catch(n){console.error("Error fetching users:",n),(s=(t=this.$toast)==null?void 0:t.error)==null||s.call(t,n.message||"Failed to fetch users"),this.users=[]}finally{this.isLoading=!1}},refreshUsers(){this.fetchUsers()},getUserInitials(t){return t.split(" ").map(s=>s[0]).join("").toUpperCase()},getBalanceStatus(t){const s=parseFloat(t)||0;return s>5e4?"high":s>2e4?"medium":"low"},getBalanceStatusText(t){const s=parseFloat(t)||0;return s>5e4?"High Balance":s>2e4?"Medium Balance":"Low Balance"},getUserStatus(t){return t==="A"?"active":"inactive"},getUserStatusText(t){return t==="A"?"Active":"Inactive"},formatDate(t){return new Date(t).toLocaleDateString("en-IN")},formatTime(t){return new Date(t).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})},viewUserDetails(t){console.log("View user details:",t),this.selectedUser=t,this.showUserModal=!0},tradeWithUser(t){var s,n;console.log("Trade with AI for user:",t),(n=(s=this.$toast)==null?void 0:s.success)==null||n.call(s,`Initiating AI Trading session for ${t.name}`)},closeUserModal(){this.showUserModal=!1,this.selectedUser=null},deleteUser(t){confirm(`Are you sure you want to delete ${t.name}?`)&&(console.log("Delete user:",t),this.users=this.users.filter(s=>s.id!==t.id))},navigateTo(t){this.$router.push({name:t})}}},p={class:"ai-trading-screen"},y={class:"page-header"},T={class:"header-actions"},C=["disabled"],M={class:"stats-grid"},A={class:"stat-card"},I={class:"stat-content"},P={class:"stat-number"},x={class:"stat-card"},B={class:"stat-content"},S={class:"stat-number"},D={class:"stat-card"},L={class:"stat-content"},F={class:"stat-number"},N={class:"stat-card"},V={class:"stat-content"},E={class:"stat-number"},j={class:"search-filters"},Q={class:"search-box"},W={class:"filter-buttons"},q=["onClick"],R={class:"users-grid-container"},H={key:0,class:"loading-container"},z={key:1,class:"no-data"},G={key:2,class:"users-grid"},J={class:"card-header"},K={class:"user-avatar"},O={class:"avatar-text"},X={class:"user-status"},Y={class:"user-info"},Z={class:"user-name"},$={class:"user-mobile"},ss={class:"user-id"},es={class:"balance-section"},ts={class:"balance-amount"},as={class:"card-actions"},ls=["onClick"],is=["onClick"],ns={key:3,class:"pagination"},rs=["disabled"],os={class:"page-numbers"},ds=["onClick"],cs=["disabled"],vs={class:"modal-header"},us={key:0,class:"modal-body"},gs={class:"user-profile-section"},bs={class:"profile-avatar"},ms={class:"avatar-text-large"},fs={class:"profile-info"},hs={class:"profile-name"},Us={class:"profile-status"},_s={class:"details-grid"},ws={class:"detail-item"},ks={class:"detail-value"},ps={class:"detail-item"},ys={class:"detail-value"},Ts={class:"detail-item"},Cs={class:"detail-value"},Ms={class:"detail-item"},As={class:"detail-value"},Is={class:"detail-item"},Ps={class:"detail-value balance-highlight"},xs={class:"detail-item"},Bs={class:"detail-value"},Ss={class:"modal-actions"},Ds={class:"mobile-bottom-nav"};function Ls(t,s,n,v,l,a){return d(),o("div",p,[e("div",y,[s[15]||(s[15]=e("div",{class:"header-content"},[e("h1",{class:"page-title"},"ðŸ¤– AI Trading - Regular Users"),e("p",{class:"page-subtitle"},"Manage regular users (non-admin) in AI trading cart")],-1)),e("div",T,[e("button",{class:"refresh-btn",onClick:s[0]||(s[0]=(...i)=>a.refreshUsers&&a.refreshUsers(...i)),disabled:l.isLoading},[e("i",{class:u(["fas fa-sync-alt",{"fa-spin":l.isLoading}])},null,2),c(" "+r(l.isLoading?"Loading...":"Refresh"),1)],8,C)])]),e("div",M,[e("div",A,[s[17]||(s[17]=e("div",{class:"stat-icon"},"ðŸ‘¥",-1)),e("div",I,[e("div",P,r(a.totalUsers),1),s[16]||(s[16]=e("div",{class:"stat-label"},"Regular Users",-1))])]),e("div",x,[s[19]||(s[19]=e("div",{class:"stat-icon"},"ðŸ’°",-1)),e("div",B,[e("div",S,"â‚¹"+r(a.totalBalance.toLocaleString()),1),s[18]||(s[18]=e("div",{class:"stat-label"},"Total Balance",-1))])]),e("div",D,[s[21]||(s[21]=e("div",{class:"stat-icon"},"ðŸ“ˆ",-1)),e("div",L,[e("div",F,r(a.activeUsers),1),s[20]||(s[20]=e("div",{class:"stat-label"},"Active Users",-1))])]),e("div",N,[s[23]||(s[23]=e("div",{class:"stat-icon"},"ðŸ†•",-1)),e("div",V,[e("div",E,r(a.newUsers),1),s[22]||(s[22]=e("div",{class:"stat-label"},"New This Month",-1))])])]),e("div",j,[e("div",Q,[s[24]||(s[24]=e("i",{class:"fas fa-search search-icon"},null,-1)),U(e("input",{"onUpdate:modelValue":s[1]||(s[1]=i=>l.searchQuery=i),type:"text",placeholder:"Search users by name, mobile, or ID...",class:"search-input"},null,512),[[_,l.searchQuery]])]),e("div",W,[(d(!0),o(m,null,f(l.filters,i=>(d(),o("button",{key:i.value,class:u(["filter-btn",{active:l.activeFilter===i.value}]),onClick:g=>l.activeFilter=i.value},r(i.label),11,q))),128))])]),e("div",R,[l.isLoading?(d(),o("div",H,s[25]||(s[25]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"Loading users...",-1)]))):a.filteredUsers.length===0?(d(),o("div",z,[s[26]||(s[26]=e("div",{class:"no-data-icon"},"ðŸ‘¥",-1)),s[27]||(s[27]=e("h3",null,"No Users Found",-1)),e("p",null,r(l.searchQuery?"Try adjusting your search terms":"No users available at the moment"),1)])):(d(),o("div",G,[(d(!0),o(m,null,f(a.paginatedUsers,i=>(d(),o("div",{key:i.id,class:"user-card"},[e("div",J,[e("div",K,[e("span",O,r(a.getUserInitials(i.name)),1)]),e("div",X,[e("span",{class:u(["status-badge",a.getUserStatus(i.status)])},r(a.getUserStatusText(i.status)),3)])]),e("div",Y,[e("h3",Z,r(i.name),1),e("p",$,[s[28]||(s[28]=e("i",{class:"fas fa-mobile-alt"},null,-1)),c(" "+r(i.phone||"No Mobile"),1)]),e("div",ss,"ID: "+r(i.id),1)]),e("div",es,[s[29]||(s[29]=e("div",{class:"balance-label"},"Total Balance",-1)),e("div",ts,"â‚¹"+r(i.total_balance||"0.00"),1),e("div",{class:u(["balance-status",a.getBalanceStatus(i.total_balance)])},r(a.getBalanceStatusText(i.total_balance)),3)]),e("div",as,[e("button",{class:"action-btn view-btn",onClick:g=>a.viewUserDetails(i)},s[30]||(s[30]=[e("i",{class:"fas fa-eye"},null,-1),c(" View Details ")]),8,ls),e("button",{class:"action-btn trade-btn",onClick:g=>a.tradeWithUser(i)},s[31]||(s[31]=[e("i",{class:"fas fa-robot"},null,-1),c(" Trade with AI ")]),8,is)])]))),128))])),a.totalPages>1?(d(),o("div",ns,[e("button",{class:"page-btn",disabled:l.currentPage===1,onClick:s[2]||(s[2]=i=>l.currentPage=l.currentPage-1)},s[32]||(s[32]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,rs),e("div",os,[(d(!0),o(m,null,f(a.visiblePages,i=>(d(),o("button",{key:i,class:u(["page-btn",{active:i===l.currentPage}]),onClick:g=>l.currentPage=i},r(i),11,ds))),128))]),e("button",{class:"page-btn",disabled:l.currentPage===a.totalPages,onClick:s[3]||(s[3]=i=>l.currentPage=l.currentPage+1)},s[33]||(s[33]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,cs)])):b("",!0)]),l.showUserModal?(d(),o("div",{key:0,class:"modal-overlay",onClick:s[8]||(s[8]=(...i)=>a.closeUserModal&&a.closeUserModal(...i))},[e("div",{class:"modal-content",onClick:s[7]||(s[7]=w(()=>{},["stop"]))},[e("div",vs,[s[35]||(s[35]=e("h2",{class:"modal-title"},"ðŸ‘¤ User Details",-1)),e("button",{class:"modal-close",onClick:s[4]||(s[4]=(...i)=>a.closeUserModal&&a.closeUserModal(...i))},s[34]||(s[34]=[e("i",{class:"fas fa-times"},null,-1)]))]),l.selectedUser?(d(),o("div",us,[e("div",gs,[e("div",bs,[e("span",ms,r(a.getUserInitials(l.selectedUser.name)),1)]),e("div",fs,[e("h3",hs,r(l.selectedUser.name),1),e("p",Us,[e("span",{class:u(["status-badge",a.getUserStatus(l.selectedUser.status)])},r(a.getUserStatusText(l.selectedUser.status)),3)])])]),e("div",_s,[e("div",ws,[s[36]||(s[36]=e("div",{class:"detail-label"},[e("i",{class:"fas fa-id-card"}),c(" User ID ")],-1)),e("div",ks,r(l.selectedUser.id),1)]),e("div",ps,[s[37]||(s[37]=e("div",{class:"detail-label"},[e("i",{class:"fas fa-envelope"}),c(" Email Address ")],-1)),e("div",ys,r(l.selectedUser.email),1)]),e("div",Ts,[s[38]||(s[38]=e("div",{class:"detail-label"},[e("i",{class:"fas fa-mobile-alt"}),c(" Mobile Number ")],-1)),e("div",Cs,r(l.selectedUser.phone||"Not provided"),1)]),e("div",Ms,[s[39]||(s[39]=e("div",{class:"detail-label"},[e("i",{class:"fas fa-calendar-alt"}),c(" Joined Date ")],-1)),e("div",As,r(a.formatDate(l.selectedUser.created_at)),1)]),e("div",Is,[s[40]||(s[40]=e("div",{class:"detail-label"},[e("i",{class:"fas fa-wallet"}),c(" Current Balance ")],-1)),e("div",Ps,"â‚¹"+r(l.selectedUser.total_balance||"0.00"),1)]),e("div",xs,[s[41]||(s[41]=e("div",{class:"detail-label"},[e("i",{class:"fas fa-chart-line"}),c(" Balance Status ")],-1)),e("div",Bs,[e("span",{class:u(["balance-status-badge",a.getBalanceStatus(l.selectedUser.total_balance)])},r(a.getBalanceStatusText(l.selectedUser.total_balance)),3)])])]),e("div",Ss,[e("button",{class:"action-btn trade-btn-large",onClick:s[5]||(s[5]=i=>a.tradeWithUser(l.selectedUser))},s[42]||(s[42]=[e("i",{class:"fas fa-robot"},null,-1),c(" Start AI Trading ")])),e("button",{class:"action-btn close-btn",onClick:s[6]||(s[6]=(...i)=>a.closeUserModal&&a.closeUserModal(...i))},s[43]||(s[43]=[e("i",{class:"fas fa-times"},null,-1),c(" Close ")]))])])):b("",!0)])])):b("",!0),e("div",Ds,[e("div",{class:"nav-item",onClick:s[9]||(s[9]=i=>a.navigateTo("admin_dashboard"))},s[44]||(s[44]=[e("div",{class:"nav-icon"},"ðŸ ",-1),e("span",{class:"nav-label"},"Home",-1)])),e("div",{class:"nav-item",onClick:s[10]||(s[10]=i=>a.navigateTo("register_request"))},s[45]||(s[45]=[e("div",{class:"nav-icon"},"ðŸ“",-1),e("span",{class:"nav-label"},"Register",-1)])),e("div",{class:"nav-item",onClick:s[11]||(s[11]=i=>a.navigateTo("money_request"))},s[46]||(s[46]=[e("div",{class:"nav-icon"},"ðŸ’°",-1),e("span",{class:"nav-label"},"Wallet",-1)])),e("div",{class:"nav-item",onClick:s[12]||(s[12]=i=>a.navigateTo("user_management"))},s[47]||(s[47]=[e("div",{class:"nav-icon"},"ðŸ‘¥",-1),e("span",{class:"nav-label"},"Users",-1)])),e("div",{class:"nav-item",onClick:s[13]||(s[13]=i=>a.navigateTo("withdrawal_request"))},s[48]||(s[48]=[e("div",{class:"nav-icon"},"ðŸ’³",-1),e("span",{class:"nav-label"},"Withdraw",-1)])),e("div",{class:"nav-item",onClick:s[14]||(s[14]=i=>a.navigateTo("analytics"))},s[49]||(s[49]=[e("div",{class:"nav-icon"},"ðŸ“Š",-1),e("span",{class:"nav-label"},"Analytics",-1)])),s[50]||(s[50]=e("div",{class:"nav-item active"},[e("div",{class:"nav-icon"},"ðŸ¤–"),e("span",{class:"nav-label"},"AI Trading")],-1))])])}const Ns=h(k,[["render",Ls],["__scopeId","data-v-a2d5a41d"]]);export{Ns as default};
