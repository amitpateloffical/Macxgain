import{_ as k,s as V,S as N,g as l,Q as x,o as c,q as t,l as s,b as d,t as p,i as v,w as U,c as b,h,f as I,u as F,n as C}from"./app-B3YJMxV9.js";const R={props:{userId:{type:String,required:!0}},data(){return{options:{name:"",email:"",phone:"",role:"",profile_image:""},selectedFile:null,imagePreview:null,errors:{}}},created(){this.getUserProfile()},methods:{RemoveError(r){this.errors[r]&&delete this.errors[r]},hasErrors(r){return this.errors&&this.errors[r]},getErrors(r){return this.errors[r]?this.errors[r][0]:""},getUserProfile(){V.get("/userprofile").then(r=>{this.options=r.data.data})},onFileChange(r){this.selectedFile=r.target.files[0],this.selectedFile&&(this.imagePreview=URL.createObjectURL(this.selectedFile))},triggerFileUpload(){this.$refs.fileInput.click()},saveGeneralInfo(){const r=new FormData;r.append("id",this.options.id),r.append("name",this.options.name),r.append("email",this.options.email),r.append("phone",this.options.phone),r.append("role",this.options.role),r.append("bank_name",this.options.bank_name||""),r.append("account_no",this.options.account_no||""),r.append("ifsc_code",this.options.ifsc_code||""),this.selectedFile&&r.append("profile_image",this.selectedFile),V.post(`/update-profile/${btoa(this.options.id)}`,r,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{this.options=e.data.data,this.selectedFile=null,this.imagePreview=null,window.dispatchEvent(new Event("profileUpdated")),N.fire({icon:"success",title:"Profile updated successfully",timer:1500,showConfirmButton:!1}),e.data.data.is_admin==0?this.$router.push("/user/dashboard"):this.$router.push("/admin/dashboard")}).catch(e=>{var _;((_=e.response)==null?void 0:_.data.code)===422&&(this.errors=e.response.data.errors)})}}},S={class:"mt-4"},O={class:"fw-bold"},T={class:"text-muted"},B={class:"text-muted"},G={key:0,class:"text-danger small"},q={key:0,class:"text-danger small"},D={key:0,class:"text-danger small"},j={key:0,class:"text-danger small"},A={key:0,class:"text-danger small"},L={class:"mt-4"};function M(r,e,_,f,n,o){const i=l("b-col"),u=l("b-form-input"),m=l("b-form-group"),w=l("b-row"),g=l("b-button"),E=l("b-form"),P=l("b-card"),y=l("b-container");return c(),x(y,{fluid:"",class:"main-content"},{default:t(()=>[s(P,{class:"profile-card shadow-lg border-0"},{default:t(()=>[s(w,null,{default:t(()=>[s(i,{md:"4",class:"text-center border-end border-gray-700 pe-4"},{default:t(()=>[d("div",S,[d("h5",O,p(n.options.name),1),d("p",T,[e[11]||(e[11]=d("strong",null,"Email:",-1)),v(" "+p(n.options.email),1)]),d("p",B,[e[12]||(e[12]=d("strong",null,"Contact:",-1)),v(" "+p(n.options.phone),1)])])]),_:1}),s(i,{md:"8",class:"ps-4"},{default:t(()=>[e[15]||(e[15]=d("h4",{class:"fw-bold mb-3 text-primary"},"Edit Profile",-1)),s(E,{onSubmit:U(o.saveGeneralInfo,["prevent"])},{default:t(()=>[s(w,null,{default:t(()=>[s(i,{md:"6",class:"mb-3"},{default:t(()=>[s(m,{label:"Full Name","label-class":"fw-semibold"},{default:t(()=>[s(u,{id:"name",modelValue:n.options.name,"onUpdate:modelValue":e[0]||(e[0]=a=>n.options.name=a),onInput:e[1]||(e[1]=a=>o.RemoveError("name")),state:o.hasErrors("name")?!1:null,placeholder:"Enter Name",autocomplete:"off"},null,8,["modelValue","state"]),o.hasErrors("name")?(c(),b("div",G,p(o.getErrors("name")),1)):h("",!0)]),_:1})]),_:1}),s(i,{md:"6",class:"mb-3"},{default:t(()=>[s(m,{label:"Email","label-class":"fw-semibold"},{default:t(()=>[s(u,{modelValue:n.options.email,"onUpdate:modelValue":e[2]||(e[2]=a=>n.options.email=a),readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),s(i,{md:"6",class:"mb-3"},{default:t(()=>[s(m,{label:"Phone","label-class":"fw-semibold"},{default:t(()=>[s(u,{id:"phone",modelValue:n.options.phone,"onUpdate:modelValue":e[3]||(e[3]=a=>n.options.phone=a),onInput:e[4]||(e[4]=a=>o.RemoveError("phone")),state:o.hasErrors("phone")?!1:null,placeholder:"Enter Mobile Number",autocomplete:"off"},null,8,["modelValue","state"]),o.hasErrors("phone")?(c(),b("div",q,p(o.getErrors("phone")),1)):h("",!0)]),_:1})]),_:1}),s(i,{md:"6",class:"mb-3"},{default:t(()=>[s(m,{label:"Bank Name","label-class":"fw-semibold"},{default:t(()=>[s(u,{id:"bank_name",modelValue:n.options.bank_name,"onUpdate:modelValue":e[5]||(e[5]=a=>n.options.bank_name=a),onInput:e[6]||(e[6]=a=>o.RemoveError("bank_name")),state:o.hasErrors("bank_name")?!1:null,placeholder:"Enter Bank Name",autocomplete:"off"},null,8,["modelValue","state"]),o.hasErrors("bank_name")?(c(),b("div",D,p(o.getErrors("bank_name")),1)):h("",!0)]),_:1})]),_:1}),s(i,{md:"6",class:"mb-3"},{default:t(()=>[s(m,{label:"Account Number","label-class":"fw-semibold"},{default:t(()=>[s(u,{id:"account_no",modelValue:n.options.account_no,"onUpdate:modelValue":e[7]||(e[7]=a=>n.options.account_no=a),onInput:e[8]||(e[8]=a=>o.RemoveError("account_no")),state:o.hasErrors("account_no")?!1:null,placeholder:"Enter Account Number",autocomplete:"off"},null,8,["modelValue","state"]),o.hasErrors("account_no")?(c(),b("div",j,p(o.getErrors("account_no")),1)):h("",!0)]),_:1})]),_:1}),s(i,{md:"6",class:"mb-3"},{default:t(()=>[s(m,{label:"IFSC Code","label-class":"fw-semibold"},{default:t(()=>[s(u,{id:"ifsc_code",modelValue:n.options.ifsc_code,"onUpdate:modelValue":e[9]||(e[9]=a=>n.options.ifsc_code=a),onInput:e[10]||(e[10]=a=>o.RemoveError("ifsc_code")),state:o.hasErrors("ifsc_code")?!1:null,placeholder:"Enter IFSC Code",autocomplete:"off"},null,8,["modelValue","state"]),o.hasErrors("ifsc_code")?(c(),b("div",A,p(o.getErrors("ifsc_code")),1)):h("",!0)]),_:1})]),_:1})]),_:1}),d("div",L,[s(g,{type:"submit",variant:"primary",class:"me-2 rounded-pill px-4"},{default:t(()=>e[13]||(e[13]=[d("i",{class:"bi bi-check-circle me-1"},null,-1),v(" Save ")])),_:1}),s(g,{type:"reset",variant:"secondary",class:"rounded-pill px-4"},{default:t(()=>e[14]||(e[14]=[d("i",{class:"bi bi-x-circle me-1"},null,-1),v(" Cancel ")])),_:1})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}const z=k(R,[["render",M],["__scopeId","data-v-809f5310"]]);V.defaults.withCredentials=!0;const Q={data(){return{showOldPassword:!1,showNewPassword:!1,showConfirmPassword:!1,errors:{}}},methods:{RemoveError(r){this.errors[r]&&delete this.errors[r]},hasErrors(r){return this.errors&&this.errors[r]},getErrors(r){return this.errors[r]?this.errors[r][0]:""},toggleOldPasswordView(){this.showOldPassword=!this.showOldPassword},toggleNewPasswordView(){this.showNewPassword=!this.showNewPassword},toggleConfirmPasswordView(){this.showConfirmPassword=!this.showConfirmPassword}},setup(){const r=I({current_password:"",new_password:"",new_password_confirmation:""}),e=I([]),_=F();return{userpassword:r,changePassword:()=>{V.post("/change-password",r.value).then(n=>{n.data.status==="success"&&N.fire({title:"Success!",text:"Password changed successfully.",icon:"success",timer:2e3,showConfirmButton:!1}).then(()=>{_.replace({name:"dashboard"})})}).catch(n=>{n.response&&n.response.data.code===422&&(e.value=n.response.data.errors)})},errors:e}}},H={key:0,class:"text-danger small"},J={key:0,class:"text-danger small"},K={key:0,class:"text-danger small"};function W(r,e,_,f,n,o){const i=l("b-form-input"),u=l("b-input-group-append"),m=l("b-input-group"),w=l("b-form-group"),g=l("b-button"),E=l("b-form"),P=l("b-card"),y=l("b-container");return c(),x(y,{fluid:"",class:"main-content"},{default:t(()=>[s(P,{class:"profile-card"},{default:t(()=>[e[10]||(e[10]=d("h4",{class:"mb-4"},"Change Password",-1)),s(E,null,{default:t(()=>[s(w,{label:"Old Password"},{default:t(()=>[s(m,{class:"input-group-merge"},{default:t(()=>[s(i,{type:n.showOldPassword?"text":"password",modelValue:f.userpassword.current_password,"onUpdate:modelValue":e[0]||(e[0]=a=>f.userpassword.current_password=a),id:"current_password",onInput:e[1]||(e[1]=a=>o.RemoveError("current_password")),state:o.hasErrors("current_password")?!1:null,placeholder:"Enter Current Password",autocomplete:"off"},null,8,["type","modelValue","state"]),s(u,{"is-text":""},{default:t(()=>[d("button",{type:"button",onClick:e[2]||(e[2]=(...a)=>o.toggleOldPasswordView&&o.toggleOldPasswordView(...a)),class:"toggle-password-btn"},[d("i",{class:C(n.showOldPassword?"fa fa-eye-slash":"fa fa-eye")},null,2)])]),_:1})]),_:1}),o.hasErrors("current_password")?(c(),b("div",H,p(o.getErrors("current_password")),1)):h("",!0)]),_:1}),s(w,{label:"New Password"},{default:t(()=>[s(m,{class:"input-group-merge"},{default:t(()=>[s(i,{type:n.showNewPassword?"text":"password",modelValue:f.userpassword.new_password,"onUpdate:modelValue":e[3]||(e[3]=a=>f.userpassword.new_password=a),id:"new_password",onInput:e[4]||(e[4]=a=>o.RemoveError("new_password")),state:o.hasErrors("new_password")?!1:null,placeholder:"Enter New Password",autocomplete:"off"},null,8,["type","modelValue","state"]),s(u,{"is-text":""},{default:t(()=>[d("button",{type:"button",onClick:e[5]||(e[5]=(...a)=>o.toggleNewPasswordView&&o.toggleNewPasswordView(...a)),class:"toggle-password-btn"},[d("i",{class:C(n.showNewPassword?"fa fa-eye-slash":"fa fa-eye")},null,2)])]),_:1})]),_:1}),o.hasErrors("new_password")?(c(),b("div",J,p(o.getErrors("new_password")),1)):h("",!0)]),_:1}),s(w,{label:"Confirm Password"},{default:t(()=>[s(m,{class:"input-group-merge"},{default:t(()=>[s(i,{type:n.showConfirmPassword?"text":"password",modelValue:f.userpassword.new_password_confirmation,"onUpdate:modelValue":e[6]||(e[6]=a=>f.userpassword.new_password_confirmation=a),id:"new_password_confirmation",onInput:e[7]||(e[7]=a=>o.RemoveError("new_password_confirmation")),state:o.hasErrors("new_password_confirmation")?!1:null,placeholder:"Confirm New Password",autocomplete:"off"},null,8,["type","modelValue","state"]),s(u,{"is-text":""},{default:t(()=>[d("button",{type:"button",onClick:e[8]||(e[8]=(...a)=>o.toggleConfirmPasswordView&&o.toggleConfirmPasswordView(...a)),class:"toggle-password-btn"},[d("i",{class:C(n.showConfirmPassword?"fa fa-eye-slash":"fa fa-eye")},null,2)])]),_:1})]),_:1}),o.hasErrors("new_password_confirmation")?(c(),b("div",K,p(o.getErrors("new_password_confirmation")),1)):h("",!0)]),_:1}),s(g,{type:"submit",variant:"success",class:"mt-3",onClick:f.changePassword},{default:t(()=>e[9]||(e[9]=[v(" Change Password ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})}const X=k(Q,[["render",W],["__scopeId","data-v-f11ff285"]]),Y={props:{userId:{type:String,required:!0}},components:{GeneralTab:z,ChangePasswordTab:X}};function Z(r,e,_,f,n,o){const i=l("GeneralTab"),u=l("b-tab"),m=l("ChangePasswordTab"),w=l("b-tabs"),g=l("b-col"),E=l("b-row"),P=l("b-container");return c(),x(P,{fluid:"",class:"main-content"},{default:t(()=>[s(E,null,{default:t(()=>[s(g,null,{default:t(()=>[s(w,{pills:"","content-class":"mt-3","nav-class":"justify-content-center"},{default:t(()=>[s(u,{title:"General",active:""},{default:t(()=>[s(i,{userId:_.userId},null,8,["userId"])]),_:1}),s(u,{title:"Change Password"},{default:t(()=>[s(m,{userId:_.userId},null,8,["userId"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const ee=k(Y,[["render",Z]]);export{ee as default};
