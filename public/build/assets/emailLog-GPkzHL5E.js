import{C as V}from"./vue-select.es-D7GWzju7.js";import{_ as B,a as i,c as h,o as m,b as s,e as _,t as f,i as a,f as c,k as t,n as b,A as D,r as v,B as I}from"./app-bFpPY_8Q.js";const j={components:{vSelect:V},watch:{currentPage(o){this.fetchEntries()},perPage(o){this.currentPage=1,this.fetchEntries()}},computed:{sortIcon(){return this.sortDesc?"fas fa-sort-down":"fas fa-sort-up"},rangeStart(){return this.totalrows===0?0:(this.currentPage-1)*this.perPage+1},rangeEnd(){return this.currentPage*this.perPage>=this.totalrows?this.totalrows:this.currentPage*this.perPage}},data(){return{search:{email:"",status:""},emailLogs:{data:[],total:0},totalrows:0,sortBy:"",sortDesc:!1,successMessage:"",StatusOption:[{label:"Sent",value:"sent"},{label:"Pending",value:"pending"}],fields:[{key:"email",label:"Email",sortable:!0},{key:"status",label:"Status",sortable:!1},{key:"subject",label:"Subject",sortable:!0}],showfilter:!1}},mounted(){this.fetchEntries()},methods:{fetchEntries(){I.get("/api/email-logs",{params:{email:this.search.email,status:this.search.status,perPage:this.perPage,page:this.currentPage}}).then(o=>{this.emailLogs=o.data,this.totalrows=o.data.total_row_count}).catch(o=>{console.error(o)})},searchFilter(){this.currentPage=1,this.fetchEntries(),this.showfilter=!1},resetFilter(){this.currentPage=1,this.search.email="",this.search.status="",this.showfilter=!1,this.fetchEntries()},onSortChanged(o){this.sortBy=o.sortBy,this.sortDesc=o.sortDesc},changeSorting(o){this.sortBy===o?this.sortDesc=!this.sortDesc:(this.sortBy=o,this.sortDesc=!1),this.fetchEntries()},getSortIcon(o){return this.sortBy===o?this.sortDesc?"fas fa-sort-down":"fas fa-sort-up":"fas fa-sort"}},setup(){const o=v(1),e=v(25);return{currentPage:o,perPage:e,perPageOptions:[25,50,75,100]}}},F={class:"dashboard"},L={class:"list__page"},N={key:0,class:"alert alert-success"},O={class:"list__title"},U={key:1},M={class:"table-container"},z={class:"mx-2 mb-2"},A={class:"d-flex align-items-center"},R={class:"d-flex align-items-center"},T={class:"showing_pagination_result"},q={class:"d-flex justify-content-end"};function G(o,e,y,d,r,l){const g=i("b-button"),x=i("b-form-input"),w=i("b-form-group"),u=i("b-col"),S=i("v-select"),p=i("b-row"),k=i("b-card"),C=i("b-table"),E=i("b-pagination");return m(),h("div",F,[s("div",L,[r.successMessage?(m(),h("div",N,f(r.successMessage),1)):_("",!0),s("div",O,[e[9]||(e[9]=s("h2",null,[s("i",{class:"fas fa-user"}),c(" Email Logs")],-1)),a(g,{onClick:e[0]||(e[0]=n=>r.showfilter=!r.showfilter),variant:"primary"},{default:t(()=>e[8]||(e[8]=[c(" Filter ")])),_:1})]),r.showfilter?(m(),h("div",U,[a(k,{class:"filterBox mb-0"},{default:t(()=>[a(p,null,{default:t(()=>[a(u,{md:"5",xl:"3"},{default:t(()=>[a(w,{label:"Email"},{default:t(()=>[a(x,{modelValue:r.search.email,"onUpdate:modelValue":e[1]||(e[1]=n=>r.search.email=n),placeholder:"Enter Email"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{md:"5",xl:"3"},{default:t(()=>[a(w,{label:"Status"},{default:t(()=>[a(S,{modelValue:r.search.status,"onUpdate:modelValue":e[2]||(e[2]=n=>r.search.status=n),options:r.StatusOption,placeholder:"Select Status"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1}),a(p,null,{default:t(()=>[a(u,{md:"2",xl:"2"},{default:t(()=>[a(g,{onClick:l.searchFilter,variant:"primary w-100"},{default:t(()=>e[10]||(e[10]=[c("Search")])),_:1},8,["onClick"])]),_:1}),a(u,{md:"2",xl:"2"},{default:t(()=>[a(g,{onClick:l.resetFilter,variant:"secondary w-100"},{default:t(()=>e[11]||(e[11]=[c("Reset")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})])):_("",!0),s("div",M,[a(C,{items:r.emailLogs.data,fields:r.fields,onSortChanged:l.onSortChanged,"sort-by":r.sortBy,"sort-desc":r.sortDesc,"empty-text":"No matching records found"},{"head(email)":t(n=>[s("span",{onClick:e[3]||(e[3]=P=>l.changeSorting("email"))},[e[12]||(e[12]=c(" Email ")),s("i",{class:b(l.getSortIcon("email"))},null,2)])]),"head(status)":t(n=>[s("span",{onClick:e[4]||(e[4]=P=>l.changeSorting("status"))},[e[13]||(e[13]=c(" Status ")),s("i",{class:b(l.getSortIcon("status"))},null,2)])]),"head(subject)":t(n=>[s("span",{onClick:e[5]||(e[5]=P=>l.changeSorting("subject"))},[e[14]||(e[14]=c(" Subject ")),s("i",{class:b(l.getSortIcon("subject"))},null,2)])]),_:1},8,["items","fields","onSortChanged","sort-by","sort-desc"]),s("div",z,[a(p,{class:"align-items-center"},{default:t(()=>[a(u,{cols:"12",md:"4"},{default:t(()=>[s("div",A,[e[15]||(e[15]=s("span",{class:"mr-2 showing_pagination_result"},"Show",-1)),a(S,{modelValue:d.perPage,"onUpdate:modelValue":e[6]||(e[6]=n=>d.perPage=n),options:d.perPageOptions,clearable:!1,class:"mr-2"},null,8,["modelValue","options"]),e[16]||(e[16]=s("span",{class:"showing_pagination_result"},"entries",-1))])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[s("div",R,[s("span",T,"Showing "+f(l.rangeStart)+" to "+f(l.rangeEnd)+" of "+f(r.totalrows)+" entries",1)])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[s("div",q,[r.totalrows>0?(m(),D(E,{key:0,modelValue:d.currentPage,"onUpdate:modelValue":e[7]||(e[7]=n=>d.currentPage=n),"total-rows":r.totalrows,"per-page":d.perPage,onInput:l.fetchEntries,pills:"","first-number":"","last-number":"","prev-class":"prev-item","next-class":"next-item"},{"prev-text":t(()=>e[17]||(e[17]=[s("i",{class:"fa-solid fa-angles-left"},null,-1)])),"next-text":t(()=>e[18]||(e[18]=[s("i",{class:"fa-solid fa-angles-right"},null,-1)])),_:1},8,["modelValue","total-rows","per-page","onInput"])):_("",!0)])]),_:1})]),_:1})])])])])}const K=B(j,[["render",G],["__scopeId","data-v-66efe692"]]);export{K as default};
