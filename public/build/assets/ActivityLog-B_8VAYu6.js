/* empty css                   */import{_ as F,g as f,Z as C,c as u,o as c,b as o,h as _,l as n,t as m,j as N,i as g,Q as I,q as i,n as D,F as S,r as P,s as v,f as V}from"./app-BuGciwe8.js";import{C as L}from"./vue-select.es-CdE5lKqz.js";const j={components:{vSelect:L},data(){return{encodeBase64:e=>btoa(e.toString()),errors:{},showfilter:!1,fetchSystem:[],fields:[{key:"created",label:"Date & Time",sortable:!0},{key:"description",label:"Description",sortable:!0,sortBy:"description"},{key:"log_name",label:"Log Name",sortable:!0},{key:"event",label:"Action",sortable:!0}],systemData:{id:"",title:"",system_url:"",login_api:"",registration_api:"",status:""},showsystemType:!1,EditSystemId:!1,loading:!1,successMessage:"",StatusOption:[{label:"Active",value:"A"},{label:"Inactive",value:"I"}],totalrows:0,sortBy:"",sortDesc:!1,OldModelDescription:"",NewModelDescription:"",showVerificationModal:!1}},mounted(){this.fetchEntries(),v.get("/alluser").then(s=>{this.username=s.data.alluser}),v.get("/getlogname").then(s=>{this.logname=s.data.logname})},watch:{currentPage(s){this.fetchEntries()},perPage(s){this.currentPage=1,this.fetchEntries()}},computed:{filteredNewModelDescription(){return Object.fromEntries(Object.entries(this.NewModelDescription).filter(([s])=>s!=="id"))},filteredOldModelDescription(){return Object.fromEntries(Object.entries(this.OldModelDescription).filter(([s])=>s!=="id"))},sortIcon(){return this.sortDesc?"fas fa-sort-down":"fas fa-sort-up"},rangeStart(){return this.totalrows===0?0:(this.currentPage-1)*this.perPage+1},rangeEnd(){return this.currentPage*this.perPage>=this.totalrows?this.totalrows:this.currentPage*this.perPage}},setup(){const s=V({name:"",description:"",log_name:""}),e=V(1),w=V(10);return{search:s,currentPage:e,perPage:w,perPageOptions:[10,50,75,100]}},methods:{formatDate(s){if(!s)return"";const e=new Date(s);if(isNaN(e))return"";const w={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};let d=new Intl.DateTimeFormat("en-GB",w).format(e).replace(",",""),l=e.getHours();const a=e.getMinutes();let h="AM";l>=12?(h="PM",l>12&&(l-=12)):(l===0&&(l=12),h="AM");const b=a<10?`0${a}`:a;return d=`${d.replace(/(\d{2}):(\d{2})/,`${l}:${b}`)} ${h}`,d},isDifferent(s){return this.OldModelDescription[s]!==this.NewModelDescription[s]},getDescriptionClick:function(s){this.showVerificationModal=!0;let e=JSON.parse(s);this.OldModelDescription=e.old,this.NewModelDescription=e.attributes},onSortChanged(s){this.sortBy=s.sortBy,this.sortDesc=s.sortDesc},changeSorting(s){this.sortBy===s?this.sortDesc=!this.sortDesc:(this.sortBy=s,this.sortDesc=!1),this.fetchEntries()},getSortIcon(s){return this.sortBy===s?this.sortDesc?"fas fa-sort-down":"fas fa-sort-up":"fas fa-sort"},resetFilter(){this.search={name:"",description:"",log_name:""},this.currentPage=1,this.fetchEntries(),this.showfilter=!1},searchFilter(){this.currentPage=1,this.fetchEntries(),this.showfilter=!1},fetchEntries(){v.get("/getactivity",{params:{name:this.search.name,description:this.search.description,log_name:this.search.log_name,page:this.currentPage,perPage:this.perPage}}).then(s=>{this.fetchSystem=s.data.data.data,this.totalrows=s.data.data.total}).catch(s=>{})},openModal(){this.showsystemType=!0,this.EditSystemId=!1,this.systemData={id:"",title:"",system_url:"",login_api:"",registration_api:"",status:""}},editClient(s){this.showsystemType=!0,this.EditSystemId=!0,v.get(`/systems/${s}`).then(e=>{this.systemData=e.data.data})},clearSuccessMessage(){setTimeout(()=>{this.successMessage=""},2e3)},resetModal(){this.systemData={id:"",title:"",system_url:"",login_api:"",registration_api:"",status:""},this.showsystemType=!1,this.errors=[],this.showVerificationModal=!1}}},k={class:"dashboard"},z={class:"list__page"},H={key:0,class:"alert alert-success"},R={class:"list__title"},q={key:1},G={class:"table-container shift-left"},J=["onClick"],Q={class:"mx-2 mb-2"},Z={class:"d-flex align-items-center"},K={class:"d-flex align-items-center"},W={class:"showing_pagination_result"},X={class:"d-flex justify-content-end"},Y={class:"align-text-top text-capitalize myDescription",ref:"modelDescription"},$={class:"row"},ee={class:"col"},te={key:0},se={class:"table-responsive"},oe={class:"table table-bordered"},re={key:0},ae={key:1},ie={class:"col"},le={key:0},ne={class:"table-responsive"},de={class:"table table-bordered"};function ce(s,e,w,d,l,a){const h=f("b-button"),b=f("v-select"),y=f("b-form-group"),p=f("b-col"),O=f("b-form-input"),M=f("b-row"),x=f("b-card"),A=f("b-table"),E=f("b-pagination"),B=f("b-modal"),T=C("ripple"),U=C("b-modal");return c(),u("div",k,[o("div",z,[l.successMessage?(c(),u("div",H,m(l.successMessage),1)):_("",!0),o("div",R,[e[12]||(e[12]=o("h4",null,[o("i",{class:"fas fa-user"}),g(" Activity Log ")],-1)),N((c(),I(h,{variant:"primary",class:"mb-0 ml-md-1 basicButton shift3",onClick:e[0]||(e[0]=t=>l.showfilter=!l.showfilter)},{default:i(()=>e[11]||(e[11]=[g(" Filter ")])),_:1})),[[T,"rgba(113, 102, 240, 0.15)",void 0,{400:!0}]])]),l.showfilter?(c(),u("div",q,[n(x,{class:"filterBox mb-0 shift-left"},{default:i(()=>[n(M,null,{default:i(()=>[n(p,{md:"5",xl:"3"},{default:i(()=>[n(y,{label:"Name","label-for":"Name"},{default:i(()=>[n(b,{"input-id":"status",modelValue:d.search.name,"onUpdate:modelValue":e[1]||(e[1]=t=>d.search.name=t),options:s.username,reduce:t=>t.value,clearable:!0,value:"value",label:"label",placeholder:"Select Status",onInput:e[2]||(e[2]=t=>s.RemoveError("status"))},null,8,["modelValue","options","reduce"])]),_:1})]),_:1}),n(p,{md:"5",xl:"3"},{default:i(()=>[n(y,{label:"Description","label-for":"Description"},{default:i(()=>[n(O,{modelValue:d.search.description,"onUpdate:modelValue":e[3]||(e[3]=t=>d.search.description=t),id:"basicInput",placeholder:"Enter Description"},null,8,["modelValue"])]),_:1})]),_:1}),n(p,{md:"5",xl:"3"},{default:i(()=>[n(y,{label:"Log Name","label-for":"Log Name"},{default:i(()=>[n(b,{"input-id":"log_name",modelValue:d.search.log_name,"onUpdate:modelValue":e[4]||(e[4]=t=>d.search.log_name=t),options:s.logname,clearable:!0,reduce:t=>t.log_name,value:"log_name",label:"log_name",placeholder:"Select Status"},null,8,["modelValue","options","reduce"])]),_:1})]),_:1})]),_:1}),n(M,null,{default:i(()=>[n(p,{md:"2",xl:"2"},{default:i(()=>[n(h,{onClick:a.searchFilter,variant:"primary mt-1 w-100"},{default:i(()=>e[13]||(e[13]=[g(" Search ")])),_:1},8,["onClick"])]),_:1}),n(p,{md:"2",xl:"2"},{default:i(()=>[n(h,{onClick:a.resetFilter,variant:"primary mt-1 w-100"},{default:i(()=>e[14]||(e[14]=[g(" Reset ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})])):_("",!0),o("div",G,[n(A,{responsive:"",stacked:"sm",ref:"refTeamListTable",items:l.fetchSystem,fields:l.fields,"sort-by":l.sortBy,"sort-desc":l.sortDesc,onSortChanged:a.onSortChanged,class:"mb-2 staticTable","empty-text":"No matching records found"},{"cell(created)":i(t=>[o("span",null,m(a.formatDate(t.value)),1)]),"head(created)":i(t=>[o("span",{onClick:e[5]||(e[5]=r=>a.changeSorting("created"))},[e[15]||(e[15]=g(" Date & Time ")),o("i",{class:D(a.getSortIcon("created"))},null,2)])]),"head(description)":i(t=>[o("span",{onClick:e[6]||(e[6]=r=>a.changeSorting("description"))},[e[16]||(e[16]=g(" Description ")),o("i",{class:D(a.getSortIcon("description"))},null,2)])]),"head(log_name)":i(t=>[o("span",{onClick:e[7]||(e[7]=r=>a.changeSorting("log_name"))},[e[17]||(e[17]=g(" Log Name ")),o("i",{class:D(a.getSortIcon("log_name"))},null,2)])]),"cell(event)":i(t=>[N((c(),u("span",{class:"align-text-top text-capitalize",style:{color:"blue"},onClick:r=>a.getDescriptionClick(t.item.properties)},[g(m(t.item.event),1)],8,J)),[[U,void 0,void 0,{"modal-account-import":!0}]])]),_:1},8,["items","fields","sort-by","sort-desc","onSortChanged"]),o("div",Q,[n(M,{class:"align-items-center"},{default:i(()=>[n(p,{cols:"12",md:"4"},{default:i(()=>[o("div",Z,[e[18]||(e[18]=o("span",{class:"mr-2 showing_pagination_result"},"Show",-1)),n(b,{modelValue:d.perPage,"onUpdate:modelValue":e[8]||(e[8]=t=>d.perPage=t),options:d.perPageOptions,clearable:!1,class:"mr-2"},null,8,["modelValue","options"]),e[19]||(e[19]=o("span",{class:"showing_pagination_result"},"entries",-1))])]),_:1}),n(p,{cols:"12",md:"4"},{default:i(()=>[o("div",K,[o("span",W,"Showing "+m(a.rangeStart)+" to "+m(a.rangeEnd)+" of "+m(l.totalrows)+" entries",1)])]),_:1}),n(p,{cols:"12",md:"4"},{default:i(()=>[o("div",X,[l.totalrows>0?(c(),I(E,{key:0,modelValue:d.currentPage,"onUpdate:modelValue":e[9]||(e[9]=t=>d.currentPage=t),"total-rows":l.totalrows,"per-page":d.perPage,onInput:a.fetchEntries,pills:"","first-number":"","last-number":"","prev-class":"prev-item","next-class":"next-item"},{"prev-text":i(()=>e[20]||(e[20]=[o("i",{class:"fa-solid fa-angles-left"},null,-1)])),"next-text":i(()=>e[21]||(e[21]=[o("i",{class:"fa-solid fa-angles-right"},null,-1)])),_:1},8,["modelValue","total-rows","per-page","onInput"])):_("",!0)])]),_:1})]),_:1})])]),n(B,{modelValue:l.showVerificationModal,"onUpdate:modelValue":e[10]||(e[10]=t=>l.showVerificationModal=t),onOk:s.handleOk,onHide:a.resetModal,centered:"","cancel-variant":"outline-secondary","hide-footer":""},{default:i(()=>[o("div",Y,[o("div",$,[o("div",ee,[l.NewModelDescription!==void 0?(c(),u("div",te,[e[22]||(e[22]=o("p",{class:"font-weight-bold mb-2"},"New Data",-1)),o("div",se,[o("table",oe,[l.OldModelDescription!==void 0?(c(),u("tbody",re,[(c(!0),u(S,null,P(a.filteredNewModelDescription,(t,r)=>(c(),u("tr",{key:r,class:D({highlight:a.isDifferent(r)})},[o("td",null,m(r),1),o("td",null,m(r==="created_at"||r==="updated_at"||r==="Created At"||r==="Updated At"||r==="added_at"?a.formatDate(t):r==="deleted_at"?t===null?"":a.formatDate(t):r==="status"?t==="A"?"Active":t==="I"?"Inactive":"":t),1)],2))),128))])):_("",!0),l.OldModelDescription===void 0?(c(),u("tbody",ae,[(c(!0),u(S,null,P(a.filteredNewModelDescription,(t,r)=>(c(),u("tr",{key:r},[o("td",null,m(r),1),o("td",null,m(r==="created_at"||r==="updated_at"||r==="Created At"||r==="Updated At"||r==="added_at"?a.formatDate(t):r==="deleted_at"?t===null?"":a.formatDate(t):r==="status"?t==="A"?"Active":t==="I"?"Inactive":"":t),1)]))),128))])):_("",!0)])])])):_("",!0)]),o("div",ie,[l.OldModelDescription!==void 0?(c(),u("div",le,[e[23]||(e[23]=o("p",{class:"font-weight-bold mb-2"},"Old Data",-1)),o("div",ne,[o("table",de,[o("tbody",null,[(c(!0),u(S,null,P(a.filteredOldModelDescription,(t,r)=>(c(),u("tr",{key:r,class:D({highlight:a.isDifferent(r)})},[o("td",null,m(r),1),o("td",null,m(r==="created_at"||r==="updated_at"||r==="Created At"||r==="Updated At"||r==="added_at"?a.formatDate(t):r==="deleted_at"?t===null?"":a.formatDate(t):r==="status"?t==="A"?"Active":t==="I"?"Inactive":"":t),1)],2))),128))])])])])):_("",!0)])])],512)]),_:1},8,["modelValue","onOk","onHide"])])])}const pe=F(j,[["render",ce],["__scopeId","data-v-85607364"]]);export{pe as default};
