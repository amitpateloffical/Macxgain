import{_ as C,a as p,c as r,o,A as _,i as m,k as c,b as t,f as n,t as s,e as g,F as y,p as f,l as v}from"./app-W3Nmn5mk.js";const D={data(){return{ticketType:null,loading:!0,error:null,gettaskdata:[],getactivitydata:[],getactiveticket:[],showAllTickets:!1}},created(){this.fetchTicketType()},setup(){return{goBack:()=>{window.history.back()}}},mounted(){this.fetchtask(),this.fetchactiveticket()},methods:{formatDateTime(a,e){const k=`${a}T${e}`,u=new Date(k);if(isNaN(u.getTime()))return"Invalid Date";const l={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0};return u.toLocaleString("en-US",l)},formatDate(a){const e=new Date(a),k=["January","February","March","April","May","June","July","August","September","October","November","December"],u=e.getDate(),l=e.getMonth();return k[l]+" "+u},fetchactivity(){const a=this.$route.params.id;v.get(`/getactivity/${a}`).then(e=>{this.getactivitydata=e.data.data,console.log(e.data.data,"sd"),this.loading=!1}).catch(()=>{this.error="Failed to load ticket type.",this.loading=!1})},fetchactiveticket(){const a=this.$route.params.id;v.get(`/getactivetickets/${a}`).then(e=>{this.getactiveticket=e.data.data,console.log(e.data.data,"sd"),this.loading=!1}).catch(()=>{this.error="Failed to load ticket type.",this.loading=!1})},fetchtask(){const a=this.$route.params.id;v.get(`/getcustomertask/${a}`).then(e=>{this.gettaskdata=e.data.data,console.log(e.data.data,"sd"),this.loading=!1}).catch(()=>{this.error="Failed to load ticket type.",this.loading=!1})},fetchTicketType(){const a=this.$route.params.id;console.log(a,"id"),v.get(`/customer/${a}`).then(e=>{this.ticketType=e.data.data,this.loading=!1}).catch(e=>{this.error="Failed to load ticket type.",this.loading=!1})}}},I={class:"view-ticket-type dashboard"},S={class:"page__breadcrumb"},N={class:"my-2 d-flex justify-content-end mt-5"},B={class:"active-tickets-title"},L={class:"contact-person"},V={class:"contact-info"},F={class:"contact-info"},x={class:"customer-preview__details"},q={class:"my-2 d-flex justify-content-end mt-0"},E={key:0,class:"mt-3"},M={class:"table"},O={key:1},P={class:"table"},R={key:0,class:"divider"},J={key:0,class:"divider"},j={key:1};function G(a,e,k,u,l,T){const h=p("b-link"),b=p("b-button"),w=p("b-card-body"),A=p("b-card");return o(),r("div",I,[l.ticketType?(o(),_(A,{key:0,class:"details-card custom-card"},{default:c(()=>[t("div",S,[t("p",null,[m(h,{to:{name:"customer"}},{default:c(()=>e[1]||(e[1]=[n(" Customer "),t("i",{class:"fas fa-chevron-right"},null,-1)])),_:1}),e[2]||(e[2]=n(" Customer Preview"))])]),t("div",N,[m(b,{variant:"info",size:"sm",class:"mr-1"},{default:c(()=>[m(h,{to:{name:""}}),e[3]||(e[3]=n(" View Details "))]),_:1})]),e[19]||(e[19]=t("h4",null,"Customer Preview",-1)),m(w,null,{default:c(()=>[t("p",null,[t("strong",B,"#CI-00"+s(l.ticketType.id),1)]),e[10]||(e[10]=t("strong",null,"Customer Name:",-1)),t("p",null,s(l.ticketType.name),1),t("span",L,s(l.ticketType.contactperson),1),t("span",V,[e[4]||(e[4]=t("i",{class:"fas fa-envelope"},null,-1)),n(" "+s(l.ticketType.email),1)]),t("span",F,[e[5]||(e[5]=t("i",{class:"fas fa-phone"},null,-1)),n(" "+s(l.ticketType.contactnumber),1)]),e[11]||(e[11]=t("div",{class:"customer-preview__details"},[t("table",{class:"table"},[t("thead",null,[t("tr",null,[t("th",null,"Tickets"),t("th",null,"Overdue Tickets"),t("th",null,"Avg. Response Time"),t("th",null,"Total Response Time")])]),t("tbody",null,[t("tr",null,[t("td",null,"16"),t("td",null,"4"),t("td",null,"25:00"),t("td",null,"1:32:56")])])])],-1)),e[12]||(e[12]=t("p",null,[t("strong",{class:"active-tickets-title"},"Details")],-1)),e[13]||(e[13]=t("div",{class:"details-container"},[t("div",{class:"detail-item"},[n(" Org. Name - "),t("strong",null,"qtech software")]),t("div",{class:"detail-item"},[n(" Assigned To - "),t("strong",null,"admin")]),t("div",{class:"detail-item"},[n(" Add Line 1 - "),t("strong",null,"Springfield, IL 62701")]),t("div",{class:"detail-item"},[n(" Add Line 2 - "),t("strong",null,"162 Maple street")]),t("div",{class:"detail-item"},[n(" State - "),t("strong",null,"maharatra")]),t("div",{class:"detail-item"},[n(" City - "),t("strong",null,"mumbai")]),t("div",{class:"detail-item"},[n(" Country - "),t("strong",null,"India")]),t("div",{class:"detail-item"},[n(" ZIP CODE - "),t("strong",null,"123456")])],-1)),e[14]||(e[14]=t("hr",null,null,-1)),t("div",x,[e[9]||(e[9]=t("strong",{class:"active-tickets-title"},"ACTIVE TICKETS",-1)),t("div",q,[l.getactiveticket.length>1?(o(),_(h,{key:0,variant:"primary",class:"mr-1",onClick:e[0]||(e[0]=i=>l.showAllTickets=!l.showAllTickets)},{default:c(()=>[n(s(l.showAllTickets?"Show Less Tickets":"View More Tickets"),1)]),_:1})):g("",!0)]),l.getactiveticket.length>0?(o(),r("div",E,[t("p",null,[t("strong",null,"#TI-"+s(l.getactiveticket[0].id)+" | "+s(l.getactiveticket[0].name),1)]),t("table",M,[e[6]||(e[6]=t("thead",null,[t("tr",null,[t("th",null,"Tickets Type"),t("th",null,"Priority"),t("th",null,"Assigned To"),t("th",null,"Request Date")])],-1)),t("tbody",null,[t("tr",null,[t("td",null,s(l.getactiveticket[0].ticket_type),1),t("td",null,s(l.getactiveticket[0].priority),1),t("td",null,s(l.getactiveticket[0].assignee_name),1),t("td",null,s(l.getactiveticket[0].request_date),1)])])])])):g("",!0),l.showAllTickets?(o(),r("div",O,[(o(!0),r(y,null,f(l.getactiveticket,(i,d)=>(o(),r("div",{key:`ticket-${d}`,class:"mt-3"},[t("p",null,[t("strong",null,"#TI-"+s(i.id),1)]),e[8]||(e[8]=t("h5",{class:"table-title"},"Ticket Details",-1)),t("table",P,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",null,"Tickets Type"),t("th",null,"Priority"),t("th",null,"Assigned To"),t("th",null,"Request Date")])],-1)),t("tbody",null,[t("tr",null,[t("td",null,s(i.ticket_type),1),t("td",null,s(i.priority),1),t("td",null,s(i.assignee_name),1),t("td",null,s(i.request_date),1)])])])]))),128))])):g("",!0)]),e[15]||(e[15]=t("hr",null,null,-1)),e[16]||(e[16]=t("h5",{class:"active-tickets-title"},"TASK",-1)),(o(!0),r(y,null,f(l.gettaskdata,(i,d)=>(o(),r("div",{key:`task-${d}`,class:"mt-3"},[t("div",null,[t("strong",null,"* Task Id-"+s(i.id)+" "+s(i.title),1),t("p",null,s(i.description),1),n(" "+s(T.formatDateTime(i.date,i.time)),1)]),d<l.gettaskdata.length-1?(o(),r("hr",R)):g("",!0)]))),128)),e[17]||(e[17]=t("hr",null,null,-1)),e[18]||(e[18]=t("h5",{class:"active-tickets-title"},"ACTIVITIES LOGS",-1)),(o(!0),r(y,null,f(l.getactivitydata,(i,d)=>(o(),r("div",{key:`activity-${d}`,class:"mt-3"},[t("div",null,[t("strong",null,"* Task Id-"+s(i.id)+" "+s(i.title),1),t("p",null,s(i.description),1),n(" "+s(T.formatDateTime(i.date,i.time)),1)]),d<l.getactivitydata.length-1?(o(),r("hr",J)):g("",!0)]))),128))]),_:1})]),_:1})):(o(),r("div",j,e[20]||(e[20]=[t("p",null,"Loading...",-1)]))),m(b,{variant:"primary",onClick:u.goBack},{default:c(()=>e[21]||(e[21]=[n("Go Back")])),_:1},8,["onClick"])])}const z=C(D,[["render",G],["__scopeId","data-v-a59e3a5f"]]);export{z as default};
