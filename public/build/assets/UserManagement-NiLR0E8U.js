import{_ as ms,u as ws,f as c,D as b,L as gs,E as bs,G as hs,Y as _s,c as f,o as m,b as e,h as P,i as C,j as u,v as w,X as A,t as n,n as h,a as ys,F as Us,r as ks,w as R}from"./app-DVB4C1tT.js";const Es={class:"user-management-screen"},Ps={class:"page-header"},Cs={class:"header-actions"},As={class:"search-filters"},Ns={class:"search-box"},$s={class:"filter-options"},Ms={class:"stats-grid"},Ss={class:"stat-card"},Ds={class:"stat-content"},js={class:"stat-number"},Rs={class:"stat-card"},Fs={class:"stat-content"},Vs={class:"stat-number"},Is={class:"stat-card"},Ls={class:"stat-content"},qs={class:"stat-number"},xs={class:"stat-card"},Ts={class:"stat-content"},Bs={class:"stat-number"},Xs={class:"users-container"},zs={class:"table-header"},Hs={class:"table-actions"},Gs=["disabled"],Js={key:0,class:"no-users"},Os={key:1,class:"no-users"},Ws={key:2,class:"no-users"},Ys={key:3,class:"users-table"},Ks={class:"col-user"},Zs={class:"user-info"},Qs=["src","alt"],se={class:"user-details"},ee={class:"user-name"},te={class:"user-id"},ae={class:"col-email"},oe={class:"email-text"},le={class:"col-phone"},ne={class:"phone-text"},ie={class:"col-role"},re={class:"col-status"},de={class:"col-joined"},ue={class:"date-text"},ce={class:"col-actions"},ve={class:"action-buttons"},pe=["onClick","disabled"],fe=["onClick"],me=["onClick"],we=["onClick"],ge={key:4,class:"pagination"},be=["disabled"],he=["disabled"],_e={class:"page-info"},ye=["disabled"],Ue=["disabled"],ke={class:"modal-body"},Ee={class:"form-row"},Pe={class:"form-group"},Ce={class:"form-group"},Ae={class:"form-row"},Ne={class:"form-group"},$e={class:"form-group"},Me={class:"form-row"},Se={class:"form-group"},De={class:"form-row"},je={class:"form-group"},Re={class:"form-group"},Fe={class:"form-row"},Ve={class:"form-group full-width"},Ie={class:"form-actions"},Le=["disabled"],qe={key:0},xe={class:"modal-header"},Te={class:"modal-body"},Be={class:"form-row"},Xe={class:"form-group"},ze={class:"form-group"},He={class:"form-row"},Ge={class:"form-group"},Je={class:"form-group"},Oe={class:"form-row"},We={class:"form-group"},Ye={class:"form-group"},Ke={class:"modal-header"},Ze={class:"modal-body"},Qe={class:"user-details-view"},st={class:"user-avatar-large"},et=["src","alt"],tt={class:"user-info-grid"},at={class:"info-row"},ot={class:"info-value"},lt={class:"info-row"},nt={class:"info-value"},it={class:"info-row"},rt={class:"info-value"},dt={class:"info-row"},ut={class:"info-value"},ct={class:"info-row"},vt={class:"info-value"},pt={class:"info-row"},ft={class:"info-value"},mt={class:"info-row"},wt={class:"info-value"},gt={class:"info-row"},bt={class:"info-value"},ht={class:"info-row"},_t={class:"info-value balance-value"},yt={class:"bank-details-section"},Ut={class:"info-row"},kt={class:"info-value"},Et={class:"info-row"},Pt={class:"info-value"},Ct={class:"info-row"},At={class:"info-value"},Nt={class:"kyc-details-section"},$t={class:"info-row"},Mt={class:"info-value kyc-value"},St={class:"info-row"},Dt={class:"info-value kyc-value"},jt={class:"info-row address-row"},Rt={class:"info-value address-value"},Ft={__name:"UserManagement",setup(Vt){ws();const F=c(!1),N=c(!1),$=c(!1),V=c(!1),_=c(""),y=c("all"),U=c("all"),v=c(1),x=c(10),I=c(!1),l=c({name:"",email:"",phone:"",role:"user",status:"active",password:"",confirmPassword:"",profile_image:null}),r=c({id:null,name:"",email:"",phone:"",role:"user",status:"active",newPassword:""}),i=c({}),p=c([]),k=c(!1),L=c(null),E=`${window.location.origin}/api`,z=async()=>{try{k.value=!0,L.value=null;const a=localStorage.getItem("access_token");if(!a)throw new Error("No access token found. Please login again.");const s=await fetch(`${E}/users`,{method:"GET",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(s.status===401)throw new Error("Authentication failed. Please login again.");if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const o=await s.json();if(o.success&&o.data)p.value=o.data.map(t=>({id:t.id,name:t.name||"Unknown User",email:t.email,phone:t.phone||null,role:t.is_admin?"admin":"user",status:B(t.status)||"active",avatar:t.profile_image||"../assest/img/tableprofileimg.png",created_at:t.created_at,last_login:t.last_login_at||null,total_balance:0}));else throw new Error(o.message||"Failed to fetch users")}catch(a){console.error("Error fetching users:",a),L.value=a.message,p.value.length===0&&(p.value=[{id:1,name:"Kamlesh Patel",email:"kamlesh@example.com",phone:"+91 98765 43210",role:"admin",status:"active",avatar:"../assest/img/tableprofileimg.png",created_at:"2024-01-01T10:00:00Z",last_login:"2024-01-15T14:30:00Z",total_balance:5e4}])}finally{k.value=!1}},M=b(()=>{let a=p.value;if(_.value){const s=_.value.toLowerCase();a=a.filter(o=>o.name.toLowerCase().includes(s)||o.email.toLowerCase().includes(s)||o.phone&&o.phone.includes(s))}return y.value!=="all"&&(a=a.filter(s=>s.status===y.value)),U.value!=="all"&&(a=a.filter(s=>s.role===U.value)),a}),H=b(()=>{const a=(v.value-1)*x.value,s=a+x.value;return M.value.slice(a,s)}),S=b(()=>Math.ceil(M.value.length/x.value)),K=b(()=>p.value.length),Z=b(()=>p.value.filter(a=>a.status==="active").length),Q=b(()=>p.value.filter(a=>a.role==="admin").length),ss=b(()=>{const a=new Date().getMonth(),s=new Date().getFullYear();return p.value.filter(o=>{const t=new Date(o.created_at);return t.getMonth()===a&&t.getFullYear()===s}).length}),D=()=>{F.value=!1,es()},j=()=>{N.value=!1,ts()},q=()=>{$.value=!1,i.value={}},es=()=>{l.value={name:"",email:"",phone:"",role:"user",status:"active",password:"",confirmPassword:"",profile_image:null}},ts=()=>{r.value={id:null,name:"",email:"",phone:"",role:"user",status:"active",newPassword:""}},as=a=>{const s=a.target.files[0];if(s){if(s.size>2*1024*1024){alert("Profile image must be less than 2MB"),a.target.value="";return}if(!s.type.startsWith("image/")){alert("Please select a valid image file"),a.target.value="";return}l.value.profile_image=s}},os=async()=>{try{if(l.value.password!==l.value.confirmPassword){alert("Password and Confirm Password do not match!");return}if(l.value.password.length<6){alert("Password must be at least 6 characters long!");return}if(!l.value.name||!l.value.email||!l.value.phone||!l.value.role||!l.value.status){alert("Please fill in all required fields!");return}I.value=!0;const a=localStorage.getItem("access_token");if(!a)throw new Error("No access token found. Please login again.");const s=new FormData;s.append("name",l.value.name),s.append("email",l.value.email),s.append("phone",l.value.phone),s.append("password",l.value.password),s.append("password_confirmation",l.value.confirmPassword),s.append("is_admin",l.value.role==="admin"?1:0),s.append("status",O(l.value.status)),l.value.profile_image&&s.append("profile_image",l.value.profile_image);const o=await fetch(`${E}/users`,{method:"POST",headers:{Authorization:`Bearer ${a}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:s});if(o.status===401)throw new Error("Authentication failed. Please login again.");if(!o.ok){const d=await o.json();throw new Error(d.message||"Failed to create user")}const t=await o.json();if(t.success&&t.data){const d={id:t.data.id,name:t.data.name||"Unknown User",email:t.data.email,phone:t.data.phone||null,role:t.data.is_admin?"admin":"user",status:B(t.data.status)||"active",avatar:t.data.profile_image||"../assest/img/tableprofileimg.png",created_at:t.data.created_at,last_login:null,total_balance:0};p.value.unshift(d),D(),alert("User created successfully!")}else throw new Error(t.message||"Failed to create user")}catch(a){console.error("Error creating user:",a),alert(`Error creating user: ${a.message}`)}finally{I.value=!1}},ls=async a=>{V.value=!0;try{const s=localStorage.getItem("access_token");if(!s)throw new Error("No access token found. Please login again.");const o=await fetch(`${E}/users/${a.id}`,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json",Accept:"application/json"}});if(!o.ok)throw new Error("Failed to fetch user details");const t=await o.json();if(t.success&&t.data)i.value=t.data,$.value=!0;else throw new Error(t.message||"Failed to fetch user details")}catch(s){console.error("Error fetching user details:",s),alert(`Error fetching user details: ${s.message}`),i.value=a,$.value=!0}finally{V.value=!1}},ns=a=>{r.value={id:a.id,name:a.name,email:a.email,phone:a.phone,role:a.role,status:a.status,newPassword:""},N.value=!0},is=()=>{r.value={id:i.value.id,name:i.value.name,email:i.value.email,phone:i.value.phone,role:i.value.role,status:i.value.status,newPassword:""},N.value=!0},rs=async(a,s)=>{try{const o=localStorage.getItem("access_token");if(!o)throw new Error("No access token found. Please login again.");const d={active:"A",inactive:"I",suspended:"D"}[s]||"A",g=await fetch(`${E}/users/${a.id}/status`,{method:"PATCH",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({status:d})});if(g.status===401)throw new Error("Authentication failed. Please login again.");if(!g.ok){const X=await g.json();throw new Error(X.message||"Failed to update user status")}const Y=await g.json();if(Y.success){a.status=s;const X=s==="suspended"?"suspended":"activated";alert(`User ${a.name} has been ${X}!`)}else throw new Error(Y.message||"Failed to update user status")}catch(o){console.error("Error updating user status:",o),alert(`Error updating user status: ${o.message}`)}},ds=async()=>{try{const a=localStorage.getItem("access_token");if(!a)throw new Error("No access token found. Please login again.");const s={name:r.value.name,email:r.value.email,phone:r.value.phone,is_admin:r.value.role==="admin"?1:0,status:O(r.value.status)};r.value.newPassword&&(s.password=r.value.newPassword,s.password_confirmation=r.value.newPassword);const o=await fetch(`${E}/users/${r.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(s)});if(o.status===401)throw new Error("Authentication failed. Please login again.");if(!o.ok){const d=await o.json();throw new Error(d.message||"Failed to update user")}const t=await o.json();if(t.success&&t.data){const d=p.value.findIndex(g=>g.id===r.value.id);d!==-1&&(p.value[d]={...p.value[d],name:t.data.name,email:t.data.email,phone:t.data.phone,role:t.data.is_admin?"admin":"user",status:B(t.data.status)}),j(),alert("User updated successfully!")}else throw new Error(t.message||"Failed to update user")}catch(a){console.error("Error updating user:",a),alert(`Error updating user: ${a.message}`)}},us=async a=>{try{if(confirm(`Are you sure you want to delete user: ${a.name}?`)){const s=localStorage.getItem("access_token");if(!s)throw new Error("No access token found");const o=await fetch(`${E}/users/${a.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(o.status===401)throw new Error("Authentication failed. Please login again.");if(!o.ok){const d=await o.json();throw new Error(d.message||"Failed to delete user")}const t=await o.json();if(t.success){const d=p.value.findIndex(g=>g.id===a.id);d>-1&&(p.value.splice(d,1),alert("User deleted successfully!"),H.value.length===0&&v.value>1&&v.value--)}else throw new Error(t.message||"Failed to delete user")}}catch(s){console.error("Error deleting user:",s),alert(`Error deleting user: ${s.message}`)}},cs=()=>{_.value="",y.value="all",U.value="all",v.value=1},vs=()=>{const a=ps(),s=new Blob([a],{type:"text/csv"}),o=window.URL.createObjectURL(s),t=document.createElement("a");t.href=o,t.download="users_export.csv",t.click(),window.URL.revokeObjectURL(o)},ps=()=>{const a=["ID","Name","Email","Phone","Role","Status","Joined Date"],s=M.value.map(o=>[o.id,o.name,o.email,o.phone||"N/A",o.role,o.status,T(o.created_at)]);return[a,...s].map(o=>o.join(",")).join(`
`)},G=a=>a==="admin"?"role-admin":"role-user",J=a=>({active:"status-active",inactive:"status-inactive",suspended:"status-suspended"})[a]||"status-active",T=a=>a?new Date(a).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",fs=a=>a?a.replace(/(\d{4})(\d{4})(\d{4})/,"$1 $2 $3"):"Not provided",O=a=>({active:"A",inactive:"I",suspended:"D"})[a]||"A",B=a=>({A:"active",I:"inactive",D:"suspended"})[a]||"active";gs([_,y,U],()=>{v.value=1});const W=a=>{a.key==="Escape"&&(F.value?D():N.value?j():$.value&&q())};return bs(()=>{document.addEventListener("keydown",W),z()}),hs(()=>{document.removeEventListener("keydown",W)}),(a,s)=>{const o=_s('else"');return m(),f("div",Es,[e("div",Ps,[s[25]||(s[25]=e("div",{class:"header-content"},[e("h1",{class:"page-title"},"👥 User Management"),e("p",{class:"page-subtitle"},"Manage all registered users and their accounts")],-1)),e("div",Cs,[e("button",{class:"btn-primary",onClick:s[0]||(s[0]=t=>F.value=!0)},s[24]||(s[24]=[e("i",{class:"fa-solid fa-user-plus"},null,-1),C(" Add User ")]))])]),e("div",As,[e("div",Ns,[s[26]||(s[26]=e("i",{class:"fa-solid fa-search search-icon"},null,-1)),u(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=t=>_.value=t),placeholder:"Search users by name, email, or phone...",class:"search-input"},null,512),[[w,_.value]])]),e("div",$s,[u(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>y.value=t),class:"filter-select"},s[27]||(s[27]=[e("option",{value:"all"},"All Users",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"suspended"},"Suspended",-1)]),512),[[A,y.value]]),u(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>U.value=t),class:"filter-select"},s[28]||(s[28]=[e("option",{value:"all"},"All Roles",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"user"},"User",-1)]),512),[[A,U.value]]),e("button",{class:"btn-secondary",onClick:cs},s[29]||(s[29]=[e("i",{class:"fa-solid fa-rotate"},null,-1),C(" Reset ")]))])]),e("div",Ms,[e("div",Ss,[s[31]||(s[31]=e("div",{class:"stat-icon"},"👥",-1)),e("div",Ds,[e("h3",js,n(K.value),1),s[30]||(s[30]=e("p",{class:"stat-label"},"Total Users",-1))])]),e("div",Rs,[s[33]||(s[33]=e("div",{class:"stat-icon"},"✅",-1)),e("div",Fs,[e("h3",Vs,n(Z.value),1),s[32]||(s[32]=e("p",{class:"stat-label"},"Active Users",-1))])]),e("div",Is,[s[35]||(s[35]=e("div",{class:"stat-icon"},"👑",-1)),e("div",Ls,[e("h3",qs,n(Q.value),1),s[34]||(s[34]=e("p",{class:"stat-label"},"Admin Users",-1))])]),e("div",xs,[s[37]||(s[37]=e("div",{class:"stat-icon"},"📅",-1)),e("div",Ts,[e("h3",Bs,n(ss.value),1),s[36]||(s[36]=e("p",{class:"stat-label"},"New This Month",-1))])])]),e("div",Xs,[e("div",zs,[e("h3",null,"Users List ("+n(M.value.length)+")",1),e("div",Hs,[e("button",{class:"btn-refresh",onClick:z,disabled:k.value},[e("i",{class:h(["fa-solid fa-rotate",{"fa-spin":k.value}])},null,2),C(" "+n(k.value?"Loading...":"Refresh"),1)],8,Gs),e("button",{class:"btn-export",onClick:vs},s[38]||(s[38]=[e("i",{class:"fa-solid fa-download"},null,-1),C(" Export ")]))])]),k.value?(m(),f("div",Js,s[39]||(s[39]=[e("div",{class:"no-users-icon"},"🔄",-1),e("h3",null,"Loading users...",-1),e("p",null,"Please wait while we fetch the data.",-1)]))):L.value?(m(),f("div",Os,[s[40]||(s[40]=e("div",{class:"no-users-icon"},"❌",-1)),e("h3",null,"Error: "+n(L.value),1),s[41]||(s[41]=e("p",null,"Failed to load users. Please try again later.",-1))])):M.value.length===0?(m(),f("div",Ws,s[42]||(s[42]=[e("div",{class:"no-users-icon"},"👥",-1),e("h3",null,"No users found",-1),e("p",null,"Try adjusting your search or filters",-1)]))):(m(),f("div",Ys,[s[46]||(s[46]=ys('<div class="table-row header-row" data-v-7f65bfdc><div class="col-user" data-v-7f65bfdc>User</div><div class="col-email" data-v-7f65bfdc>Email</div><div class="col-phone" data-v-7f65bfdc>Phone</div><div class="col-role" data-v-7f65bfdc>Role</div><div class="col-status" data-v-7f65bfdc>Status</div><div class="col-joined" data-v-7f65bfdc>Joined</div><div class="col-actions" data-v-7f65bfdc>Actions</div></div>',1)),(m(!0),f(Us,null,ks(H.value,t=>(m(),f("div",{key:t.id,class:h(["table-row user-row",{"user-inactive":t.status==="inactive","user-suspended":t.status==="suspended"}])},[e("div",Ks,[e("div",Zs,[e("img",{src:t.avatar,alt:t.name,class:"user-avatar"},null,8,Qs),e("div",se,[e("h4",ee,n(t.name),1),e("p",te,"ID: "+n(t.id),1)])])]),e("div",ae,[e("span",oe,n(t.email),1)]),e("div",le,[e("span",ne,n(t.phone||"N/A"),1)]),e("div",ie,[e("span",{class:h(["role-badge",G(t.role)])},n(t.role),3)]),e("div",re,[e("span",{class:h(["status-badge",J(t.status)])},n(t.status),3)]),e("div",de,[e("span",ue,n(T(t.created_at)),1)]),e("div",ce,[e("div",ve,[e("button",{class:"btn-action btn-view",onClick:d=>ls(t),title:"View Details",disabled:V.value},[e("i",{class:h(["fa-solid fa-eye",{"fa-spin":V.value}])},null,2)],8,pe),e("button",{class:"btn-action btn-edit",onClick:d=>ns(t),title:"Edit User"},s[43]||(s[43]=[e("i",{class:"fa-solid fa-edit"},null,-1)]),8,fe),t.status==="suspended"?(m(),f("button",{key:0,class:"btn-action btn-activate",onClick:d=>rs(t,"active"),title:"Activate User"},s[44]||(s[44]=[e("i",{class:"fa-solid fa-play"},null,-1)]),8,me)):P("",!0),e("button",{class:"btn-action btn-delete",onClick:d=>us(t),title:"Delete User"},s[45]||(s[45]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,we)])])],2))),128))])),S.value>1?(m(),f("div",ge,[e("button",{class:"btn-page",disabled:v.value===1,onClick:s[4]||(s[4]=t=>v.value=1)},s[47]||(s[47]=[e("i",{class:"fa-solid fa-angles-left"},null,-1)]),8,be),e("button",{class:"btn-page",disabled:v.value===1,onClick:s[5]||(s[5]=t=>v.value--)},s[48]||(s[48]=[e("i",{class:"fa-solid fa-angle-left"},null,-1)]),8,he),e("span",_e," Page "+n(v.value)+" of "+n(S.value),1),e("button",{class:"btn-page",disabled:v.value===S.value,onClick:s[6]||(s[6]=t=>v.value++)},s[49]||(s[49]=[e("i",{class:"fa-solid fa-angle-right"},null,-1)]),8,ye),e("button",{class:"btn-page",disabled:v.value===S.value,onClick:s[7]||(s[7]=t=>v.value=S.value)},s[50]||(s[50]=[e("i",{class:"fa-solid fa-angles-right"},null,-1)]),8,Ue)])):P("",!0)]),F.value?(m(),f("div",{key:0,class:"modal-overlay",onClick:D},[e("div",{class:"modal-content",onClick:s[15]||(s[15]=R(()=>{},["stop"])),ref:"addUserModalRef"},[e("div",{class:"modal-header"},[s[51]||(s[51]=e("h3",null,"Add New User",-1)),e("button",{class:"close-btn",onClick:D},"×")]),e("div",ke,[e("form",{onSubmit:R(os,["prevent"]),class:"user-form"},[e("div",Ee,[e("div",Pe,[s[52]||(s[52]=e("label",{for:"name"},"Full Name *",-1)),u(e("input",{type:"text",id:"name","onUpdate:modelValue":s[8]||(s[8]=t=>l.value.name=t),required:"",class:"form-control",placeholder:"Enter full name"},null,512),[[w,l.value.name]])]),e("div",Ce,[s[53]||(s[53]=e("label",{for:"email"},"Email Address *",-1)),u(e("input",{type:"email",id:"email","onUpdate:modelValue":s[9]||(s[9]=t=>l.value.email=t),required:"",class:"form-control",placeholder:"Enter email address"},null,512),[[w,l.value.email]])])]),e("div",Ae,[e("div",Ne,[s[54]||(s[54]=e("label",{for:"phone"},"Phone Number *",-1)),u(e("input",{type:"tel",id:"phone","onUpdate:modelValue":s[10]||(s[10]=t=>l.value.phone=t),required:"",class:"form-control",placeholder:"Enter phone number"},null,512),[[w,l.value.phone]])]),e("div",$e,[s[56]||(s[56]=e("label",{for:"role"},"User Role *",-1)),u(e("select",{id:"role","onUpdate:modelValue":s[11]||(s[11]=t=>l.value.role=t),required:"",class:"form-control"},s[55]||(s[55]=[e("option",{value:""},"Select Role",-1),e("option",{value:"user"},"👤 User",-1),e("option",{value:"admin"},"👑 Admin",-1)]),512),[[A,l.value.role]])])]),e("div",Me,[e("div",Se,[s[58]||(s[58]=e("label",{for:"status"},"Account Status *",-1)),u(e("select",{id:"status","onUpdate:modelValue":s[12]||(s[12]=t=>l.value.status=t),required:"",class:"form-control"},s[57]||(s[57]=[e("option",{value:""},"Select Status",-1),e("option",{value:"active"},"✅ Active",-1),e("option",{value:"inactive"},"⏸️ Inactive",-1),e("option",{value:"suspended"},"🚫 Suspended",-1)]),512),[[A,l.value.status]])])]),e("div",De,[e("div",je,[s[59]||(s[59]=e("label",{for:"password"},"Password *",-1)),u(e("input",{type:"password",id:"password","onUpdate:modelValue":s[13]||(s[13]=t=>l.value.password=t),required:"",class:"form-control",placeholder:"Enter password (min 6 characters)",minlength:"6"},null,512),[[w,l.value.password]]),s[60]||(s[60]=e("small",{class:"form-help"},"Password must be at least 6 characters long",-1))]),e("div",Re,[s[61]||(s[61]=e("label",{for:"confirmPassword"},"Confirm Password *",-1)),u(e("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":s[14]||(s[14]=t=>l.value.confirmPassword=t),required:"",class:"form-control",placeholder:"Confirm your password",minlength:"6"},null,512),[[w,l.value.confirmPassword]])])]),e("div",Fe,[e("div",Ve,[s[62]||(s[62]=e("label",{for:"profile_image"},"Profile Image",-1)),e("input",{type:"file",id:"profile_image",onChange:as,accept:"image/*",class:"form-control file-input"},null,32),s[63]||(s[63]=e("small",{class:"form-help"},"Upload profile picture (JPG, PNG, GIF - Max 2MB)",-1))])]),e("div",Ie,[e("button",{type:"button",class:"btn-secondary",onClick:D},"Cancel"),e("button",{type:"submit",class:"btn-primary",disabled:I.value},[I.value?(m(),f("span",qe,s[64]||(s[64]=[e("i",{class:"fa-solid fa-spinner fa-spin"},null,-1),C(" Creating User... ")]))):P("",!0),u((m(),f("span",null,s[65]||(s[65]=[e("i",{class:"fa-solid fa-user-plus"},null,-1),C(" Add User ")]))),[[o]])],8,Le)])],32)])],512)])):P("",!0),N.value?(m(),f("div",{key:1,class:"modal-overlay",onClick:j},[e("div",{class:"modal-content",onClick:s[22]||(s[22]=R(()=>{},["stop"])),ref:"editUserModalRef"},[e("div",xe,[e("h3",null,"Edit User: "+n(r.value.name),1),e("button",{class:"close-btn",onClick:j},"×")]),e("div",Te,[e("form",{onSubmit:R(ds,["prevent"]),class:"user-form"},[e("div",Be,[e("div",Xe,[s[66]||(s[66]=e("label",{for:"editName"},"Full Name",-1)),u(e("input",{type:"text",id:"editName","onUpdate:modelValue":s[16]||(s[16]=t=>r.value.name=t),required:"",class:"form-control",placeholder:"Enter full name"},null,512),[[w,r.value.name]])]),e("div",ze,[s[67]||(s[67]=e("label",{for:"editEmail"},"Email",-1)),u(e("input",{type:"email",id:"editEmail","onUpdate:modelValue":s[17]||(s[17]=t=>r.value.email=t),required:"",class:"form-control",placeholder:"Enter email address"},null,512),[[w,r.value.email]])])]),e("div",He,[e("div",Ge,[s[68]||(s[68]=e("label",{for:"editPhone"},"Phone",-1)),u(e("input",{type:"tel",id:"editPhone","onUpdate:modelValue":s[18]||(s[18]=t=>r.value.phone=t),class:"form-control",placeholder:"Enter phone number"},null,512),[[w,r.value.phone]])]),e("div",Je,[s[70]||(s[70]=e("label",{for:"editRole"},"Role",-1)),u(e("select",{id:"editRole","onUpdate:modelValue":s[19]||(s[19]=t=>r.value.role=t),required:"",class:"form-control"},s[69]||(s[69]=[e("option",{value:"user"},"User",-1),e("option",{value:"admin"},"Admin",-1)]),512),[[A,r.value.role]])])]),e("div",Oe,[e("div",We,[s[72]||(s[72]=e("label",{for:"editStatus"},"Status",-1)),u(e("select",{id:"editStatus","onUpdate:modelValue":s[20]||(s[20]=t=>r.value.status=t),required:"",class:"form-control"},s[71]||(s[71]=[e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"suspended"},"Suspended",-1)]),512),[[A,r.value.status]])]),e("div",Ye,[s[73]||(s[73]=e("label",{for:"editPassword"},"New Password (Optional)",-1)),u(e("input",{type:"password",id:"editPassword","onUpdate:modelValue":s[21]||(s[21]=t=>r.value.newPassword=t),class:"form-control",placeholder:"Leave blank to keep current password"},null,512),[[w,r.value.newPassword]])])]),e("div",{class:"form-actions"},[e("button",{type:"button",class:"btn-secondary",onClick:j},"Cancel"),s[74]||(s[74]=e("button",{type:"submit",class:"btn-primary"},"Update User",-1))])],32)])],512)])):P("",!0),$.value?(m(),f("div",{key:2,class:"modal-overlay",onClick:q},[e("div",{class:"modal-content",onClick:s[23]||(s[23]=R(()=>{},["stop"]))},[e("div",Ke,[e("h3",null,"User Details: "+n(i.value.name),1),e("button",{class:"close-btn",onClick:q},"×")]),e("div",Ze,[e("div",Qe,[e("div",st,[e("img",{src:i.value.avatar,alt:i.value.name},null,8,et)]),e("div",tt,[e("div",at,[s[75]||(s[75]=e("span",{class:"info-label"},"ID:",-1)),e("span",ot,n(i.value.id),1)]),e("div",lt,[s[76]||(s[76]=e("span",{class:"info-label"},"Name:",-1)),e("span",nt,n(i.value.name),1)]),e("div",it,[s[77]||(s[77]=e("span",{class:"info-label"},"Email:",-1)),e("span",rt,n(i.value.email),1)]),e("div",dt,[s[78]||(s[78]=e("span",{class:"info-label"},"Phone:",-1)),e("span",ut,n(i.value.phone||"N/A"),1)]),e("div",ct,[s[79]||(s[79]=e("span",{class:"info-label"},"Role:",-1)),e("span",vt,[e("span",{class:h(["role-badge",G(i.value.role)])},n(i.value.role),3)])]),e("div",pt,[s[80]||(s[80]=e("span",{class:"info-label"},"Status:",-1)),e("span",ft,[e("span",{class:h(["status-badge",J(i.value.status)])},n(i.value.status),3)])]),e("div",mt,[s[81]||(s[81]=e("span",{class:"info-label"},"Joined:",-1)),e("span",wt,n(T(i.value.created_at)),1)]),e("div",gt,[s[82]||(s[82]=e("span",{class:"info-label"},"Last Login:",-1)),e("span",bt,n(i.value.last_login||"Never"),1)]),e("div",ht,[s[83]||(s[83]=e("span",{class:"info-label"},"Total Balance:",-1)),e("span",_t,"₹"+n(i.value.total_balance||"0.00"),1)]),e("div",yt,[s[87]||(s[87]=e("h4",{class:"section-title"},"🏦 Bank Details",-1)),e("div",Ut,[s[84]||(s[84]=e("span",{class:"info-label"},"Bank Name:",-1)),e("span",kt,n(i.value.bank_name||"Not provided"),1)]),e("div",Et,[s[85]||(s[85]=e("span",{class:"info-label"},"Account Number:",-1)),e("span",Pt,n(i.value.account_no||"Not provided"),1)]),e("div",Ct,[s[86]||(s[86]=e("span",{class:"info-label"},"IFSC Code:",-1)),e("span",At,n(i.value.ifsc_code||"Not provided"),1)])]),e("div",Nt,[s[91]||(s[91]=e("h4",{class:"section-title"},"📋 KYC Details",-1)),e("div",$t,[s[88]||(s[88]=e("span",{class:"info-label"},"Aadhar Number:",-1)),e("span",Mt,n(i.value.aadhar_number?fs(i.value.aadhar_number):"Not provided"),1)]),e("div",St,[s[89]||(s[89]=e("span",{class:"info-label"},"PAN Card Number:",-1)),e("span",Dt,n(i.value.pan_number||"Not provided"),1)]),e("div",jt,[s[90]||(s[90]=e("span",{class:"info-label"},"Address:",-1)),e("span",Rt,n(i.value.address||"Not provided"),1)])])])]),e("div",{class:"modal-actions"},[e("button",{class:"btn-secondary",onClick:q},"Close"),e("button",{class:"btn-primary",onClick:is},"Edit User")])])])])):P("",!0)])}}},Lt=ms(Ft,[["__scopeId","data-v-7f65bfdc"]]);export{Lt as default};
