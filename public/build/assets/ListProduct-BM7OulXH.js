import{r as u,J as H,a as C,c as i,o,b as t,i as d,A as x,e as k,k as n,f as r,P as Y,t as c,O as J,n as z,F as P,x as F,y as R,l as G}from"./app-B4B1Mz8a.js";import{_ as q,U as K,E as T}from"./Excel-CyFMVrt0.js";/* empty css                   */import{C as X}from"./vue-select.es-CweVXps7.js";import{f as j,d as W,C as Z}from"./Close-BLMfLh5q.js";const ee={class:"listing_screen"},te={class:"title_line_screen px-4 py-2"},le={class:"title_line_left"},ae={class:"table_img_cell"},se={key:2,class:"titlelineicon"},oe={class:"title_line_right"},ie={class:"mt-4 px-4"},ne={key:0,class:"table_listing"},de=["src","onClick"],re={key:1,alt:"No Image Available",width:"100",height:"100"},ue={class:"table_grid_action"},ce={class:"table_action_dropdown"},_e={key:1,class:"table_grid_view"},me={class:"table_grid_list"},pe={class:"table_grid_title"},ge={class:"table_grid_label"},ve={class:"table_grid_title_right"},be={class:"table_grid_action"},fe={class:"table_action_dropdown"},ke=["onClick"],ye=["onClick"],he=["onClick"],Ce=["onClick"],we=["onClick"],Se={class:"table_grid_item_details"},$e={key:1,class:"No_data_available"},Ie={class:"d-flex"},De={class:"d-flex flex-column align-items-center mr-3"},Pe=["src","onClick"],Fe={class:"flex-grow-1 text-center"},Me=["src"],Ne={class:"upload_box"},Ve={class:"icon_circle"},Ae={key:0,class:"loading_area"},Be={class:"loading_upload_row"},Ue={class:"content"},xe={class:"details"},ze={class:"name"},Ge={class:"percent"},Te={class:"loading_bar"},Ee={key:1,class:"upload_area"},Le={class:"loading_upload_row"},Oe={class:"content upload"},Qe={class:"details"},He={class:"name"},Ye={class:"size"},et={__name:"ListProduct",setup(Je){const w=u(!1),M=u(null),S=u(null),$=u([]),y=u([]),V=u([]),N=u(!1),I=a=>{try{return JSON.parse(a||"[]")}catch{return[]}},E=a=>{M.value=a,$.value=I(a.uploadedImages),S.value=$.value.length>0?$.value[0]:null,w.value=!0},A=a=>{const e=a.target.files[0];if(!e)return;const p=e.name.length>=12?e.name.substring(0,13)+"... ."+e.name.split(".")[1]:e.name,v=new FormData;v.append("file",e),y.value.push({name:p,loading:0}),N.value=!0,G.post("/abc",v,{onUploadProgress:({loaded:b,total:_})=>{if(y.value[y.value.length-1].loading=Math.floor(b/_*100),b==_){const f=_<1024?_+"KB":(b/1048576).toFixed(2)+"MB";V.value.push({name:p,size:f}),y.value=[],N.value=!1}}}).catch(console.error(error))},D=u({modalStatus:!1}),s=u({tablefield:[{key:"select",label:""},{key:"catalog_image",label:"Catalog Image"},{key:"category_name",label:"Category"},{key:"sub_category_name",label:"Sub Category"},{key:"name",label:"Name",sortable:!0},{key:"product_id",label:"Product Id"},{key:"created_at",label:"Created Date"},{key:"netQuantity",label:"Products QTY"},{key:"actions",label:"Actions"}],tabledata:[],tableGridStatus:!0,loader:!0,currentPage:1,perPage:10,sortBy:"",sortDesc:!1,filterData:{ticket_id:"",ticket_name:"",ticket_type:"",priority:""},imageurl:null}),L=u({filterSelectField:[{profile_name:"Prashant",profile_image:"tableprofileimg.png"},{profile_name:"Ritesh",profile_image:"tableprofileimg.png"},{profile_name:"Vishal",profile_image:"tableprofileimg.png"}]}),h=u({shadow:!1,filter:!1,add:!1,view:!1});u({FormMaxMinStatus:!0});const B=a=>{const e=new Date(a),p=e.getDate().toString().padStart(2,"0"),v=e.toLocaleString("default",{month:"short"}),b=e.getFullYear();let _=e.getHours();const f=e.getMinutes().toString().padStart(2,"0"),l=_>=12?"PM":"AM";return _=_%12||12,`${p}/${v}/${b} ${_}:${f} ${l}`};(()=>{G.get("/products",{params:{page:s.value.currentPage,perPage:s.value.perPage,sortBy:s.value.sortBy,sortDesc:s.value.sortDesc,...s.value.filterData}}).then(a=>{s.value.tabledata=a.data.product,s.value.imageurl=a.data.url,s.value.loader=!1}).catch(a=>{console.log(a)})})();const O=a=>{a.target.nextSibling.classList.toggle("active_table_dropdown")},Q=a=>{if(a.item.engagement=="High")return"name_badge_red";if(a.item.engagement=="Medium")return"name_badge_orange"};return H(h.value,async(a,e)=>{a.filter||a.add||a.view?h.value.shadow=!0:h.value.shadow=!1}),(a,e)=>{const p=C("b-button"),v=C("b-form-checkbox"),b=C("b-table"),_=C("b-overlay"),f=C("b-modal");return o(),i("div",ee,[t("div",te,[t("div",le,[e[16]||(e[16]=t("h5",null,"Product",-1)),s.value.tabledata.length?(o(),x(J(X),{key:0,options:L.value.filterSelectField,label:"profile_name",class:"v_select_profile"},{option:n(({profile_name:l,profile_image:m})=>[t("span",ae,[e[13]||(e[13]=t("span",{class:"table_img"},[t("img",{src:Y,alt:"profile"})],-1)),r(" "+c(l),1)])]),_:1},8,["options"])):k("",!0),s.value.tabledata.length?(o(),i("span",{key:1,class:"titlelineicon",onClick:e[0]||(e[0]=l=>h.value.filter=!h.value.filter)},[d(j),e[14]||(e[14]=r(" Filters "))])):k("",!0),s.value.tabledata.length?(o(),i("span",se,[d(W),e[15]||(e[15]=r(" Delete "))])):k("",!0)]),t("div",oe,[s.value.tabledata.length&&s.value.tableGridStatus?(o(),i("i",{key:0,class:"fa-regular fa-rectangle-list",onClick:e[1]||(e[1]=l=>s.value.tableGridStatus=!s.value.tableGridStatus)})):k("",!0),s.value.tabledata.length&&!s.value.tableGridStatus?(o(),i("i",{key:1,class:"fa-solid fa-table-cells",onClick:e[2]||(e[2]=l=>s.value.tableGridStatus=!s.value.tableGridStatus)})):k("",!0),d(p,{class:"btn_primary me-2",onClick:e[3]||(e[3]=l=>D.value.modalStatus=!0)},{default:n(()=>e[17]||(e[17]=[r("Upload")])),_:1}),d(p,{class:"btn_primary",to:{name:"admin-add-product"}},{default:n(()=>e[18]||(e[18]=[r("Add Product")])),_:1})])]),t("div",ie,[d(_,{show:s.value.loader,rounded:"lg",opacity:"0.8",class:"loader_section","no-wrap":""},{overlay:n(()=>e[19]||(e[19]=[t("span",{class:"loadersdots"},null,-1)])),default:n(()=>[s.value.tabledata.length?(o(),i("div",ne,[s.value.tableGridStatus?(o(),x(b,{key:0,items:s.value.tabledata,fields:s.value.tablefield},{"head(select)":n(l=>[d(v,null,{default:n(()=>e[20]||(e[20]=[r("All")])),_:1})]),"cell(select)":n(l=>[d(v)]),"cell(catalog_image)":n(l=>[Array.isArray(I(l.item.uploadedImages))&&I(l.item.uploadedImages).length>0?(o(),i("img",{key:0,src:s.value.imageurl+l.item.product_id+"/productimages/original/"+I(l.item.uploadedImages)[0],alt:"Product Image",width:"100",height:"100",onClick:m=>E(l.item),style:{cursor:"pointer"}},null,8,de)):(o(),i("img",re))]),"cell(name)":n(l=>[t("div",{class:z(["name_badge",Q(l)])},[t("div",null,c(l.value),1),e[21]||(e[21]=r()),e[22]||(e[22]=t("span",{class:"on_board",title:"On Board"},null,-1))],2)]),"cell(created_at)":n(l=>[r(c(B(l.value)),1)]),"cell(actions)":n(l=>[t("div",ue,[t("div",ce,[t("ul",null,[t("li",{onClick:e[4]||(e[4]=m=>a.editItem(a.item))},"Edit"),t("li",{onClick:e[5]||(e[5]=m=>a.makeCopy(a.item))},"Make Copy"),t("li",{onClick:e[6]||(e[6]=m=>a.deleteItem(a.item))},"Delete")])])])]),_:1},8,["items","fields"])):(o(),i("div",_e,[t("div",me,[(o(!0),i(P,null,F(s.value.tabledata,(l,m)=>(o(),i("div",{key:m,class:z(["table_grid_list_item",{border_warning:l.priority==="warning",border_hot:l.priority==="hot"}])},[t("div",pe,[t("span",ge,"#"+c(l.product_id||"N/A"),1),t("span",ve,[t("p",null,[e[23]||(e[23]=t("span",null,"Request Date:",-1)),r(" "+c(B(l.created_at)),1)]),t("div",be,[t("i",{class:"fa-solid fa-ellipsis",onClick:e[7]||(e[7]=g=>O(g))}),t("div",fe,[t("ul",null,[t("li",{onClick:g=>a.editItem(l)},"Edit",8,ke),t("li",{onClick:g=>a.makeCopy(l)},"Make Copy",8,ye),t("li",{onClick:g=>a.mergeTicket(l)},"Merge Ticket",8,he),t("li",{onClick:g=>a.closeTicket(l)},"Close",8,Ce),t("li",{onClick:g=>a.deleteItem(l)},"Delete",8,we)])])])])]),t("div",Se,[t("h4",null,c(l.name||"Unknown"),1),t("p",null,c(l.description||"No description available"),1),e[24]||(e[24]=t("span",{class:"table_grid_sub_label"},"QTY",-1)),t("p",null,c(l.netQuantity||"N/A"),1)])],2))),128))])]))])):(o(),i("div",$e,e[25]||(e[25]=[t("div",null,[t("img",{src:q,alt:"no_ticket"}),t("p",null,"No Product Found"),t("span",null,"Currently, there are no Product in "),t("span",null,"the system. ")],-1)])))]),_:1},8,["show"])]),d(f,{modelValue:w.value,"onUpdate:modelValue":e[9]||(e[9]=l=>w.value=l),size:"lg","hide-footer":"",title:"Product Details"},{"modal-header":n(()=>[e[27]||(e[27]=t("h5",{class:"modal-title"},"Product Images",-1)),d(p,{variant:"danger",onClick:e[8]||(e[8]=l=>w.value=!1)},{default:n(()=>e[26]||(e[26]=[r("Close")])),_:1})]),default:n(()=>{var l;return[t("div",Ie,[t("div",De,[(o(!0),i(P,null,F($.value,(m,g)=>{var U;return o(),i("img",{key:g,src:s.value.imageurl+((U=M.value)==null?void 0:U.product_id)+"/productimages/original/"+m,width:"60",height:"60",class:"mb-2 border border-primary rounded",style:{cursor:"pointer"},onClick:qe=>S.value=m},null,8,Pe)}),128))]),t("div",Fe,[S.value?(o(),i("img",{key:0,src:s.value.imageurl+((l=M.value)==null?void 0:l.product_id)+"/productimages/original/"+S.value,width:"400",height:"400",class:"border rounded"},null,8,Me)):k("",!0)])])]}),_:1},8,["modelValue"]),d(f,{id:"upload-modal",modelValue:D.value.modalStatus,"onUpdate:modelValue":e[12]||(e[12]=l=>D.value.modalStatus=l),"hide-header":"","hide-footer":"","ok-title":"Upload",onOk:A,size:"md",centered:""},{default:n(()=>[t("div",Ne,[t("h5",null,[e[28]||(e[28]=r("Upload File Here ")),d(Z,{class:"close_icon_modal",onClick:e[10]||(e[10]=l=>D.value.modalStatus=!1)})]),t("form",null,[t("input",{type:"file",class:"file_input",ref:"fileInput",hidden:"",onChange:A},null,544),t("div",{class:"upload_icon",onClick:e[11]||(e[11]=l=>a.$refs.fileInput.click())},[t("span",Ve,[d(K)]),e[29]||(e[29]=t("p",null,[t("span",null,"Choose file"),r(" to Upload "),t("br"),r(" Xls, CSV")],-1))])]),N.value?(o(),i("section",Ae,[(o(!0),i(P,null,F(y.value,(l,m)=>(o(),i("div",Be,[d(T),t("div",Ue,[t("div",xe,[t("span",ze,c(l.name),1),t("span",Ge,c(l.loading)+"%",1)]),t("div",Te,[t("div",{class:"loading",style:R({width:l.loading+"%"})},null,4)])])]))),256))])):(o(),i("section",Ee,[(o(!0),i(P,null,F(V.value,(l,m)=>(o(),i("div",Le,[t("div",Oe,[d(T),t("div",Qe,[t("span",He,c(l.name),1),t("span",Ye,c(l.size),1)]),e[30]||(e[30]=t("div",{class:"loading_bar"},[t("div",{class:"loading",style:{}})],-1))])]))),256))]))])]),_:1},8,["modelValue"])])}}};export{et as default};
