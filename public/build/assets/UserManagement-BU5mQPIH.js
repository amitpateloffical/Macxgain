import{_ as xe,u as Ee,f as p,D as _,L as Pe,E as Ce,G as Ae,Z as Ne,c as u,o as c,b as s,h as g,i as b,j as v,v as h,W as C,t as r,l as $e,n as y,a as Ie,F as Me,r as je,w as D}from"./app-BFj7m03g.js";import{A as De}from"./AdminMobileNav-DI3t1v3n.js";const Re={class:"user-management-screen"},Se={class:"page-header"},Fe={class:"header-actions"},Le={class:"search-filters"},Ve={class:"search-box"},Te={class:"filter-options"},qe={class:"stats-grid"},Be={class:"stat-card"},ze={class:"stat-content"},Xe={class:"stat-number"},We={class:"stat-card"},Ge={class:"stat-content"},He={class:"stat-number"},Je={class:"stat-card"},Oe={class:"stat-content"},Ye={class:"stat-number"},Ke={class:"stat-card"},Ze={class:"stat-content"},Qe={class:"stat-number"},es={class:"users-container"},ss={class:"table-header"},as={class:"table-actions"},ts=["disabled"],os={key:0,class:"no-users"},ls={key:1,class:"no-users"},is={key:2,class:"no-users"},ns={key:3,class:"users-table"},rs={class:"col-user"},ds={class:"user-info"},us=["src","alt","onError","onLoad"],cs={class:"user-details"},vs={class:"user-name"},ps={class:"user-id"},ms={class:"col-email"},fs={class:"email-text"},gs={class:"col-phone"},ws={class:"phone-text"},bs={class:"col-role"},hs={class:"col-status"},_s={class:"col-joined"},ys={class:"date-text"},ks={class:"col-actions"},Us={class:"action-buttons"},xs=["onClick","disabled"],Es=["onClick"],Ps=["onClick"],Cs=["onClick"],As={key:4,class:"pagination"},Ns=["disabled"],$s=["disabled"],Is={class:"page-info"},Ms=["disabled"],js=["disabled"],Ds={class:"modal-body"},Rs={class:"form-row"},Ss={class:"form-group"},Fs={class:"form-group"},Ls={class:"form-row"},Vs={class:"form-group"},Ts={class:"form-group"},qs={class:"form-row"},Bs={class:"form-group"},zs={class:"form-row"},Xs={class:"form-group"},Ws={class:"form-group"},Gs={class:"form-row"},Hs={class:"form-group full-width"},Js={class:"profile-upload-container"},Os={key:0,class:"upload-preview"},Ys=["src"],Ks={class:"form-actions"},Zs=["disabled"],Qs={key:0},ea={class:"modal-header"},sa={class:"modal-body"},aa={class:"form-row"},ta={class:"form-group"},oa={class:"form-group"},la={class:"form-row"},ia={class:"form-group"},na={class:"form-group"},ra={class:"form-row"},da={class:"form-group"},ua={class:"form-group"},ca={class:"form-row"},va={class:"form-group full-width"},pa={class:"profile-upload-container"},ma={key:0,class:"upload-preview"},fa=["src"],ga={class:"modal-header"},wa={class:"modal-body"},ba={class:"user-details-view"},ha={class:"user-avatar-large"},_a=["src","alt"],ya={class:"user-info-grid"},ka={class:"info-row"},Ua={class:"info-value"},xa={class:"info-row"},Ea={class:"info-value"},Pa={class:"info-row"},Ca={class:"info-value"},Aa={class:"info-row"},Na={class:"info-value"},$a={class:"info-row"},Ia={class:"info-value password-value"},Ma={key:0,class:"password-text"},ja={key:1,class:"no-password"},Da={class:"info-row"},Ra={class:"info-value"},Sa={class:"info-row"},Fa={class:"info-value"},La={class:"info-row"},Va={class:"info-value"},Ta={class:"info-row"},qa={class:"info-value"},Ba={class:"info-row"},za={class:"info-value balance-value"},Xa={class:"bank-details-section"},Wa={class:"info-row"},Ga={class:"info-value"},Ha={class:"info-row"},Ja={class:"info-value"},Oa={class:"info-row"},Ya={class:"info-value"},Ka={class:"kyc-details-section"},Za={class:"info-row"},Qa={class:"info-value kyc-value"},et={class:"info-row"},st={class:"info-value kyc-value"},at={class:"info-row address-row"},tt={class:"info-value address-value"},ot={class:"kyc-images-section"},lt={class:"kyc-image-grid"},it={key:0,class:"kyc-image-item"},nt={class:"image-container"},rt=["src"],dt={key:1,class:"kyc-image-item"},ut={class:"image-container"},ct=["src"],vt={key:2,class:"kyc-image-item"},pt={class:"image-container"},mt=["src"],ft={key:0,class:"no-images-message"},gt={__name:"UserManagement",setup(wt){Ee();const R=p(!1),A=p(!1),N=p(!1),S=p(!1),k=p(""),U=p("all"),x=p("all"),m=p(1),q=p(10),F=p(!1),n=p({name:"",email:"",phone:"",role:"user",status:"active",password:"",confirmPassword:"",profile_image:null}),d=p({id:null,name:"",email:"",phone:"",role:"user",status:"active",newPassword:""}),l=p({}),f=p([]),E=p(!1),L=p(null),P=`${window.location.origin}/api`,H=async()=>{var t;try{E.value=!0,L.value=null;const e=localStorage.getItem("access_token");if(!e)throw new Error("No access token found. Please login again.");const o=await fetch(`${P}/users`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(o.status===401)throw new Error("Authentication failed. Please login again.");if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const a=await o.json();if(a.success&&a.data)console.log("Raw user data:",a.data),console.log("First user profile_image example:",(t=a.data[0])==null?void 0:t.profile_image),f.value=a.data.map(i=>{console.log(`Processing user: ${i.name}`),console.log(`User ${i.name} raw profile_image:`,i.profile_image),console.log(`User ${i.name} profile_image type:`,typeof i.profile_image);const w=B(i.profile_image);return console.log(`User ${i.name} final avatar URL:`,w),{id:i.id,name:i.name||"Unknown User",email:i.email,phone:i.phone||null,role:i.is_admin?"admin":"user",status:W(i.status)||"active",avatar:w,created_at:i.created_at,last_login:i.last_login_at||null,total_balance:0}});else throw new Error(a.message||"Failed to fetch users")}catch(e){console.error("Error fetching users:",e),L.value=e.message,f.value.length===0&&(f.value=[{id:1,name:"Kamlesh Patel",email:"kamlesh@example.com",phone:"+91 98765 43210",role:"admin",status:"active",avatar:"/build/assets/tableprofileimg-DaN7tIxX.png",created_at:"2024-01-01T10:00:00Z",last_login:"2024-01-15T14:30:00Z",total_balance:5e4}])}finally{E.value=!1}},$=_(()=>{let t=f.value;if(k.value){const e=k.value.toLowerCase();t=t.filter(o=>o.name.toLowerCase().includes(e)||o.email.toLowerCase().includes(e)||o.phone&&o.phone.includes(e))}return U.value!=="all"&&(t=t.filter(e=>e.status===U.value)),x.value!=="all"&&(t=t.filter(e=>e.role===x.value)),t}),J=_(()=>{const t=(m.value-1)*q.value,e=t+q.value;return $.value.slice(t,e)}),I=_(()=>Math.ceil($.value.length/q.value)),se=_(()=>f.value.length),ae=_(()=>f.value.filter(t=>t.status==="active").length),te=_(()=>f.value.filter(t=>t.role==="admin").length),oe=_(()=>{const t=new Date().getMonth(),e=new Date().getFullYear();return f.value.filter(o=>{const a=new Date(o.created_at);return a.getMonth()===t&&a.getFullYear()===e}).length}),M=()=>{R.value=!1,le()},j=()=>{A.value=!1,ie()},V=()=>{N.value=!1,l.value={}},le=()=>{n.value={name:"",email:"",phone:"",role:"user",status:"active",password:"",confirmPassword:"",profile_image:null}},ie=()=>{d.value={id:null,name:"",email:"",phone:"",role:"user",status:"active",newPassword:""}},ne=t=>{const e=t.target.files[0];if(e){if(e.size>2*1024*1024){alert("Profile image must be less than 2MB"),t.target.value="";return}if(!e.type.startsWith("image/")){alert("Please select a valid image file"),t.target.value="";return}n.value.profile_image=e}},re=t=>{const e=t.target.files[0];if(e){if(e.size>2*1024*1024){alert("Profile image must be less than 2MB"),t.target.value="";return}if(!e.type.startsWith("image/")){alert("Please select a valid image file"),t.target.value="";return}d.value.profile_image=e}},de=()=>{n.value.profile_image=null,document.getElementById("profile_image").value=""},ue=()=>{d.value.profile_image=null,document.getElementById("editProfileImage").value=""},O=t=>t?typeof t=="string"?t:URL.createObjectURL(t):"",B=t=>{if(console.log("getProfileImageUrl called with:",t),!t)return console.log("No profile image path, returning default"),"/build/assets/tableprofileimg-DaN7tIxX.png";if(t.startsWith("http"))return console.log("Profile image is already a full URL:",t),t;const e=`${window.location.origin}/storage/${t}`;return console.log("Constructed full URL:",e),e},ce=(t,e)=>{console.log(`Profile image failed to load for ${e}, creating initials fallback`),console.log("Failed image src:",t.target.src),t.target.style.display="none";const o=e.split(" ").map(i=>i[0]).join("").toUpperCase().substring(0,3),a=document.createElement("div");a.className="profile-initials-fallback",a.textContent=o,a.style.cssText=`
    width: 45px;
    height: 45px;
    border-radius: 50%;
    background: linear-gradient(135deg, #00ff80, #00cc66);
    color: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 14px;
    border: 3px solid #00ff80;
  `,t.target.parentNode.appendChild(a)},ve=(t,e)=>{console.log(`View user profile image failed to load for ${e}, creating initials fallback`),console.log("Failed image src:",t.target.src),t.target.style.display="none";const o=e.split(" ").map(i=>i[0]).join("").toUpperCase().substring(0,3),a=document.createElement("div");a.className="profile-initials-fallback-large",a.textContent=o,a.style.cssText=`
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: linear-gradient(135deg, #00ff80, #00cc66);
    color: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 36px;
    border: 4px solid #00ff80;
    box-shadow: 0 4px 20px rgba(0, 255, 128, 0.3);
  `,t.target.parentNode.appendChild(a)},pe=async()=>{try{if(n.value.password!==n.value.confirmPassword){alert("Password and Confirm Password do not match!");return}if(n.value.password.length<6){alert("Password must be at least 6 characters long!");return}if(!n.value.name||!n.value.email||!n.value.phone||!n.value.role||!n.value.status){alert("Please fill in all required fields!");return}F.value=!0;const t=localStorage.getItem("access_token");if(!t)throw new Error("No access token found. Please login again.");const e=new FormData;e.append("name",n.value.name),e.append("email",n.value.email),e.append("phone",n.value.phone),e.append("password",n.value.password),e.append("password_confirmation",n.value.confirmPassword),e.append("is_admin",n.value.role==="admin"?1:0),e.append("status",Z(n.value.status)),n.value.profile_image&&e.append("profile_image",n.value.profile_image);const o=await fetch(`${P}/users`,{method:"POST",headers:{Authorization:`Bearer ${t}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:e});if(o.status===401)throw new Error("Authentication failed. Please login again.");if(!o.ok){const i=await o.json();throw new Error(i.message||"Failed to create user")}const a=await o.json();if(a.success&&a.data){const i={id:a.data.id,name:a.data.name||"Unknown User",email:a.data.email,phone:a.data.phone||null,role:a.data.is_admin?"admin":"user",status:W(a.data.status)||"active",avatar:B(a.data.profile_image),created_at:a.data.created_at,last_login:null,total_balance:0};f.value.unshift(i),M(),alert("User created successfully!")}else throw new Error(a.message||"Failed to create user")}catch(t){console.error("Error creating user:",t),alert(`Error creating user: ${t.message}`)}finally{F.value=!1}},me=async t=>{S.value=!0;try{const e=localStorage.getItem("access_token");if(!e)throw new Error("No access token found. Please login again.");const o=await fetch(`${P}/users/${t.id}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json",Accept:"application/json"}});if(!o.ok)throw new Error("Failed to fetch user details");const a=await o.json();if(a.success&&a.data)l.value={...a.data,avatar:B(a.data.profile_image)},console.log("Viewing user data:",l.value),console.log("Profile image path:",a.data.profile_image),console.log("Avatar URL:",l.value.avatar),N.value=!0;else throw new Error(a.message||"Failed to fetch user details")}catch(e){console.error("Error fetching user details:",e),alert(`Error fetching user details: ${e.message}`),l.value=t,N.value=!0}finally{S.value=!1}},fe=t=>{d.value={id:t.id,name:t.name,email:t.email,phone:t.phone,role:t.role,status:t.status,newPassword:""},A.value=!0},ge=()=>{d.value={id:l.value.id,name:l.value.name,email:l.value.email,phone:l.value.phone,role:l.value.role,status:l.value.status,newPassword:""},A.value=!0},we=async(t,e)=>{try{const o=localStorage.getItem("access_token");if(!o)throw new Error("No access token found. Please login again.");const i={active:"A",inactive:"I",suspended:"D"}[e]||"A",w=await fetch(`${P}/users/${t.id}/status`,{method:"PATCH",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({status:i})});if(w.status===401)throw new Error("Authentication failed. Please login again.");if(!w.ok){const G=await w.json();throw new Error(G.message||"Failed to update user status")}const ee=await w.json();if(ee.success){t.status=e;const G=e==="suspended"?"suspended":"activated";alert(`User ${t.name} has been ${G}!`)}else throw new Error(ee.message||"Failed to update user status")}catch(o){console.error("Error updating user status:",o),alert(`Error updating user status: ${o.message}`)}},be=async()=>{try{const t=localStorage.getItem("access_token");if(!t)throw new Error("No access token found. Please login again.");const e={name:d.value.name,email:d.value.email,phone:d.value.phone,is_admin:d.value.role==="admin"?1:0,status:Z(d.value.status)};d.value.newPassword&&(e.password=d.value.newPassword,e.password_confirmation=d.value.newPassword);const o=await fetch(`${P}/users/${d.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(e)});if(o.status===401)throw new Error("Authentication failed. Please login again.");if(!o.ok){const i=await o.json();throw new Error(i.message||"Failed to update user")}const a=await o.json();if(a.success&&a.data){const i=f.value.findIndex(w=>w.id===d.value.id);i!==-1&&(f.value[i]={...f.value[i],name:a.data.name,email:a.data.email,phone:a.data.phone,role:a.data.is_admin?"admin":"user",status:W(a.data.status)}),j(),alert("User updated successfully!")}else throw new Error(a.message||"Failed to update user")}catch(t){console.error("Error updating user:",t),alert(`Error updating user: ${t.message}`)}},he=async t=>{try{if(confirm(`Are you sure you want to delete user: ${t.name}?`)){const e=localStorage.getItem("access_token");if(!e)throw new Error("No access token found");const o=await fetch(`${P}/users/${t.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(o.status===401)throw new Error("Authentication failed. Please login again.");if(!o.ok){const i=await o.json();throw new Error(i.message||"Failed to delete user")}const a=await o.json();if(a.success){const i=f.value.findIndex(w=>w.id===t.id);i>-1&&(f.value.splice(i,1),alert("User deleted successfully!"),J.value.length===0&&m.value>1&&m.value--)}else throw new Error(a.message||"Failed to delete user")}}catch(e){console.error("Error deleting user:",e),alert(`Error deleting user: ${e.message}`)}},_e=()=>{k.value="",U.value="all",x.value="all",m.value=1},ye=()=>{const t=ke(),e=new Blob([t],{type:"text/csv"}),o=window.URL.createObjectURL(e),a=document.createElement("a");a.href=o,a.download="users_export.csv",a.click(),window.URL.revokeObjectURL(o)},ke=()=>{const t=["ID","Name","Email","Phone","Role","Status","Joined Date"],e=$.value.map(o=>[o.id,o.name,o.email,o.phone||"N/A",o.role,o.status,z(o.created_at)]);return[t,...e].map(o=>o.join(",")).join(`
`)},Y=t=>t==="admin"?"role-admin":"role-user",K=t=>({active:"status-active",inactive:"status-inactive",suspended:"status-suspended"})[t]||"status-active",z=t=>t?new Date(t).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",Ue=t=>t?t.replace(/(\d{4})(\d{4})(\d{4})/,"$1 $2 $3"):"Not provided",T=t=>t?t.startsWith("http")?t:`${window.location.origin}/storage/${t}`:"",X=(t,e)=>{const o=T(t);if(o){const a=document.createElement("div");a.className="image-view-modal",a.innerHTML=`
      <div class="image-view-overlay" onclick="this.parentElement.remove()">
        <div class="image-view-content" onclick="event.stopPropagation()">
          <div class="image-view-header">
            <h4>${e}</h4>
            <button class="close-btn" onclick="this.closest('.image-view-modal').remove()">&times;</button>
          </div>
          <div class="image-view-body">
            <img src="${o}" alt="${e}" class="full-size-image" />
          </div>
          <div class="image-view-footer">
            <a href="${o}" download="${e}.jpg" class="btn-download">
              <i class="bi bi-download"></i> Download
            </a>
          </div>
        </div>
      </div>
    `;const i=document.createElement("style");i.textContent=`
      .image-view-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 9999;
      }
      .image-view-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }
      .image-view-content {
        background: #1a1a2e;
        border-radius: 12px;
        max-width: 90vw;
        max-height: 90vh;
        overflow: hidden;
        border: 1px solid rgba(0, 255, 128, 0.3);
      }
      .image-view-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }
      .image-view-header h4 {
        margin: 0;
        color: #00ff80;
      }
      .close-btn {
        background: none;
        border: none;
        color: white;
        font-size: 24px;
        cursor: pointer;
        padding: 0;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: background 0.3s;
      }
      .close-btn:hover {
        background: rgba(255, 255, 255, 0.1);
      }
      .image-view-body {
        padding: 20px;
        text-align: center;
      }
      .full-size-image {
        max-width: 100%;
        max-height: 60vh;
        object-fit: contain;
        border-radius: 8px;
      }
      .image-view-footer {
        padding: 16px 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        text-align: center;
      }
      .btn-download {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: linear-gradient(135deg, #00ff80, #00cc66);
        color: #000;
        text-decoration: none;
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s;
      }
      .btn-download:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 255, 128, 0.3);
        color: #000;
      }
    `,document.head.appendChild(i),document.body.appendChild(a)}},Z=t=>({active:"A",inactive:"I",suspended:"D"})[t]||"A",W=t=>({A:"active",I:"inactive",D:"suspended"})[t]||"active";Pe([k,U,x],()=>{m.value=1});const Q=t=>{t.key==="Escape"&&(R.value?M():A.value?j():N.value&&V())};return Ce(()=>{document.addEventListener("keydown",Q),H()}),Ae(()=>{document.removeEventListener("keydown",Q)}),(t,e)=>{const o=Ne('else"');return c(),u("div",Re,[s("div",Se,[e[30]||(e[30]=s("div",{class:"header-content"},[s("h1",{class:"page-title"},"üë• User Management"),s("p",{class:"page-subtitle"},"Manage all registered users and their accounts")],-1)),s("div",Fe,[s("button",{class:"btn-primary",onClick:e[0]||(e[0]=a=>R.value=!0)},e[29]||(e[29]=[s("i",{class:"fa-solid fa-user-plus"},null,-1),b(" Add User ")]))])]),s("div",Le,[s("div",Ve,[e[31]||(e[31]=s("i",{class:"fa-solid fa-search search-icon"},null,-1)),v(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>k.value=a),placeholder:"Search users by name, email, or phone...",class:"search-input"},null,512),[[h,k.value]])]),s("div",Te,[v(s("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>U.value=a),class:"filter-select"},e[32]||(e[32]=[s("option",{value:"all"},"All Users",-1),s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1),s("option",{value:"suspended"},"Suspended",-1)]),512),[[C,U.value]]),v(s("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>x.value=a),class:"filter-select"},e[33]||(e[33]=[s("option",{value:"all"},"All Roles",-1),s("option",{value:"admin"},"Admin",-1),s("option",{value:"user"},"User",-1)]),512),[[C,x.value]]),s("button",{class:"btn-secondary",onClick:_e},e[34]||(e[34]=[s("i",{class:"fa-solid fa-rotate"},null,-1),b(" Reset ")]))])]),s("div",qe,[s("div",Be,[e[36]||(e[36]=s("div",{class:"stat-icon"},"üë•",-1)),s("div",ze,[s("h3",Xe,r(se.value),1),e[35]||(e[35]=s("p",{class:"stat-label"},"Total Users",-1))])]),s("div",We,[e[38]||(e[38]=s("div",{class:"stat-icon"},"‚úÖ",-1)),s("div",Ge,[s("h3",He,r(ae.value),1),e[37]||(e[37]=s("p",{class:"stat-label"},"Active Users",-1))])]),s("div",Je,[e[40]||(e[40]=s("div",{class:"stat-icon"},"üëë",-1)),s("div",Oe,[s("h3",Ye,r(te.value),1),e[39]||(e[39]=s("p",{class:"stat-label"},"Admin Users",-1))])]),s("div",Ke,[e[42]||(e[42]=s("div",{class:"stat-icon"},"üìÖ",-1)),s("div",Ze,[s("h3",Qe,r(oe.value),1),e[41]||(e[41]=s("p",{class:"stat-label"},"New This Month",-1))])])]),s("div",es,[$e(De),s("div",ss,[s("h3",null,"Users List ("+r($.value.length)+")",1),s("div",as,[s("button",{class:"btn-refresh",onClick:H,disabled:E.value},[s("i",{class:y(["fa-solid fa-rotate",{"fa-spin":E.value}])},null,2),b(" "+r(E.value?"Loading...":"Refresh"),1)],8,ts),s("button",{class:"btn-export",onClick:ye},e[43]||(e[43]=[s("i",{class:"fa-solid fa-download"},null,-1),b(" Export ")]))])]),E.value?(c(),u("div",os,e[44]||(e[44]=[s("div",{class:"no-users-icon"},"üîÑ",-1),s("h3",null,"Loading users...",-1),s("p",null,"Please wait while we fetch the data.",-1)]))):L.value?(c(),u("div",ls,[e[45]||(e[45]=s("div",{class:"no-users-icon"},"‚ùå",-1)),s("h3",null,"Error: "+r(L.value),1),e[46]||(e[46]=s("p",null,"Failed to load users. Please try again later.",-1))])):$.value.length===0?(c(),u("div",is,e[47]||(e[47]=[s("div",{class:"no-users-icon"},"üë•",-1),s("h3",null,"No users found",-1),s("p",null,"Try adjusting your search or filters",-1)]))):(c(),u("div",ns,[e[51]||(e[51]=Ie('<div class="table-row header-row" data-v-47501b93><div class="col-user" data-v-47501b93>User</div><div class="col-email" data-v-47501b93>Email</div><div class="col-phone" data-v-47501b93>Phone</div><div class="col-role" data-v-47501b93>Role</div><div class="col-status" data-v-47501b93>Status</div><div class="col-joined" data-v-47501b93>Joined</div><div class="col-actions" data-v-47501b93>Actions</div></div>',1)),(c(!0),u(Me,null,je(J.value,a=>(c(),u("div",{key:a.id,class:y(["table-row user-row",{"user-inactive":a.status==="inactive","user-suspended":a.status==="suspended"}])},[s("div",rs,[s("div",ds,[s("img",{src:a.avatar,alt:a.name,class:"user-avatar",onError:i=>ce(i,a.name),onLoad:()=>console.log(`Profile image loaded successfully for ${a.name}:`,a.avatar)},null,40,us),s("div",cs,[s("h4",vs,r(a.name),1),s("p",ps,"ID: "+r(a.id),1)])])]),s("div",ms,[s("span",fs,r(a.email),1)]),s("div",gs,[s("span",ws,r(a.phone||"N/A"),1)]),s("div",bs,[s("span",{class:y(["role-badge",Y(a.role)])},r(a.role),3)]),s("div",hs,[s("span",{class:y(["status-badge",K(a.status)])},r(a.status),3)]),s("div",_s,[s("span",ys,r(z(a.created_at)),1)]),s("div",ks,[s("div",Us,[s("button",{class:"btn-action btn-view",onClick:i=>me(a),title:"View Details",disabled:S.value},[s("i",{class:y(["fa-solid fa-eye",{"fa-spin":S.value}])},null,2)],8,xs),s("button",{class:"btn-action btn-edit",onClick:i=>fe(a),title:"Edit User"},e[48]||(e[48]=[s("i",{class:"fa-solid fa-edit"},null,-1)]),8,Es),a.status==="suspended"?(c(),u("button",{key:0,class:"btn-action btn-activate",onClick:i=>we(a,"active"),title:"Activate User"},e[49]||(e[49]=[s("i",{class:"fa-solid fa-play"},null,-1)]),8,Ps)):g("",!0),s("button",{class:"btn-action btn-delete",onClick:i=>he(a),title:"Delete User"},e[50]||(e[50]=[s("i",{class:"fa-solid fa-trash"},null,-1)]),8,Cs)])])],2))),128))])),I.value>1?(c(),u("div",As,[s("button",{class:"btn-page",disabled:m.value===1,onClick:e[4]||(e[4]=a=>m.value=1)},e[52]||(e[52]=[s("i",{class:"fa-solid fa-angles-left"},null,-1)]),8,Ns),s("button",{class:"btn-page",disabled:m.value===1,onClick:e[5]||(e[5]=a=>m.value--)},e[53]||(e[53]=[s("i",{class:"fa-solid fa-angle-left"},null,-1)]),8,$s),s("span",Is," Page "+r(m.value)+" of "+r(I.value),1),s("button",{class:"btn-page",disabled:m.value===I.value,onClick:e[6]||(e[6]=a=>m.value++)},e[54]||(e[54]=[s("i",{class:"fa-solid fa-angle-right"},null,-1)]),8,Ms),s("button",{class:"btn-page",disabled:m.value===I.value,onClick:e[7]||(e[7]=a=>m.value=I.value)},e[55]||(e[55]=[s("i",{class:"fa-solid fa-angles-right"},null,-1)]),8,js)])):g("",!0)]),R.value?(c(),u("div",{key:0,class:"modal-overlay",onClick:M},[s("div",{class:"modal-content",onClick:e[15]||(e[15]=D(()=>{},["stop"])),ref:"addUserModalRef"},[s("div",{class:"modal-header"},[e[56]||(e[56]=s("h3",null,"Add New User",-1)),s("button",{class:"close-btn",onClick:M},"√ó")]),s("div",Ds,[s("form",{onSubmit:D(pe,["prevent"]),class:"user-form"},[s("div",Rs,[s("div",Ss,[e[57]||(e[57]=s("label",{for:"name"},"Full Name *",-1)),v(s("input",{type:"text",id:"name","onUpdate:modelValue":e[8]||(e[8]=a=>n.value.name=a),required:"",class:"form-control",placeholder:"Enter full name"},null,512),[[h,n.value.name]])]),s("div",Fs,[e[58]||(e[58]=s("label",{for:"email"},"Email Address *",-1)),v(s("input",{type:"email",id:"email","onUpdate:modelValue":e[9]||(e[9]=a=>n.value.email=a),required:"",class:"form-control",placeholder:"Enter email address"},null,512),[[h,n.value.email]])])]),s("div",Ls,[s("div",Vs,[e[59]||(e[59]=s("label",{for:"phone"},"Phone Number *",-1)),v(s("input",{type:"tel",id:"phone","onUpdate:modelValue":e[10]||(e[10]=a=>n.value.phone=a),required:"",class:"form-control",placeholder:"Enter phone number"},null,512),[[h,n.value.phone]])]),s("div",Ts,[e[61]||(e[61]=s("label",{for:"role"},"User Role *",-1)),v(s("select",{id:"role","onUpdate:modelValue":e[11]||(e[11]=a=>n.value.role=a),required:"",class:"form-control"},e[60]||(e[60]=[s("option",{value:""},"Select Role",-1),s("option",{value:"user"},"üë§ User",-1),s("option",{value:"admin"},"üëë Admin",-1)]),512),[[C,n.value.role]])])]),s("div",qs,[s("div",Bs,[e[63]||(e[63]=s("label",{for:"status"},"Account Status *",-1)),v(s("select",{id:"status","onUpdate:modelValue":e[12]||(e[12]=a=>n.value.status=a),required:"",class:"form-control"},e[62]||(e[62]=[s("option",{value:""},"Select Status",-1),s("option",{value:"active"},"‚úÖ Active",-1),s("option",{value:"inactive"},"‚è∏Ô∏è Inactive",-1),s("option",{value:"suspended"},"üö´ Suspended",-1)]),512),[[C,n.value.status]])])]),s("div",zs,[s("div",Xs,[e[64]||(e[64]=s("label",{for:"password"},"Password *",-1)),v(s("input",{type:"password",id:"password","onUpdate:modelValue":e[13]||(e[13]=a=>n.value.password=a),required:"",class:"form-control",placeholder:"Enter password (min 6 characters)",minlength:"6"},null,512),[[h,n.value.password]]),e[65]||(e[65]=s("small",{class:"form-help"},"Password must be at least 6 characters long",-1))]),s("div",Ws,[e[66]||(e[66]=s("label",{for:"confirmPassword"},"Confirm Password *",-1)),v(s("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[14]||(e[14]=a=>n.value.confirmPassword=a),required:"",class:"form-control",placeholder:"Confirm your password",minlength:"6"},null,512),[[h,n.value.confirmPassword]])])]),s("div",Gs,[s("div",Hs,[e[68]||(e[68]=s("label",{for:"profile_image"},[s("i",{class:"fa-solid fa-camera me-2"}),b(" Profile Image ")],-1)),s("div",Js,[s("input",{type:"file",id:"profile_image",onChange:ne,accept:"image/*",class:"form-control file-input"},null,32),n.value.profile_image?(c(),u("div",Os,[s("img",{src:O(n.value.profile_image),alt:"Preview",class:"preview-image"},null,8,Ys),s("button",{type:"button",onClick:de,class:"remove-image-btn",title:"Remove Image"},e[67]||(e[67]=[s("i",{class:"fa-solid fa-times"},null,-1)]))])):g("",!0)]),e[69]||(e[69]=s("small",{class:"form-help"},[s("i",{class:"fa-solid fa-info-circle me-1"}),b(" Upload profile picture (JPG, PNG, GIF - Max 2MB) ")],-1))])]),s("div",Ks,[s("button",{type:"button",class:"btn-secondary",onClick:M},"Cancel"),s("button",{type:"submit",class:"btn-primary",disabled:F.value},[F.value?(c(),u("span",Qs,e[70]||(e[70]=[s("i",{class:"fa-solid fa-spinner fa-spin"},null,-1),b(" Creating User... ")]))):g("",!0),v((c(),u("span",null,e[71]||(e[71]=[s("i",{class:"fa-solid fa-user-plus"},null,-1),b(" Add User ")]))),[[o]])],8,Zs)])],32)])],512)])):g("",!0),A.value?(c(),u("div",{key:1,class:"modal-overlay",onClick:j},[s("div",{class:"modal-content",onClick:e[22]||(e[22]=D(()=>{},["stop"])),ref:"editUserModalRef"},[s("div",ea,[s("h3",null,"Edit User: "+r(d.value.name),1),s("button",{class:"close-btn",onClick:j},"√ó")]),s("div",sa,[s("form",{onSubmit:D(be,["prevent"]),class:"user-form"},[s("div",aa,[s("div",ta,[e[72]||(e[72]=s("label",{for:"editName"},"Full Name",-1)),v(s("input",{type:"text",id:"editName","onUpdate:modelValue":e[16]||(e[16]=a=>d.value.name=a),required:"",class:"form-control",placeholder:"Enter full name"},null,512),[[h,d.value.name]])]),s("div",oa,[e[73]||(e[73]=s("label",{for:"editEmail"},"Email",-1)),v(s("input",{type:"email",id:"editEmail","onUpdate:modelValue":e[17]||(e[17]=a=>d.value.email=a),required:"",class:"form-control",placeholder:"Enter email address"},null,512),[[h,d.value.email]])])]),s("div",la,[s("div",ia,[e[74]||(e[74]=s("label",{for:"editPhone"},"Phone",-1)),v(s("input",{type:"tel",id:"editPhone","onUpdate:modelValue":e[18]||(e[18]=a=>d.value.phone=a),class:"form-control",placeholder:"Enter phone number"},null,512),[[h,d.value.phone]])]),s("div",na,[e[76]||(e[76]=s("label",{for:"editRole"},"Role",-1)),v(s("select",{id:"editRole","onUpdate:modelValue":e[19]||(e[19]=a=>d.value.role=a),required:"",class:"form-control"},e[75]||(e[75]=[s("option",{value:"user"},"User",-1),s("option",{value:"admin"},"Admin",-1)]),512),[[C,d.value.role]])])]),s("div",ra,[s("div",da,[e[78]||(e[78]=s("label",{for:"editStatus"},"Status",-1)),v(s("select",{id:"editStatus","onUpdate:modelValue":e[20]||(e[20]=a=>d.value.status=a),required:"",class:"form-control"},e[77]||(e[77]=[s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1),s("option",{value:"suspended"},"Suspended",-1)]),512),[[C,d.value.status]])]),s("div",ua,[e[79]||(e[79]=s("label",{for:"editPassword"},"New Password (Optional)",-1)),v(s("input",{type:"password",id:"editPassword","onUpdate:modelValue":e[21]||(e[21]=a=>d.value.newPassword=a),class:"form-control",placeholder:"Leave blank to keep current password"},null,512),[[h,d.value.newPassword]])])]),s("div",ca,[s("div",va,[e[81]||(e[81]=s("label",{for:"editProfileImage"},[s("i",{class:"fa-solid fa-camera me-2"}),b(" Profile Image ")],-1)),s("div",pa,[s("input",{type:"file",id:"editProfileImage",onChange:re,accept:"image/*",class:"form-control file-input"},null,32),d.value.profile_image?(c(),u("div",ma,[s("img",{src:O(d.value.profile_image),alt:"Preview",class:"preview-image"},null,8,fa),s("button",{type:"button",onClick:ue,class:"remove-image-btn",title:"Remove Image"},e[80]||(e[80]=[s("i",{class:"fa-solid fa-times"},null,-1)]))])):g("",!0)]),e[82]||(e[82]=s("small",{class:"form-help"},[s("i",{class:"fa-solid fa-info-circle me-1"}),b(" Upload new profile picture (JPG, PNG, GIF - Max 2MB) ")],-1))])]),s("div",{class:"form-actions"},[s("button",{type:"button",class:"btn-secondary",onClick:j},"Cancel"),e[83]||(e[83]=s("button",{type:"submit",class:"btn-primary"},"Update User",-1))])],32)])],512)])):g("",!0),N.value?(c(),u("div",{key:2,class:"modal-overlay",onClick:V},[s("div",{class:"modal-content",onClick:e[28]||(e[28]=D(()=>{},["stop"]))},[s("div",ga,[s("h3",null,"User Details: "+r(l.value.name),1),s("button",{class:"close-btn",onClick:V},"√ó")]),s("div",wa,[s("div",ba,[s("div",ha,[s("img",{src:l.value.avatar,alt:l.value.name,onError:e[23]||(e[23]=a=>ve(a,l.value.name)),onLoad:e[24]||(e[24]=()=>console.log("View user profile image loaded successfully:",l.value.avatar))},null,40,_a)]),s("div",ya,[s("div",ka,[e[84]||(e[84]=s("span",{class:"info-label"},"ID:",-1)),s("span",Ua,r(l.value.id),1)]),s("div",xa,[e[85]||(e[85]=s("span",{class:"info-label"},"Name:",-1)),s("span",Ea,r(l.value.name),1)]),s("div",Pa,[e[86]||(e[86]=s("span",{class:"info-label"},"Email:",-1)),s("span",Ca,r(l.value.email),1)]),s("div",Aa,[e[87]||(e[87]=s("span",{class:"info-label"},"Phone:",-1)),s("span",Na,r(l.value.phone||"N/A"),1)]),s("div",$a,[e[88]||(e[88]=s("span",{class:"info-label"},"Password:",-1)),s("span",Ia,[l.value.password?(c(),u("span",Ma,r(l.value.password),1)):(c(),u("span",ja,"Not available"))])]),s("div",Da,[e[89]||(e[89]=s("span",{class:"info-label"},"Role:",-1)),s("span",Ra,[s("span",{class:y(["role-badge",Y(l.value.role)])},r(l.value.role),3)])]),s("div",Sa,[e[90]||(e[90]=s("span",{class:"info-label"},"Status:",-1)),s("span",Fa,[s("span",{class:y(["status-badge",K(l.value.status)])},r(l.value.status),3)])]),s("div",La,[e[91]||(e[91]=s("span",{class:"info-label"},"Joined:",-1)),s("span",Va,r(z(l.value.created_at)),1)]),s("div",Ta,[e[92]||(e[92]=s("span",{class:"info-label"},"Last Login:",-1)),s("span",qa,r(l.value.last_login||"Never"),1)]),s("div",Ba,[e[93]||(e[93]=s("span",{class:"info-label"},"Total Balance:",-1)),s("span",za,"‚Çπ"+r(l.value.total_balance||"0.00"),1)]),s("div",Xa,[e[97]||(e[97]=s("h4",{class:"section-title"},"üè¶ Bank Details",-1)),s("div",Wa,[e[94]||(e[94]=s("span",{class:"info-label"},"Bank Name:",-1)),s("span",Ga,r(l.value.bank_name||"Not provided"),1)]),s("div",Ha,[e[95]||(e[95]=s("span",{class:"info-label"},"Account Number:",-1)),s("span",Ja,r(l.value.account_no||"Not provided"),1)]),s("div",Oa,[e[96]||(e[96]=s("span",{class:"info-label"},"IFSC Code:",-1)),s("span",Ya,r(l.value.ifsc_code||"Not provided"),1)])]),s("div",Ka,[e[106]||(e[106]=s("h4",{class:"section-title"},"üìã KYC Details",-1)),s("div",Za,[e[98]||(e[98]=s("span",{class:"info-label"},"Aadhar Number:",-1)),s("span",Qa,r(l.value.aadhar_number?Ue(l.value.aadhar_number):"Not provided"),1)]),s("div",et,[e[99]||(e[99]=s("span",{class:"info-label"},"PAN Card Number:",-1)),s("span",st,r(l.value.pan_number||"Not provided"),1)]),s("div",at,[e[100]||(e[100]=s("span",{class:"info-label"},"Address:",-1)),s("span",tt,r(l.value.address||"Not provided"),1)]),s("div",ot,[e[105]||(e[105]=s("h5",{class:"sub-section-title"},"üì∏ Document Images",-1)),s("div",lt,[l.value.aadhar_front_image?(c(),u("div",it,[e[101]||(e[101]=s("div",{class:"image-label"},"Aadhar Front",-1)),s("div",nt,[s("img",{src:T(l.value.aadhar_front_image),alt:"Aadhar Front",class:"kyc-document-image",onClick:e[25]||(e[25]=a=>X(l.value.aadhar_front_image,"Aadhar Front"))},null,8,rt)])])):g("",!0),l.value.aadhar_back_image?(c(),u("div",dt,[e[102]||(e[102]=s("div",{class:"image-label"},"Aadhar Back",-1)),s("div",ut,[s("img",{src:T(l.value.aadhar_back_image),alt:"Aadhar Back",class:"kyc-document-image",onClick:e[26]||(e[26]=a=>X(l.value.aadhar_back_image,"Aadhar Back"))},null,8,ct)])])):g("",!0),l.value.pan_card_image?(c(),u("div",vt,[e[103]||(e[103]=s("div",{class:"image-label"},"PAN Card",-1)),s("div",pt,[s("img",{src:T(l.value.pan_card_image),alt:"PAN Card",class:"kyc-document-image",onClick:e[27]||(e[27]=a=>X(l.value.pan_card_image,"PAN Card"))},null,8,mt)])])):g("",!0)]),!l.value.aadhar_front_image&&!l.value.aadhar_back_image&&!l.value.pan_card_image?(c(),u("div",ft,e[104]||(e[104]=[s("i",{class:"bi bi-image text-muted"},null,-1),s("span",{class:"text-muted"},"No KYC document images uploaded yet",-1)]))):g("",!0)])])])]),s("div",{class:"modal-actions"},[s("button",{class:"btn-secondary",onClick:V},"Close"),s("button",{class:"btn-primary",onClick:ge},"Edit User")])])])])):g("",!0)])}}},_t=xe(gt,[["__scopeId","data-v-47501b93"]]);export{_t as default};
