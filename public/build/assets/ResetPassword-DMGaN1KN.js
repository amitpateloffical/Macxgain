import{_ as E,a as p,c as T,o as M,b as m,i,k as d,f as h,w as q,n as z,t as N,r as f,u as B,z as x,l as R}from"./app-CKEtSxiX.js";import{g as A,c as F,a as V}from"./index.esm-xzvIXNkb.js";import{u as j}from"./index-BDYEGvFS.js";var O=/^(attrs|props|on|nativeOn|class|style|hook)$/,J=function(e){return e.reduce(function(s,t){var r,n,o,l,c;for(o in t)if(r=s[o],n=t[o],r&&O.test(o))if(o==="class"&&(typeof r=="string"&&(c=r,s[o]=r={},r[c]=!0),typeof n=="string"&&(c=n,t[o]=n={},n[c]=!0)),o==="on"||o==="nativeOn"||o==="hook")for(l in n)r[l]=U(r[l],n[l]);else if(Array.isArray(r))s[o]=r.concat(n);else if(Array.isArray(n))s[o]=[r].concat(n);else for(l in n)r[l]=n[l];else s[o]=t[o];return s},{})};function U(a,e){return function(){a&&a.apply(this,arguments),e&&e.apply(this,arguments)}}const v=A(J);var k={name:"EyeOffIcon",props:{size:{type:String,default:"24",validator:function(e){return!isNaN(e)||e.length>=2&&!isNaN(e.slice(0,e.length-1))&&e.slice(-1)==="x"}}},functional:!0,render:function(e,s){var t=s.props.size.slice(-1)==="x"?s.props.size.slice(0,s.props.size.length-1)+"em":parseInt(s.props.size)+"px",r=s.data.attrs||{};return r.width=r.width||t,r.height=r.height||t,s.data.attrs=r,e("svg",v([{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},class:"feather feather-eye-off"},s.data]),[e("path",{attrs:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}}),e("line",{attrs:{x1:"1",y1:"1",x2:"23",y2:"23"}})])}},P={name:"EyeIcon",props:{size:{type:String,default:"24",validator:function(e){return!isNaN(e)||e.length>=2&&!isNaN(e.slice(0,e.length-1))&&e.slice(-1)==="x"}}},functional:!0,render:function(e,s){var t=s.props.size.slice(-1)==="x"?s.props.size.slice(0,s.props.size.length-1)+"em":parseInt(s.props.size)+"px",r=s.data.attrs||{};return r.width=r.width||t,r.height=r.height||t,s.data.attrs=r,e("svg",v([{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},class:"feather feather-eye"},s.data]),[e("path",{attrs:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}}),e("circle",{attrs:{cx:"12",cy:"12",r:"3"}})])}},D={name:"LockIcon",props:{size:{type:String,default:"24",validator:function(e){return!isNaN(e)||e.length>=2&&!isNaN(e.slice(0,e.length-1))&&e.slice(-1)==="x"}}},functional:!0,render:function(e,s){var t=s.props.size.slice(-1)==="x"?s.props.size.slice(0,s.props.size.length-1)+"em":parseInt(s.props.size)+"px",r=s.data.attrs||{};return r.width=r.width||t,r.height=r.height||t,s.data.attrs=r,e("svg",v([{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},class:"feather feather-lock"},s.data]),[e("rect",{attrs:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}}),e("path",{attrs:{d:"M7 11V7a5 5 0 0 1 10 0v4"}})])}},H={name:"MailIcon",props:{size:{type:String,default:"24",validator:function(e){return!isNaN(e)||e.length>=2&&!isNaN(e.slice(0,e.length-1))&&e.slice(-1)==="x"}}},functional:!0,render:function(e,s){var t=s.props.size.slice(-1)==="x"?s.props.size.slice(0,s.props.size.length-1)+"em":parseInt(s.props.size)+"px",r=s.data.attrs||{};return r.width=r.width||t,r.height=r.height||t,s.data.attrs=r,e("svg",v([{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},class:"feather feather-mail"},s.data]),[e("path",{attrs:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}}),e("polyline",{attrs:{points:"22,6 12,13 2,6"}})])}};const L={components:{MailIcon:H,LockIcon:D,EyeIcon:P,EyeOffIcon:k},setup(){const a=f(""),e=f(""),s=f(!1),t=f({}),r=B(),n=j(),o=f("password"),l=f("password");return{password:a,cPassword:e,isSubmitting:s,errors:t,handleSubmit:async()=>{s.value=!0;try{await F().shape({password:V().required("Password is required").min(8,"Password must be at least 8 characters"),cPassword:V().oneOf([a.value],"Passwords must match").required("Confirm password is required")}).validate({password:a.value,cPassword:e.value},{abortEarly:!1});const w=r.currentRoute.value.query.token;(await R.post("/resetPassword",{password:a.value,cPassword:e.value,email:r.currentRoute.value.query.email,expires:r.currentRoute.value.query.expires,signature:r.currentRoute.value.query.signature})).data.status==="success"?(n.success("Password Updated Successfully"),r.push("/login")):n.error("Error! Please try again later.")}catch(u){u.name==="ValidationError"?t.value=u.errors.reduce((w,g)=>(w[g.path]=g.message,w),{}):(console.error(u),n.error("Your reset link has expired."))}finally{s.value=!1}},togglePassword1Visibility:()=>{o.value=o.value==="password"?"text":"password"},togglePassword2Visibility:()=>{l.value=l.value==="password"?"text":"password"},password1FieldType:o,password2FieldType:l,password1ToggleIcon:x(()=>o.value==="password"?k:P),password2ToggleIcon:x(()=>l.value==="password"?k:P)}}},X={class:"auth-wrapper auth-v1 px-2"},Y={class:"auth-inner py-2"},K={class:"text-danger"},G={class:"text-danger"},Q={class:"text-center mt-2"};function W(a,e,s,t,r,n){const o=p("b-card-title"),l=p("b-card-text"),c=p("b-form-input"),_=p("feather-icon"),y=p("b-input-group-append"),u=p("b-input-group"),w=p("b-form-group"),g=p("b-button"),I=p("b-form"),S=p("router-link"),C=p("b-card");return M(),T("div",X,[m("div",Y,[i(C,{class:"mb-0"},{default:d(()=>[i(o,{class:"mb-1"},{default:d(()=>e[2]||(e[2]=[h("Reset Password ðŸ”’")])),_:1}),i(l,{class:"mb-2"},{default:d(()=>e[3]||(e[3]=[h(" Your new password must be different from previously used passwords. ")])),_:1}),i(I,{onSubmit:q(t.handleSubmit,["prevent"]),class:"auth-reset-password-form mt-2"},{default:d(()=>[i(w,{label:"New Password","label-for":"reset-password-new"},{default:d(()=>[i(u,{class:z({"is-invalid":t.errors.password})},{default:d(()=>[i(c,{id:"reset-password-new",modelValue:t.password,"onUpdate:modelValue":e[0]||(e[0]=b=>t.password=b),type:t.password1FieldType,placeholder:"Enter New Password"},null,8,["modelValue","type"]),i(y,{"is-text":""},{default:d(()=>[i(_,{class:"cursor-pointer",icon:t.password1ToggleIcon,onClick:t.togglePassword1Visibility},null,8,["icon","onClick"])]),_:1})]),_:1},8,["class"]),m("small",K,N(t.errors.password),1)]),_:1}),i(w,{label:"Confirm Password","label-for":"reset-password-confirm"},{default:d(()=>[i(u,{class:z({"is-invalid":t.errors.cPassword})},{default:d(()=>[i(c,{id:"reset-password-confirm",modelValue:t.cPassword,"onUpdate:modelValue":e[1]||(e[1]=b=>t.cPassword=b),type:t.password2FieldType,placeholder:"Enter Confirm Password"},null,8,["modelValue","type"]),i(y,{"is-text":""},{default:d(()=>[i(_,{class:"cursor-pointer",icon:t.password2ToggleIcon,onClick:t.togglePassword2Visibility},null,8,["icon","onClick"])]),_:1})]),_:1},8,["class"]),m("small",G,N(t.errors.cPassword),1)]),_:1}),i(g,{block:"",type:"submit",variant:"primary",disabled:t.isSubmitting},{default:d(()=>e[4]||(e[4]=[h(" Set New Password ")])),_:1},8,["disabled"])]),_:1},8,["onSubmit"]),m("p",Q,[i(S,{to:"/login",class:"back_to_login"},{default:d(()=>e[5]||(e[5]=[h("Back to login")])),_:1})])]),_:1})])])}const se=E(L,[["render",W],["__scopeId","data-v-ae97c94a"]]);export{se as default};
