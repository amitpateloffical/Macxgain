import{C as V}from"./vue-select.es-CdE5lKqz.js";import{_ as B,g as i,c as h,o as m,b as s,h as _,t as f,l as o,i as c,q as t,n as b,Q as D,f as v,W as I}from"./app-BuGciwe8.js";const j={components:{vSelect:V},watch:{currentPage(a){this.fetchEntries()},perPage(a){this.currentPage=1,this.fetchEntries()}},computed:{sortIcon(){return this.sortDesc?"fas fa-sort-down":"fas fa-sort-up"},rangeStart(){return this.totalrows===0?0:(this.currentPage-1)*this.perPage+1},rangeEnd(){return this.currentPage*this.perPage>=this.totalrows?this.totalrows:this.currentPage*this.perPage}},data(){return{search:{email:"",status:""},emailLogs:{data:[],total:0},totalrows:0,sortBy:"",sortDesc:!1,successMessage:"",StatusOption:[{label:"Sent",value:"sent"},{label:"Pending",value:"pending"}],fields:[{key:"email",label:"Email",sortable:!0},{key:"status",label:"Status",sortable:!1},{key:"subject",label:"Subject",sortable:!0}],showfilter:!1}},mounted(){this.fetchEntries()},methods:{fetchEntries(){I.get("/api/email-logs",{params:{email:this.search.email,status:this.search.status,perPage:this.perPage,page:this.currentPage}}).then(a=>{this.emailLogs=a.data,this.totalrows=a.data.total_row_count}).catch(a=>{console.error(a)})},searchFilter(){this.currentPage=1,this.fetchEntries(),this.showfilter=!1},resetFilter(){this.currentPage=1,this.search.email="",this.search.status="",this.showfilter=!1,this.fetchEntries()},onSortChanged(a){this.sortBy=a.sortBy,this.sortDesc=a.sortDesc},changeSorting(a){this.sortBy===a?this.sortDesc=!this.sortDesc:(this.sortBy=a,this.sortDesc=!1),this.fetchEntries()},getSortIcon(a){return this.sortBy===a?this.sortDesc?"fas fa-sort-down":"fas fa-sort-up":"fas fa-sort"}},setup(){const a=v(1),e=v(25);return{currentPage:a,perPage:e,perPageOptions:[25,50,75,100]}}},F={class:"dashboard"},L={class:"list__page"},N={key:0,class:"alert alert-success"},O={class:"list__title"},U={key:1},M={class:"table-container"},q={class:"mx-2 mb-2"},z={class:"d-flex align-items-center"},Q={class:"d-flex align-items-center"},R={class:"showing_pagination_result"},T={class:"d-flex justify-content-end"};function W(a,e,y,d,l,r){const g=i("b-button"),x=i("b-form-input"),w=i("b-form-group"),u=i("b-col"),S=i("v-select"),p=i("b-row"),C=i("b-card"),k=i("b-table"),E=i("b-pagination");return m(),h("div",F,[s("div",L,[l.successMessage?(m(),h("div",N,f(l.successMessage),1)):_("",!0),s("div",O,[e[9]||(e[9]=s("h2",null,[s("i",{class:"fas fa-user"}),c(" Email Logs")],-1)),o(g,{onClick:e[0]||(e[0]=n=>l.showfilter=!l.showfilter),variant:"primary"},{default:t(()=>e[8]||(e[8]=[c(" Filter ")])),_:1})]),l.showfilter?(m(),h("div",U,[o(C,{class:"filterBox mb-0"},{default:t(()=>[o(p,null,{default:t(()=>[o(u,{md:"5",xl:"3"},{default:t(()=>[o(w,{label:"Email"},{default:t(()=>[o(x,{modelValue:l.search.email,"onUpdate:modelValue":e[1]||(e[1]=n=>l.search.email=n),placeholder:"Enter Email"},null,8,["modelValue"])]),_:1})]),_:1}),o(u,{md:"5",xl:"3"},{default:t(()=>[o(w,{label:"Status"},{default:t(()=>[o(S,{modelValue:l.search.status,"onUpdate:modelValue":e[2]||(e[2]=n=>l.search.status=n),options:l.StatusOption,placeholder:"Select Status"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1}),o(p,null,{default:t(()=>[o(u,{md:"2",xl:"2"},{default:t(()=>[o(g,{onClick:r.searchFilter,variant:"primary w-100"},{default:t(()=>e[10]||(e[10]=[c("Search")])),_:1},8,["onClick"])]),_:1}),o(u,{md:"2",xl:"2"},{default:t(()=>[o(g,{onClick:r.resetFilter,variant:"secondary w-100"},{default:t(()=>e[11]||(e[11]=[c("Reset")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})])):_("",!0),s("div",M,[o(k,{items:l.emailLogs.data,fields:l.fields,onSortChanged:r.onSortChanged,"sort-by":l.sortBy,"sort-desc":l.sortDesc,"empty-text":"No matching records found"},{"head(email)":t(n=>[s("span",{onClick:e[3]||(e[3]=P=>r.changeSorting("email"))},[e[12]||(e[12]=c(" Email ")),s("i",{class:b(r.getSortIcon("email"))},null,2)])]),"head(status)":t(n=>[s("span",{onClick:e[4]||(e[4]=P=>r.changeSorting("status"))},[e[13]||(e[13]=c(" Status ")),s("i",{class:b(r.getSortIcon("status"))},null,2)])]),"head(subject)":t(n=>[s("span",{onClick:e[5]||(e[5]=P=>r.changeSorting("subject"))},[e[14]||(e[14]=c(" Subject ")),s("i",{class:b(r.getSortIcon("subject"))},null,2)])]),_:1},8,["items","fields","onSortChanged","sort-by","sort-desc"]),s("div",q,[o(p,{class:"align-items-center"},{default:t(()=>[o(u,{cols:"12",md:"4"},{default:t(()=>[s("div",z,[e[15]||(e[15]=s("span",{class:"mr-2 showing_pagination_result"},"Show",-1)),o(S,{modelValue:d.perPage,"onUpdate:modelValue":e[6]||(e[6]=n=>d.perPage=n),options:d.perPageOptions,clearable:!1,class:"mr-2"},null,8,["modelValue","options"]),e[16]||(e[16]=s("span",{class:"showing_pagination_result"},"entries",-1))])]),_:1}),o(u,{cols:"12",md:"4"},{default:t(()=>[s("div",Q,[s("span",R,"Showing "+f(r.rangeStart)+" to "+f(r.rangeEnd)+" of "+f(l.totalrows)+" entries",1)])]),_:1}),o(u,{cols:"12",md:"4"},{default:t(()=>[s("div",T,[l.totalrows>0?(m(),D(E,{key:0,modelValue:d.currentPage,"onUpdate:modelValue":e[7]||(e[7]=n=>d.currentPage=n),"total-rows":l.totalrows,"per-page":d.perPage,onInput:r.fetchEntries,pills:"","first-number":"","last-number":"","prev-class":"prev-item","next-class":"next-item"},{"prev-text":t(()=>e[17]||(e[17]=[s("i",{class:"fa-solid fa-angles-left"},null,-1)])),"next-text":t(()=>e[18]||(e[18]=[s("i",{class:"fa-solid fa-angles-right"},null,-1)])),_:1},8,["modelValue","total-rows","per-page","onInput"])):_("",!0)])]),_:1})]),_:1})])])])])}const H=B(j,[["render",W],["__scopeId","data-v-66efe692"]]);export{H as default};
