/* empty css                   */import{_ as F,g,c,o as d,b as t,h as f,l as r,i as n,t as m,n as k,q as i,Q as w,F as j,w as O,j as D,v as C,s as y,f as P}from"./app-BuGciwe8.js";import{C as N}from"./vue-select.es-CdE5lKqz.js";const z={components:{vSelect:N},data(){return{errors:{},showfilter:!1,fetchRequests:[],userBalance:0,balanceLoading:!1,fields:[{key:"transaction_id",label:"Transaction ID",sortable:!0},{key:"amount",label:"Amount",sortable:!0},{key:"description",label:"Description"},{key:"status",label:"Status",sortable:!0},{key:"request_create_for",label:"Recipient",formatter:(s,e,u)=>u.recipient.name},{key:"created_at",label:"Request Date",sortable:!0,formatter:s=>new Date(s).toLocaleString()},{key:"image_path",label:"Receipt"},{key:"actions",label:"Actions"}],requestData:{transaction_id:"",amount:"",description:"",image:null,request_create_for:null,image_path:null},showRequestModal:!1,showImageModal:!1,showRejectModal:!1,isEdit:!1,loading:!1,successMessage:"",statusOptions:[{value:"pending",text:"Pending"},{value:"approved",text:"Approved"},{value:"rejected",text:"Rejected"}],userOptions:[],totalrows:0,sortBy:"",sortDesc:!0,modalLoading:!1,editmodalLoading:!1,imagePreviewUrl:"",currentEditId:null,currentRequestToReject:null,rejectReason:"",isAdmin:!1,currentUserId:null,primaryPaymentDetails:null,primaryPaymentLoading:!1,showBarcodeModal:!1}},computed:{rangeStart(){return this.totalrows===0?0:(this.currentPage-1)*this.perPage+1},rangeEnd(){return this.currentPage*this.perPage>=this.totalrows?this.totalrows:this.currentPage*this.perPage},tableFields(){return[{key:"transaction_id",label:"Transaction ID",sortable:!0},{key:"amount",label:"Amount",sortable:!0},{key:"description",label:"Description"},{key:"status",label:"Status",sortable:!0},{key:"created_at",label:"Request Date",sortable:!0},{key:"image_path",label:"Receipt"},{key:"actions",label:"Actions"}]}},setup(){const s=P({transaction_id:"",status:null,recipient:null,from_date:null,to_date:null}),e=P(1),u=P(10);return{search:s,currentPage:e,perPage:u,perPageOptions:[10,25,50,100]}},mounted(){this.fetchUserInfo(),this.fetchRequestss(),this.fetchUsers(),this.fetchUserBalance(),this.fetchPrimaryPaymentDetails(),console.log("ðŸš¨ Component mounted, initial stats:",{totalRequests:this.totalRequests,pendingRequests:this.pendingRequests,approvedRequests:this.approvedRequests,rejectedRequests:this.rejectedRequests})},watch:{fetchRequests:{handler(s){console.log("ðŸš¨ fetchRequests changed:",s),console.log("ðŸš¨ Length:",s?s.length:0)},immediate:!0}},methods:{fetchUserInfo(){y.get("/user-info").then(s=>{this.isAdmin=s.data.is_admin,this.currentUserId=s.data.id}).catch(s=>{console.error(s)})},async fetchUserBalance(){this.balanceLoading=!0;try{const s=JSON.parse(localStorage.getItem("userData"));if(s&&s.id){const e=await y.post("/total_b",{id:s.id});e.data&&e.data.total_balance!==void 0&&(this.userBalance=e.data.total_balance,s.total_balance=e.data.total_balance,localStorage.setItem("userData",JSON.stringify(s)))}}catch(s){console.error("Error fetching balance:",s);const e=JSON.parse(localStorage.getItem("userData"));e&&e.total_balance!==void 0&&(this.userBalance=e.total_balance)}finally{this.balanceLoading=!1}},fetchPrimaryPaymentDetails(){this.primaryPaymentLoading=!0,y.get("/payment-collector/primary").then(s=>{s.data.success&&(this.primaryPaymentDetails=s.data.data)}).catch(s=>{console.error("Error fetching primary payment details:",s)}).finally(()=>{this.primaryPaymentLoading=!1})},openBarcodeModal(){console.log("Opening barcode modal..."),this.showBarcodeModal=!0,console.log("showBarcodeModal value:",this.showBarcodeModal)},copyToClipboard(s,e){navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(s).then(()=>{this.showCopySuccess(e)}).catch(u=>{console.error("Failed to copy: ",u),this.fallbackCopyToClipboard(s,e)}):this.fallbackCopyToClipboard(s,e)},fallbackCopyToClipboard(s,e){const u=document.createElement("textarea");u.value=s,u.style.position="fixed",u.style.left="-999999px",u.style.top="-999999px",document.body.appendChild(u),u.focus(),u.select();try{document.execCommand("copy"),this.showCopySuccess(e)}catch(p){console.error("Fallback copy failed: ",p),this.showCopyError(e)}document.body.removeChild(u)},showCopySuccess(s){this.$bvToast.toast(`${s} copied to clipboard!`,{title:"Success",variant:"success",solid:!0,autoHideDelay:2e3,appendToast:!0})},showCopyError(s){this.$bvToast.toast(`Failed to copy ${s}`,{title:"Error",variant:"danger",solid:!0,autoHideDelay:3e3,appendToast:!0})},downloadBarcode(){var s;if((s=this.primaryPaymentDetails)!=null&&s.barcode_image){const e=document.createElement("a");e.href=`/storage/${this.primaryPaymentDetails.barcode_image}`,e.download="payment-barcode.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},formatBalance(s){return s==null?"0.00":parseFloat(s).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})},getStatusVariant(s){switch(s){case"approved":return"success";case"rejected":return"danger";default:return"warning"}},fetchRequestss(){this.modalLoading=!0,y.get("/money-requests",{params:{page:this.currentPage,perPage:this.perPage,sortBy:this.sortBy,sortDesc:this.sortDesc,...this.search}}).then(s=>{console.log("ðŸš¨ API Response:",s.data),console.log("ðŸš¨ fetchRequests:",s.data.data),console.log("ðŸš¨ totalrows:",s.data.total),this.fetchRequests=s.data.data,this.totalrows=s.data.total,this.updateStats(),this.modalLoading=!1}).catch(s=>{console.error(s),this.modalLoading=!1})},fetchUsers(){y.get("/users").then(s=>{this.userOptions=s.data}).catch(s=>{console.error(s)})},openRequestModal(s=null){this.showRequestModal=!0,this.isEdit=!!s,this.currentEditId=s,s?(this.editmodalLoading=!0,y.get(`/money-requests/${s}`).then(e=>{const u=e.data.data;this.requestData.transaction_id=u.transaction_id,this.requestData.amount=u.amount,this.requestData.description=u.description,this.requestData.image_path=u.image_path,this.requestData.image=u.image,this.editmodalLoading=!1}).catch(e=>{console.error(e),this.editmodalLoading=!1})):this.requestData={transaction_id:"",amount:"",description:"",image:null,request_create_for:null,image_path:null}},submitRequest(){this.loading=!0;const s=new FormData;Object.keys(this.requestData).forEach(u=>{this.requestData[u]!==null&&u!=="image_path"&&s.append(u,this.requestData[u])}),(this.isEdit?y.put(`/money-requests/${this.currentEditId}`,s):y.post("/money-requests",s)).then(u=>{this.showRequestModal=!1,this.fetchRequestss(),this.successMessage=this.isEdit?"Request updated successfully!":"Request submitted successfully!",this.clearSuccessMessage(),this.loading=!1}).catch(u=>{var p,a;this.loading=!1,(a=(p=u.response)==null?void 0:p.data)!=null&&a.errors&&(this.errors=u.response.data.errors)})},approveRequest(s){confirm("Are you sure you want to approve this request?")&&y.patch(`/money-requests/${s.id}/status`,{status:"approved"}).then(()=>{this.fetchRequestss(),this.successMessage="Request approved successfully!",this.clearSuccessMessage()}).catch(e=>{console.error(e)})},rejectRequest(s){this.currentRequestToReject=s,this.rejectReason="",this.showRejectModal=!0},confirmReject(){y.patch(`/money-requests/${this.currentRequestToReject.id}/status`,{status:"rejected",reject_reason:this.rejectReason}).then(()=>{this.fetchRequestss(),this.successMessage="Request rejected successfully!",this.clearSuccessMessage(),this.showRejectModal=!1}).catch(s=>{console.error(s)})},deleteRequest(s){confirm("Are you sure you want to delete this request?")&&y.delete(`/money-requests/${s}`).then(()=>{this.fetchRequestss(),this.successMessage="Request deleted successfully!",this.clearSuccessMessage()}).catch(e=>{console.error(e)})},showImage(s){this.imagePreviewUrl=`/storage/${s}`,this.showImageModal=!0},downloadImage(){const s=document.createElement("a");s.href=this.imagePreviewUrl,s.download=`receipt-${new Date().getTime()}.jpg`,document.body.appendChild(s),s.click(),document.body.removeChild(s)},handleFileChange(s){this.requestData.image=s.target.files[0]},searchFilter(){this.currentPage=1,this.fetchRequestss()},resetFilter(){this.search={transaction_id:"",status:null,recipient:null,from_date:null,to_date:null},this.currentPage=1,this.fetchRequestss()},resetModal(){this.requestData={transaction_id:"",amount:"",description:"",image:null,request_create_for:null,image_path:null},this.errors={},this.isEdit=!1,this.currentEditId=null},closeModal(){this.showRequestModal=!1,this.resetModal()},clearSuccessMessage(){setTimeout(()=>{this.successMessage=""},3e3)},hasErrors(s){return this.errors&&this.errors[s]},getErrors(s){return this.errors[s][0]},removeError(s){this.errors[s]&&delete this.errors[s]},onSortChanged(s){this.currentPage=1,this.sortBy=s.sortBy,this.sortDesc=s.sortDesc,this.fetchRequestss()},updateStats(){if(console.log("ðŸš¨ updateStats called with fetchRequests:",this.fetchRequests),!this.fetchRequests||this.fetchRequests.length===0){console.log("ðŸš¨ No requests found, setting stats to 0"),this.totalRequests=0,this.pendingRequests=0,this.approvedRequests=0,this.rejectedRequests=0;return}this.totalRequests=this.fetchRequests.length,this.pendingRequests=this.fetchRequests.filter(s=>s.status==="pending").length,this.approvedRequests=this.fetchRequests.filter(s=>s.status==="approved").length,this.rejectedRequests=this.fetchRequests.filter(s=>s.status==="rejected").length,console.log("ðŸš¨ Stats Updated:",{total:this.totalRequests,pending:this.pendingRequests,approved:this.approvedRequests,rejected:this.rejectedRequests}),this.$forceUpdate()}}},H={class:"money-request-screen"},J={class:"page-header"},G={class:"header-actions"},Q=["disabled"],K={key:0,class:"success-alert"},W={class:"stats-grid"},X={key:0,class:"stat-card balance-stat-card"},Y={class:"stat-content"},Z={class:"stat-number balance-amount"},$={class:"stat-label"},ee=["disabled"],te={class:"stat-card"},se={class:"stat-content"},ae={class:"stat-number"},le={class:"stat-card"},oe={class:"stat-content"},ie={class:"stat-number"},ne={class:"stat-card"},re={class:"stat-content"},de={class:"stat-number"},ue={class:"stat-card"},ce={class:"stat-content"},me={class:"stat-number"},pe={key:1},fe={class:"requests-container"},ge={class:"table-header"},ye={class:"table-actions"},he=["disabled"],be={key:0,class:"loading-container"},ve={key:1,class:"no-data"},_e={key:2,class:"requests-table"},qe={class:"font-weight-bold"},ke={key:0,class:"text-danger small mt-1"},Re={key:2,class:"text-muted"},we={key:3,class:"d-flex justify-content-center align-items-center",style:{height:"100px"}},De={class:"mx-2 mb-2"},Ce={key:0,class:"d-flex align-items-center"},Pe={class:"d-flex align-items-center"},Me={class:"showing_pagination_result"},Ee={class:"d-flex justify-content-end"},je={class:"modal-header-content"},Se={class:"modal-title-section"},Ve={class:"modal-title"},xe={class:"modal-subtitle"},Be=["onClick"],Ie={key:0,class:"loading-container"},Ue={key:1,class:"admin-payment-section"},Le={class:"payment-details-grid"},Te={key:0,class:"detail-item locked"},Ae=["title"],Fe={key:1,class:"detail-item locked"},Oe=["title"],Ne={key:2,class:"detail-item locked"},ze=["title"],He={key:3,class:"detail-item locked"},Je=["title"],Ge={key:4,class:"detail-item locked"},Qe=["title"],Ke={key:5,class:"detail-item locked barcode-item"},We={class:"barcode-preview"},Xe=["src"],Ye={key:2,class:"money-form-container"},Ze={class:"form-row"},$e={class:"form-group-modern"},et={class:"input-wrapper"},tt={key:0,class:"error-text"},st={class:"form-group-modern"},at={class:"input-wrapper"},lt={key:0,class:"error-text"},ot={class:"form-group-modern"},it={class:"file-upload-wrapper"},nt=["required"],rt={for:"receipt-upload",class:"file-upload-area"},dt={key:0,class:"file-selected"},ut={key:0,class:"current-receipt"},ct={key:1,class:"error-text"},mt={class:"form-group-modern"},pt={class:"input-wrapper"},ft={class:"form-actions"},gt=["disabled"],yt={key:0,class:"btn-loading"},ht={key:1,class:"btn-content"},bt={class:"text-center"},vt=["src"],_t={class:"text-center"},qt=["src"];function kt(s,e,u,p,a,o){const S=g("b-form-input"),v=g("b-form-group"),h=g("b-col"),V=g("b-form-select-option"),x=g("b-form-select"),M=g("v-select"),R=g("b-row"),E=g("b-form-datepicker"),b=g("b-button"),B=g("b-card"),I=g("b-badge"),U=g("b-link"),L=g("b-table"),T=g("b-pagination"),q=g("b-modal"),A=g("b-form-textarea");return d(),c("div",H,[t("div",J,[e[34]||(e[34]=t("div",{class:"header-content"},[t("h1",{class:"page-title"},"ðŸ’° Money Requests"),t("p",{class:"page-subtitle"},"Manage all money requests and transactions")],-1)),t("div",G,[a.isAdmin?f("",!0):(d(),c("button",{key:0,class:"btn-primary",disabled:a.loading,onClick:e[0]||(e[0]=l=>o.openRequestModal())},e[32]||(e[32]=[t("i",{class:"fa-solid fa-plus"},null,-1),n(" Create Request ")]),8,Q)),t("button",{class:"btn-secondary",onClick:e[1]||(e[1]=l=>a.showfilter=!a.showfilter)},[e[33]||(e[33]=t("i",{class:"fa-solid fa-filter"},null,-1)),n(" "+m(a.showfilter?"Hide":"Show")+" Filters ",1)])])]),a.successMessage?(d(),c("div",K,[e[35]||(e[35]=t("i",{class:"fa-solid fa-check-circle"},null,-1)),n(" "+m(a.successMessage),1)])):f("",!0),t("div",W,[a.isAdmin?f("",!0):(d(),c("div",X,[e[37]||(e[37]=t("div",{class:"stat-icon"},"ðŸ’°",-1)),t("div",Y,[t("div",Z,"â‚¹"+m(o.formatBalance(a.userBalance)),1),t("div",$,[e[36]||(e[36]=n(" Available Balance ")),t("button",{onClick:e[2]||(e[2]=(...l)=>o.fetchUserBalance&&o.fetchUserBalance(...l)),class:"refresh-btn-mini",disabled:a.balanceLoading},[t("i",{class:k(["fa-solid fa-rotate-right",{spinning:a.balanceLoading}])},null,2)],8,ee)])])])),t("div",te,[e[39]||(e[39]=t("div",{class:"stat-icon"},"ðŸ“Š",-1)),t("div",se,[t("div",ae,m(s.totalRequests||0),1),e[38]||(e[38]=t("div",{class:"stat-label"},"Total Requests",-1))])]),t("div",le,[e[41]||(e[41]=t("div",{class:"stat-icon"},"â³",-1)),t("div",oe,[t("div",ie,m(s.pendingRequests||0),1),e[40]||(e[40]=t("div",{class:"stat-label"},"Pending",-1))])]),t("div",ne,[e[43]||(e[43]=t("div",{class:"stat-icon"},"âœ…",-1)),t("div",re,[t("div",de,m(s.approvedRequests||0),1),e[42]||(e[42]=t("div",{class:"stat-label"},"Approved",-1))])]),t("div",ue,[e[45]||(e[45]=t("div",{class:"stat-icon"},"âŒ",-1)),t("div",ce,[t("div",me,m(s.rejectedRequests||0),1),e[44]||(e[44]=t("div",{class:"stat-label"},"Rejected",-1))])])]),a.showfilter?(d(),c("div",pe,[r(B,{class:"filterBox mb-0"},{default:i(()=>[r(R,null,{default:i(()=>[r(h,{md:"4"},{default:i(()=>[r(v,{label:"Transaction ID","label-for":"transaction_id"},{default:i(()=>[r(S,{modelValue:p.search.transaction_id,"onUpdate:modelValue":e[3]||(e[3]=l=>p.search.transaction_id=l),id:"transaction_id",placeholder:"Enter Transaction ID"},null,8,["modelValue"])]),_:1})]),_:1}),r(h,{md:"4"},{default:i(()=>[r(v,{label:"Status","label-for":"status"},{default:i(()=>[r(x,{modelValue:p.search.status,"onUpdate:modelValue":e[4]||(e[4]=l=>p.search.status=l),options:a.statusOptions,id:"status"},{first:i(()=>[r(V,{value:null},{default:i(()=>e[46]||(e[46]=[n("All Status")])),_:1})]),_:1},8,["modelValue","options"])]),_:1})]),_:1}),a.isAdmin?(d(),w(h,{key:0,md:"4"},{default:i(()=>[r(v,{label:"Recipient","label-for":"recipient"},{default:i(()=>[r(M,{modelValue:p.search.recipient,"onUpdate:modelValue":e[5]||(e[5]=l=>p.search.recipient=l),options:a.userOptions,label:"name",reduce:l=>l.id,placeholder:"Select Recipient"},null,8,["modelValue","options","reduce"])]),_:1})]),_:1})):f("",!0)]),_:1}),r(R,null,{default:i(()=>[r(h,{md:"3"},{default:i(()=>[r(v,{label:"From Date","label-for":"from_date"},{default:i(()=>[r(E,{modelValue:p.search.from_date,"onUpdate:modelValue":e[6]||(e[6]=l=>p.search.from_date=l),id:"from_date"},null,8,["modelValue"])]),_:1})]),_:1}),r(h,{md:"3"},{default:i(()=>[r(v,{label:"To Date","label-for":"to_date"},{default:i(()=>[r(E,{modelValue:p.search.to_date,"onUpdate:modelValue":e[7]||(e[7]=l=>p.search.to_date=l),id:"to_date"},null,8,["modelValue"])]),_:1})]),_:1}),r(h,{md:"2"},{default:i(()=>[r(b,{onClick:o.searchFilter,variant:"primary mt-1 w-100"},{default:i(()=>e[47]||(e[47]=[n(" Search ")])),_:1},8,["onClick"])]),_:1}),r(h,{md:"2"},{default:i(()=>[r(b,{onClick:o.resetFilter,variant:"primary mt-1 w-100"},{default:i(()=>e[48]||(e[48]=[n(" Reset ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})])):f("",!0),t("div",fe,[t("div",ge,[t("h3",null,"Money Requests ("+m(s.totalRequests||0)+")",1),t("div",ye,[t("button",{class:"btn-refresh",onClick:e[8]||(e[8]=(...l)=>o.fetchRequestss&&o.fetchRequestss(...l)),disabled:a.modalLoading},[t("i",{class:k(["fa-solid fa-rotate",{"fa-spin":a.modalLoading}])},null,2),n(" "+m(a.modalLoading?"Loading...":"Refresh"),1)],8,he),t("button",{class:"btn-refresh ml-1",onClick:e[9]||(e[9]=(...l)=>o.updateStats&&o.updateStats(...l)),style:{"margin-left":"8px"}},e[49]||(e[49]=[t("i",{class:"fa-solid fa-chart-bar"},null,-1),n(" Update Stats ")]))])]),a.modalLoading?(d(),c("div",be,e[50]||(e[50]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Loading requests...",-1)]))):!a.fetchRequests||a.fetchRequests.length===0?(d(),c("div",ve,e[51]||(e[51]=[t("div",{class:"no-data-icon"},"ðŸ’°",-1),t("h3",null,"No Money Requests Found",-1),t("p",null,"No requests match your current filters",-1)]))):(d(),c("div",_e,[r(L,{items:a.fetchRequests,fields:o.tableFields,"current-page":p.currentPage,"per-page":p.perPage,busy:a.modalLoading,responsive:"",class:"requests-table dark-table"},{"cell(transaction_id)":i(l=>[t("span",qe,m(l.item.transaction_id),1)]),"cell(amount)":i(l=>[n(" â‚¹"+m(l.item.amount.toLocaleString()),1)]),"cell(status)":i(l=>[r(I,{variant:o.getStatusVariant(l.item.status)},{default:i(()=>[n(m(l.item.status),1)]),_:2},1032,["variant"]),l.item.status==="rejected"&&l.item.reject_reason?(d(),c("div",ke," Reason: "+m(l.item.reject_reason),1)):f("",!0)]),"cell(image_path)":i(l=>[r(U,{onClick:_=>o.showImage(l.item.image_path),class:"text-primary cursor-pointer"},{default:i(()=>e[52]||(e[52]=[n(" View Receipt ")])),_:2},1032,["onClick"])]),"cell(actions)":i(l=>[l.item.status==="pending"&&a.isAdmin?(d(),c(j,{key:0},[r(b,{size:"sm",variant:"success",onClick:_=>o.approveRequest(l.item)},{default:i(()=>e[53]||(e[53]=[n(" Approve ")])),_:2},1032,["onClick"]),r(b,{size:"sm",variant:"danger",onClick:_=>o.rejectRequest(l.item),class:"ml-1"},{default:i(()=>e[54]||(e[54]=[n(" Reject ")])),_:2},1032,["onClick"])],64)):!a.isAdmin&&l.item.request_by===a.currentUserId&&l.item.status==="pending"?(d(),c(j,{key:1},[r(b,{size:"sm",variant:"primary",onClick:_=>o.openRequestModal(l.item.id),class:"ml-1"},{default:i(()=>e[55]||(e[55]=[n(" Edit ")])),_:2},1032,["onClick"]),r(b,{size:"sm",variant:"danger",onClick:_=>o.deleteRequest(l.item.id),class:"ml-1"},{default:i(()=>e[56]||(e[56]=[n(" Delete ")])),_:2},1032,["onClick"])],64)):(d(),c("span",Re,"No actions available"))]),_:1},8,["items","fields","current-page","per-page","busy"])])),a.modalLoading?(d(),c("div",we,e[57]||(e[57]=[t("i",{class:"fas fa-spinner fa-spin fa-3x"},null,-1)]))):f("",!0),t("div",De,[r(R,{class:"align-items-center"},{default:i(()=>[r(h,{cols:"12",md:"4"},{default:i(()=>[a.modalLoading?f("",!0):(d(),c("div",Ce,[e[58]||(e[58]=t("span",{class:"mr-2 showing_pagination_result"},"Show",-1)),r(M,{modelValue:p.perPage,"onUpdate:modelValue":e[10]||(e[10]=l=>p.perPage=l),options:p.perPageOptions,clearable:!1,class:"mr-2"},null,8,["modelValue","options"]),e[59]||(e[59]=t("span",{class:"showing_pagination_result"},"entries",-1))]))]),_:1}),a.modalLoading?f("",!0):(d(),w(h,{key:0,cols:"12",md:"4"},{default:i(()=>[t("div",Pe,[t("span",Me,"Showing "+m(o.rangeStart)+" to "+m(o.rangeEnd)+" of "+m(a.totalrows)+" entries",1)])]),_:1})),r(h,{cols:"12",md:"4"},{default:i(()=>[t("div",Ee,[a.totalrows>0&&!a.modalLoading?(d(),w(T,{key:0,modelValue:p.currentPage,"onUpdate:modelValue":e[11]||(e[11]=l=>p.currentPage=l),"total-rows":a.totalrows,"per-page":p.perPage,onInput:s.fetchEntries,pills:"","first-number":"","last-number":"","prev-class":"prev-item","next-class":"next-item"},{"prev-text":i(()=>e[60]||(e[60]=[t("i",{class:"fa-solid fa-angles-left"},null,-1)])),"next-text":i(()=>e[61]||(e[61]=[t("i",{class:"fa-solid fa-angles-right"},null,-1)])),_:1},8,["modelValue","total-rows","per-page","onInput"])):f("",!0)])]),_:1})]),_:1})])]),r(q,{modelValue:a.showRequestModal,"onUpdate:modelValue":e[27]||(e[27]=l=>a.showRequestModal=l),onHide:o.resetModal,centered:"",size:"xl","hide-footer":"","modal-class":"modern-modal wide-modal","header-class":"modern-modal-header","body-class":"modern-modal-body"},{"modal-header":i(({close:l})=>[t("div",je,[e[63]||(e[63]=t("div",{class:"modal-icon"},[t("i",{class:"fas fa-credit-card"})],-1)),t("div",Se,[t("h4",Ve,m(a.isEdit?"Edit Money Request":"Create Money Request"),1),t("p",xe,m(a.isEdit?"Update your money request details":"Add funds to your account"),1)]),t("button",{type:"button",class:"modal-close-btn",onClick:_=>l()},e[62]||(e[62]=[t("i",{class:"fas fa-times"},null,-1)]),8,Be)])]),default:i(()=>[a.editmodalLoading&&a.isEdit?(d(),c("div",Ie,e[64]||(e[64]=[t("div",{class:"loading-spinner"},[t("i",{class:"fas fa-spinner fa-spin"})],-1),t("p",{class:"loading-text"},"Loading request details...",-1)]))):f("",!0),!a.editmodalLoading&&a.primaryPaymentDetails?(d(),c("div",Ue,[e[83]||(e[83]=t("div",{class:"section-header"},[t("div",{class:"section-icon"},[t("i",{class:"fas fa-credit-card"})]),t("div",{class:"section-title"},[t("h4",null,"ðŸ’³ Payment Details")])],-1)),t("div",Le,[a.primaryPaymentDetails.bank_name?(d(),c("div",Te,[e[66]||(e[66]=t("label",{class:"detail-label"},[t("i",{class:"fas fa-university"}),n(" Bank Name ")],-1)),t("span",{class:"detail-value clickable-value",onClick:e[12]||(e[12]=l=>o.copyToClipboard(a.primaryPaymentDetails.bank_name,"Bank Name")),title:`Click to copy ${a.primaryPaymentDetails.bank_name}`},[n(m(a.primaryPaymentDetails.bank_name)+" ",1),e[65]||(e[65]=t("i",{class:"fas fa-copy copy-icon"},null,-1))],8,Ae),e[67]||(e[67]=t("i",{class:"fas fa-lock detail-lock"},null,-1))])):f("",!0),a.primaryPaymentDetails.account_holder?(d(),c("div",Fe,[e[69]||(e[69]=t("label",{class:"detail-label"},[t("i",{class:"fas fa-user"}),n(" Account Holder ")],-1)),t("span",{class:"detail-value clickable-value",onClick:e[13]||(e[13]=l=>o.copyToClipboard(a.primaryPaymentDetails.account_holder,"Account Holder")),title:`Click to copy ${a.primaryPaymentDetails.account_holder}`},[n(m(a.primaryPaymentDetails.account_holder)+" ",1),e[68]||(e[68]=t("i",{class:"fas fa-copy copy-icon"},null,-1))],8,Oe),e[70]||(e[70]=t("i",{class:"fas fa-lock detail-lock"},null,-1))])):f("",!0),a.primaryPaymentDetails.account_number?(d(),c("div",Ne,[e[72]||(e[72]=t("label",{class:"detail-label"},[t("i",{class:"fas fa-hashtag"}),n(" Account Number ")],-1)),t("span",{class:"detail-value clickable-value",onClick:e[14]||(e[14]=l=>o.copyToClipboard(a.primaryPaymentDetails.account_number,"Account Number")),title:`Click to copy ${a.primaryPaymentDetails.account_number}`},[n(m(a.primaryPaymentDetails.account_number)+" ",1),e[71]||(e[71]=t("i",{class:"fas fa-copy copy-icon"},null,-1))],8,ze),e[73]||(e[73]=t("i",{class:"fas fa-lock detail-lock"},null,-1))])):f("",!0),a.primaryPaymentDetails.ifsc_code?(d(),c("div",He,[e[75]||(e[75]=t("label",{class:"detail-label"},[t("i",{class:"fas fa-angle-double-right"}),n(" IFSC Code ")],-1)),t("span",{class:"detail-value clickable-value",onClick:e[15]||(e[15]=l=>o.copyToClipboard(a.primaryPaymentDetails.ifsc_code,"IFSC Code")),title:`Click to copy ${a.primaryPaymentDetails.ifsc_code}`},[n(m(a.primaryPaymentDetails.ifsc_code)+" ",1),e[74]||(e[74]=t("i",{class:"fas fa-copy copy-icon"},null,-1))],8,Je),e[76]||(e[76]=t("i",{class:"fas fa-lock detail-lock"},null,-1))])):f("",!0),a.primaryPaymentDetails.qr_code?(d(),c("div",Ge,[e[78]||(e[78]=t("label",{class:"detail-label"},[t("i",{class:"fas fa-qrcode"}),n(" UPI ID ")],-1)),t("span",{class:"detail-value clickable-value",onClick:e[16]||(e[16]=l=>o.copyToClipboard(a.primaryPaymentDetails.qr_code,"UPI ID")),title:`Click to copy ${a.primaryPaymentDetails.qr_code}`},[n(m(a.primaryPaymentDetails.qr_code)+" ",1),e[77]||(e[77]=t("i",{class:"fas fa-copy copy-icon"},null,-1))],8,Qe),e[79]||(e[79]=t("i",{class:"fas fa-lock detail-lock"},null,-1))])):f("",!0),a.primaryPaymentDetails.barcode_image?(d(),c("div",Ke,[e[81]||(e[81]=t("label",{class:"detail-label"},[t("i",{class:"fas fa-barcode"}),n(" Barcode ")],-1)),t("div",We,[t("img",{src:`/storage/${a.primaryPaymentDetails.barcode_image}`,alt:"Payment Barcode",class:"barcode-thumbnail"},null,8,Xe),t("button",{onClick:e[17]||(e[17]=(...l)=>o.openBarcodeModal&&o.openBarcodeModal(...l)),class:"view-barcode-btn",type:"button"},e[80]||(e[80]=[t("i",{class:"fas fa-eye"},null,-1),n(" View ")]))]),e[82]||(e[82]=t("i",{class:"fas fa-lock detail-lock"},null,-1))])):f("",!0)])])):f("",!0),a.editmodalLoading?f("",!0):(d(),c("div",Ye,[t("form",{onSubmit:e[26]||(e[26]=O((...l)=>o.submitRequest&&o.submitRequest(...l),["prevent"])),class:"money-form"},[t("div",Ze,[t("div",$e,[e[86]||(e[86]=t("label",{class:"form-label-modern"},[t("i",{class:"fas fa-hashtag"}),n(" Transaction ID ")],-1)),t("div",et,[D(t("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=l=>a.requestData.transaction_id=l),required:"",placeholder:"Enter transaction ID",class:k(["form-input-modern",{error:o.hasErrors("transaction_id")}]),onInput:e[19]||(e[19]=l=>o.removeError("transaction_id"))},null,34),[[C,a.requestData.transaction_id]]),e[84]||(e[84]=t("div",{class:"input-icon"},[t("i",{class:"fas fa-hashtag"})],-1))]),e[87]||(e[87]=t("div",{class:"input-help"}," Enter the unique transaction ID from your payment ",-1)),o.hasErrors("transaction_id")?(d(),c("div",tt,[e[85]||(e[85]=t("i",{class:"fas fa-exclamation-circle"},null,-1)),n(" "+m(o.getErrors("transaction_id")),1)])):f("",!0)]),t("div",st,[e[90]||(e[90]=t("label",{class:"form-label-modern"},[t("i",{class:"fas fa-rupee-sign"}),n(" Amount (â‚¹) ")],-1)),t("div",at,[D(t("input",{type:"number","onUpdate:modelValue":e[20]||(e[20]=l=>a.requestData.amount=l),required:"",min:"1",placeholder:"Enter amount",class:k(["form-input-modern",{error:o.hasErrors("amount")}]),onInput:e[21]||(e[21]=l=>o.removeError("amount"))},null,34),[[C,a.requestData.amount]]),e[88]||(e[88]=t("div",{class:"input-icon"},[t("i",{class:"fas fa-rupee-sign"})],-1))]),e[91]||(e[91]=t("div",{class:"input-help"}," Enter the exact amount you paid ",-1)),o.hasErrors("amount")?(d(),c("div",lt,[e[89]||(e[89]=t("i",{class:"fas fa-exclamation-circle"},null,-1)),n(" "+m(o.getErrors("amount")),1)])):f("",!0)])]),t("div",ot,[e[96]||(e[96]=t("label",{class:"form-label-modern"},[t("i",{class:"fas fa-receipt"}),n(" Payment Receipt ")],-1)),t("div",it,[t("input",{type:"file",id:"receipt-upload",onChange:e[22]||(e[22]=(...l)=>o.handleFileChange&&o.handleFileChange(...l)),accept:"image/*",required:!a.isEdit,class:"file-input-hidden"},null,40,nt),t("label",rt,[e[93]||(e[93]=t("div",{class:"file-upload-content"},[t("div",{class:"file-upload-icon"},[t("i",{class:"fas fa-cloud-upload-alt"})]),t("div",{class:"file-upload-text"},[t("span",{class:"upload-title"},"Choose file or drag here"),t("span",{class:"upload-subtitle"},"Max 2MB (JPEG, PNG, GIF)")])],-1)),a.requestData.image?(d(),c("div",dt,e[92]||(e[92]=[t("i",{class:"fas fa-check-circle"},null,-1),n(" File selected ")]))):f("",!0)])]),a.isEdit&&a.requestData.image_path?(d(),c("div",ut,[t("button",{type:"button",onClick:e[23]||(e[23]=l=>o.showImage(a.requestData.image_path)),class:"view-receipt-btn"},e[94]||(e[94]=[t("i",{class:"fas fa-eye"},null,-1),n(" View Current Receipt ")]))])):f("",!0),e[97]||(e[97]=t("div",{class:"input-help"}," Upload a clear image of your payment receipt or screenshot ",-1)),o.hasErrors("image")?(d(),c("div",ct,[e[95]||(e[95]=t("i",{class:"fas fa-exclamation-circle"},null,-1)),n(" "+m(o.getErrors("image")),1)])):f("",!0)]),t("div",mt,[e[98]||(e[98]=t("label",{class:"form-label-modern"},[t("i",{class:"fas fa-comment-alt"}),n(" Description ")],-1)),t("div",pt,[D(t("textarea",{"onUpdate:modelValue":e[24]||(e[24]=l=>a.requestData.description=l),rows:"3",placeholder:"Optional description...",class:"form-textarea-modern"},null,512),[[C,a.requestData.description]])]),e[99]||(e[99]=t("div",{class:"input-help"}," Provide additional details about this payment (optional) ",-1))]),t("div",ft,[t("button",{type:"button",class:"btn-cancel",onClick:e[25]||(e[25]=(...l)=>o.closeModal&&o.closeModal(...l))},e[100]||(e[100]=[t("i",{class:"fas fa-times"},null,-1),n(" Cancel ")])),t("button",{type:"submit",class:"btn-submit",disabled:a.loading},[a.loading?(d(),c("span",yt,e[101]||(e[101]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1),n(" Processing... ")]))):(d(),c("span",ht,[e[102]||(e[102]=t("i",{class:"fas fa-paper-plane"},null,-1)),n(" "+m(a.isEdit?"Update Request":"Submit Request"),1)]))],8,gt)])],32)]))]),_:1},8,["modelValue","onHide"]),r(q,{modelValue:a.showImageModal,"onUpdate:modelValue":e[28]||(e[28]=l=>a.showImageModal=l),title:"Payment Receipt",centered:""},{"modal-footer":i(()=>[r(b,{variant:"primary",onClick:o.downloadImage},{default:i(()=>e[103]||(e[103]=[n("Download")])),_:1},8,["onClick"])]),default:i(()=>[t("div",bt,[t("img",{src:a.imagePreviewUrl,alt:"Payment Receipt",class:"img-fluid"},null,8,vt)])]),_:1},8,["modelValue"]),r(q,{modelValue:a.showBarcodeModal,"onUpdate:modelValue":e[29]||(e[29]=l=>a.showBarcodeModal=l),title:"Payment Barcode",centered:"",size:"lg","modal-class":"barcode-modal"},{"modal-footer":i(()=>[r(b,{variant:"primary",onClick:o.downloadBarcode},{default:i(()=>e[104]||(e[104]=[n("Download Barcode")])),_:1},8,["onClick"])]),default:i(()=>{var l;return[t("div",_t,[t("img",{src:`/storage/${(l=a.primaryPaymentDetails)==null?void 0:l.barcode_image}`,alt:"Payment Barcode",class:"barcode-modal-image"},null,8,qt)])]}),_:1},8,["modelValue"]),r(q,{modelValue:a.showRejectModal,"onUpdate:modelValue":e[31]||(e[31]=l=>a.showRejectModal=l),title:"Reject Request",centered:"",onOk:o.confirmReject},{default:i(()=>[r(v,{label:"Reject Reason","label-for":"rejectReason"},{default:i(()=>[r(A,{id:"rejectReason",modelValue:a.rejectReason,"onUpdate:modelValue":e[30]||(e[30]=l=>a.rejectReason=l),rows:"3",required:"",placeholder:"Please specify the reason for rejection..."},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue","onOk"])])}const Ct=F(z,[["render",kt],["__scopeId","data-v-4cacf73b"]]);export{Ct as default};
