import{_ as me,u as fe,f as c,D as h,L as we,E as ge,G as he,Y as be,c as m,o as f,b as s,h as P,i as C,j as u,v as w,X as A,t as n,n as b,a as _e,F as ye,r as Ue,w as R}from"./app-CjP8w0xc.js";const ke={class:"user-management-screen"},Ee={class:"page-header"},Pe={class:"header-actions"},Ce={class:"search-filters"},Ae={class:"search-box"},Ne={class:"filter-options"},Me={class:"stats-grid"},Se={class:"stat-card"},$e={class:"stat-content"},De={class:"stat-number"},je={class:"stat-card"},Re={class:"stat-content"},Fe={class:"stat-number"},Ve={class:"stat-card"},Ie={class:"stat-content"},Le={class:"stat-number"},qe={class:"stat-card"},xe={class:"stat-content"},Te={class:"stat-number"},Be={class:"users-container"},Xe={class:"table-header"},ze={class:"table-actions"},He=["disabled"],Ge={key:0,class:"no-users"},Je={key:1,class:"no-users"},Oe={key:2,class:"no-users"},We={key:3,class:"users-table"},Ye={class:"col-user"},Ke={class:"user-info"},Ze=["src","alt"],Qe={class:"user-details"},es={class:"user-name"},ss={class:"user-id"},ts={class:"col-email"},as={class:"email-text"},os={class:"col-phone"},ls={class:"phone-text"},ns={class:"col-role"},is={class:"col-status"},rs={class:"col-joined"},ds={class:"date-text"},us={class:"col-actions"},cs={class:"action-buttons"},vs=["onClick","disabled"],ps=["onClick"],ms=["onClick"],fs=["onClick"],ws={key:4,class:"pagination"},gs=["disabled"],hs=["disabled"],bs={class:"page-info"},_s=["disabled"],ys=["disabled"],Us={class:"modal-body"},ks={class:"form-row"},Es={class:"form-group"},Ps={class:"form-group"},Cs={class:"form-row"},As={class:"form-group"},Ns={class:"form-group"},Ms={class:"form-row"},Ss={class:"form-group"},$s={class:"form-row"},Ds={class:"form-group"},js={class:"form-group"},Rs={class:"form-row"},Fs={class:"form-group full-width"},Vs={class:"form-actions"},Is=["disabled"],Ls={key:0},qs={class:"modal-header"},xs={class:"modal-body"},Ts={class:"form-row"},Bs={class:"form-group"},Xs={class:"form-group"},zs={class:"form-row"},Hs={class:"form-group"},Gs={class:"form-group"},Js={class:"form-row"},Os={class:"form-group"},Ws={class:"form-group"},Ys={class:"modal-header"},Ks={class:"modal-body"},Zs={class:"user-details-view"},Qs={class:"user-avatar-large"},et=["src","alt"],st={class:"user-info-grid"},tt={class:"info-row"},at={class:"info-value"},ot={class:"info-row"},lt={class:"info-value"},nt={class:"info-row"},it={class:"info-value"},rt={class:"info-row"},dt={class:"info-value"},ut={class:"info-row"},ct={class:"info-value"},vt={class:"info-row"},pt={class:"info-value"},mt={class:"info-row"},ft={class:"info-value"},wt={class:"info-row"},gt={class:"info-value"},ht={class:"info-row"},bt={class:"info-value balance-value"},_t={class:"bank-details-section"},yt={class:"info-row"},Ut={class:"info-value"},kt={class:"info-row"},Et={class:"info-value"},Pt={class:"info-row"},Ct={class:"info-value"},At={__name:"UserManagement",setup(Nt){fe();const F=c(!1),N=c(!1),M=c(!1),V=c(!1),_=c(""),y=c("all"),U=c("all"),v=c(1),x=c(10),I=c(!1),l=c({name:"",email:"",phone:"",role:"user",status:"active",password:"",confirmPassword:"",profile_image:null}),i=c({id:null,name:"",email:"",phone:"",role:"user",status:"active",newPassword:""}),r=c({}),p=c([]),k=c(!1),L=c(null),E=`${window.location.origin}/api`,z=async()=>{try{k.value=!0,L.value=null;const a=localStorage.getItem("access_token");if(!a)throw new Error("No access token found. Please login again.");const e=await fetch(`${E}/users`,{method:"GET",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(e.status===401)throw new Error("Authentication failed. Please login again.");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const o=await e.json();if(o.success&&o.data)p.value=o.data.map(t=>({id:t.id,name:t.name||"Unknown User",email:t.email,phone:t.phone||null,role:t.is_admin?"admin":"user",status:B(t.status)||"active",avatar:t.profile_image||"../assest/img/tableprofileimg.png",created_at:t.created_at,last_login:t.last_login_at||null,total_balance:0}));else throw new Error(o.message||"Failed to fetch users")}catch(a){console.error("Error fetching users:",a),L.value=a.message,p.value.length===0&&(p.value=[{id:1,name:"Kamlesh Patel",email:"kamlesh@example.com",phone:"+91 98765 43210",role:"admin",status:"active",avatar:"../assest/img/tableprofileimg.png",created_at:"2024-01-01T10:00:00Z",last_login:"2024-01-15T14:30:00Z",total_balance:5e4}])}finally{k.value=!1}},S=h(()=>{let a=p.value;if(_.value){const e=_.value.toLowerCase();a=a.filter(o=>o.name.toLowerCase().includes(e)||o.email.toLowerCase().includes(e)||o.phone&&o.phone.includes(e))}return y.value!=="all"&&(a=a.filter(e=>e.status===y.value)),U.value!=="all"&&(a=a.filter(e=>e.role===U.value)),a}),H=h(()=>{const a=(v.value-1)*x.value,e=a+x.value;return S.value.slice(a,e)}),$=h(()=>Math.ceil(S.value.length/x.value)),K=h(()=>p.value.length),Z=h(()=>p.value.filter(a=>a.status==="active").length),Q=h(()=>p.value.filter(a=>a.role==="admin").length),ee=h(()=>{const a=new Date().getMonth(),e=new Date().getFullYear();return p.value.filter(o=>{const t=new Date(o.created_at);return t.getMonth()===a&&t.getFullYear()===e}).length}),D=()=>{F.value=!1,se()},j=()=>{N.value=!1,te()},q=()=>{M.value=!1,r.value={}},se=()=>{l.value={name:"",email:"",phone:"",role:"user",status:"active",password:"",confirmPassword:"",profile_image:null}},te=()=>{i.value={id:null,name:"",email:"",phone:"",role:"user",status:"active",newPassword:""}},ae=a=>{const e=a.target.files[0];if(e){if(e.size>2*1024*1024){alert("Profile image must be less than 2MB"),a.target.value="";return}if(!e.type.startsWith("image/")){alert("Please select a valid image file"),a.target.value="";return}l.value.profile_image=e}},oe=async()=>{try{if(l.value.password!==l.value.confirmPassword){alert("Password and Confirm Password do not match!");return}if(l.value.password.length<6){alert("Password must be at least 6 characters long!");return}if(!l.value.name||!l.value.email||!l.value.phone||!l.value.role||!l.value.status){alert("Please fill in all required fields!");return}I.value=!0;const a=localStorage.getItem("access_token");if(!a)throw new Error("No access token found. Please login again.");const e=new FormData;e.append("name",l.value.name),e.append("email",l.value.email),e.append("phone",l.value.phone),e.append("password",l.value.password),e.append("password_confirmation",l.value.confirmPassword),e.append("is_admin",l.value.role==="admin"?1:0),e.append("status",O(l.value.status)),l.value.profile_image&&e.append("profile_image",l.value.profile_image);const o=await fetch(`${E}/users`,{method:"POST",headers:{Authorization:`Bearer ${a}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:e});if(o.status===401)throw new Error("Authentication failed. Please login again.");if(!o.ok){const d=await o.json();throw new Error(d.message||"Failed to create user")}const t=await o.json();if(t.success&&t.data){const d={id:t.data.id,name:t.data.name||"Unknown User",email:t.data.email,phone:t.data.phone||null,role:t.data.is_admin?"admin":"user",status:B(t.data.status)||"active",avatar:t.data.profile_image||"../assest/img/tableprofileimg.png",created_at:t.data.created_at,last_login:null,total_balance:0};p.value.unshift(d),D(),alert("User created successfully!")}else throw new Error(t.message||"Failed to create user")}catch(a){console.error("Error creating user:",a),alert(`Error creating user: ${a.message}`)}finally{I.value=!1}},le=async a=>{V.value=!0;try{const e=localStorage.getItem("access_token");if(!e)throw new Error("No access token found. Please login again.");const o=await fetch(`${E}/users/${a.id}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json",Accept:"application/json"}});if(!o.ok)throw new Error("Failed to fetch user details");const t=await o.json();if(t.success&&t.data)r.value=t.data,M.value=!0;else throw new Error(t.message||"Failed to fetch user details")}catch(e){console.error("Error fetching user details:",e),alert(`Error fetching user details: ${e.message}`),r.value=a,M.value=!0}finally{V.value=!1}},ne=a=>{i.value={id:a.id,name:a.name,email:a.email,phone:a.phone,role:a.role,status:a.status,newPassword:""},N.value=!0},ie=()=>{i.value={id:r.value.id,name:r.value.name,email:r.value.email,phone:r.value.phone,role:r.value.role,status:r.value.status,newPassword:""},N.value=!0},re=async(a,e)=>{try{const o=localStorage.getItem("access_token");if(!o)throw new Error("No access token found. Please login again.");const d={active:"A",inactive:"I",suspended:"D"}[e]||"A",g=await fetch(`${E}/users/${a.id}/status`,{method:"PATCH",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({status:d})});if(g.status===401)throw new Error("Authentication failed. Please login again.");if(!g.ok){const X=await g.json();throw new Error(X.message||"Failed to update user status")}const Y=await g.json();if(Y.success){a.status=e;const X=e==="suspended"?"suspended":"activated";alert(`User ${a.name} has been ${X}!`)}else throw new Error(Y.message||"Failed to update user status")}catch(o){console.error("Error updating user status:",o),alert(`Error updating user status: ${o.message}`)}},de=async()=>{try{const a=localStorage.getItem("access_token");if(!a)throw new Error("No access token found. Please login again.");const e={name:i.value.name,email:i.value.email,phone:i.value.phone,is_admin:i.value.role==="admin"?1:0,status:O(i.value.status)};i.value.newPassword&&(e.password=i.value.newPassword,e.password_confirmation=i.value.newPassword);const o=await fetch(`${E}/users/${i.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(e)});if(o.status===401)throw new Error("Authentication failed. Please login again.");if(!o.ok){const d=await o.json();throw new Error(d.message||"Failed to update user")}const t=await o.json();if(t.success&&t.data){const d=p.value.findIndex(g=>g.id===i.value.id);d!==-1&&(p.value[d]={...p.value[d],name:t.data.name,email:t.data.email,phone:t.data.phone,role:t.data.is_admin?"admin":"user",status:B(t.data.status)}),j(),alert("User updated successfully!")}else throw new Error(t.message||"Failed to update user")}catch(a){console.error("Error updating user:",a),alert(`Error updating user: ${a.message}`)}},ue=async a=>{try{if(confirm(`Are you sure you want to delete user: ${a.name}?`)){const e=localStorage.getItem("access_token");if(!e)throw new Error("No access token found");const o=await fetch(`${E}/users/${a.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(o.status===401)throw new Error("Authentication failed. Please login again.");if(!o.ok){const d=await o.json();throw new Error(d.message||"Failed to delete user")}const t=await o.json();if(t.success){const d=p.value.findIndex(g=>g.id===a.id);d>-1&&(p.value.splice(d,1),alert("User deleted successfully!"),H.value.length===0&&v.value>1&&v.value--)}else throw new Error(t.message||"Failed to delete user")}}catch(e){console.error("Error deleting user:",e),alert(`Error deleting user: ${e.message}`)}},ce=()=>{_.value="",y.value="all",U.value="all",v.value=1},ve=()=>{const a=pe(),e=new Blob([a],{type:"text/csv"}),o=window.URL.createObjectURL(e),t=document.createElement("a");t.href=o,t.download="users_export.csv",t.click(),window.URL.revokeObjectURL(o)},pe=()=>{const a=["ID","Name","Email","Phone","Role","Status","Joined Date"],e=S.value.map(o=>[o.id,o.name,o.email,o.phone||"N/A",o.role,o.status,T(o.created_at)]);return[a,...e].map(o=>o.join(",")).join(`
`)},G=a=>a==="admin"?"role-admin":"role-user",J=a=>({active:"status-active",inactive:"status-inactive",suspended:"status-suspended"})[a]||"status-active",T=a=>a?new Date(a).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",O=a=>({active:"A",inactive:"I",suspended:"D"})[a]||"A",B=a=>({A:"active",I:"inactive",D:"suspended"})[a]||"active";we([_,y,U],()=>{v.value=1});const W=a=>{a.key==="Escape"&&(F.value?D():N.value?j():M.value&&q())};return ge(()=>{document.addEventListener("keydown",W),z()}),he(()=>{document.removeEventListener("keydown",W)}),(a,e)=>{const o=be('else"');return f(),m("div",ke,[s("div",Ee,[e[25]||(e[25]=s("div",{class:"header-content"},[s("h1",{class:"page-title"},"👥 User Management"),s("p",{class:"page-subtitle"},"Manage all registered users and their accounts")],-1)),s("div",Pe,[s("button",{class:"btn-primary",onClick:e[0]||(e[0]=t=>F.value=!0)},e[24]||(e[24]=[s("i",{class:"fa-solid fa-user-plus"},null,-1),C(" Add User ")]))])]),s("div",Ce,[s("div",Ae,[e[26]||(e[26]=s("i",{class:"fa-solid fa-search search-icon"},null,-1)),u(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>_.value=t),placeholder:"Search users by name, email, or phone...",class:"search-input"},null,512),[[w,_.value]])]),s("div",Ne,[u(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>y.value=t),class:"filter-select"},e[27]||(e[27]=[s("option",{value:"all"},"All Users",-1),s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1),s("option",{value:"suspended"},"Suspended",-1)]),512),[[A,y.value]]),u(s("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>U.value=t),class:"filter-select"},e[28]||(e[28]=[s("option",{value:"all"},"All Roles",-1),s("option",{value:"admin"},"Admin",-1),s("option",{value:"user"},"User",-1)]),512),[[A,U.value]]),s("button",{class:"btn-secondary",onClick:ce},e[29]||(e[29]=[s("i",{class:"fa-solid fa-rotate"},null,-1),C(" Reset ")]))])]),s("div",Me,[s("div",Se,[e[31]||(e[31]=s("div",{class:"stat-icon"},"👥",-1)),s("div",$e,[s("h3",De,n(K.value),1),e[30]||(e[30]=s("p",{class:"stat-label"},"Total Users",-1))])]),s("div",je,[e[33]||(e[33]=s("div",{class:"stat-icon"},"✅",-1)),s("div",Re,[s("h3",Fe,n(Z.value),1),e[32]||(e[32]=s("p",{class:"stat-label"},"Active Users",-1))])]),s("div",Ve,[e[35]||(e[35]=s("div",{class:"stat-icon"},"👑",-1)),s("div",Ie,[s("h3",Le,n(Q.value),1),e[34]||(e[34]=s("p",{class:"stat-label"},"Admin Users",-1))])]),s("div",qe,[e[37]||(e[37]=s("div",{class:"stat-icon"},"📅",-1)),s("div",xe,[s("h3",Te,n(ee.value),1),e[36]||(e[36]=s("p",{class:"stat-label"},"New This Month",-1))])])]),s("div",Be,[s("div",Xe,[s("h3",null,"Users List ("+n(S.value.length)+")",1),s("div",ze,[s("button",{class:"btn-refresh",onClick:z,disabled:k.value},[s("i",{class:b(["fa-solid fa-rotate",{"fa-spin":k.value}])},null,2),C(" "+n(k.value?"Loading...":"Refresh"),1)],8,He),s("button",{class:"btn-export",onClick:ve},e[38]||(e[38]=[s("i",{class:"fa-solid fa-download"},null,-1),C(" Export ")]))])]),k.value?(f(),m("div",Ge,e[39]||(e[39]=[s("div",{class:"no-users-icon"},"🔄",-1),s("h3",null,"Loading users...",-1),s("p",null,"Please wait while we fetch the data.",-1)]))):L.value?(f(),m("div",Je,[e[40]||(e[40]=s("div",{class:"no-users-icon"},"❌",-1)),s("h3",null,"Error: "+n(L.value),1),e[41]||(e[41]=s("p",null,"Failed to load users. Please try again later.",-1))])):S.value.length===0?(f(),m("div",Oe,e[42]||(e[42]=[s("div",{class:"no-users-icon"},"👥",-1),s("h3",null,"No users found",-1),s("p",null,"Try adjusting your search or filters",-1)]))):(f(),m("div",We,[e[46]||(e[46]=_e('<div class="table-row header-row" data-v-e5e415c1><div class="col-user" data-v-e5e415c1>User</div><div class="col-email" data-v-e5e415c1>Email</div><div class="col-phone" data-v-e5e415c1>Phone</div><div class="col-role" data-v-e5e415c1>Role</div><div class="col-status" data-v-e5e415c1>Status</div><div class="col-joined" data-v-e5e415c1>Joined</div><div class="col-actions" data-v-e5e415c1>Actions</div></div>',1)),(f(!0),m(ye,null,Ue(H.value,t=>(f(),m("div",{key:t.id,class:b(["table-row user-row",{"user-inactive":t.status==="inactive","user-suspended":t.status==="suspended"}])},[s("div",Ye,[s("div",Ke,[s("img",{src:t.avatar,alt:t.name,class:"user-avatar"},null,8,Ze),s("div",Qe,[s("h4",es,n(t.name),1),s("p",ss,"ID: "+n(t.id),1)])])]),s("div",ts,[s("span",as,n(t.email),1)]),s("div",os,[s("span",ls,n(t.phone||"N/A"),1)]),s("div",ns,[s("span",{class:b(["role-badge",G(t.role)])},n(t.role),3)]),s("div",is,[s("span",{class:b(["status-badge",J(t.status)])},n(t.status),3)]),s("div",rs,[s("span",ds,n(T(t.created_at)),1)]),s("div",us,[s("div",cs,[s("button",{class:"btn-action btn-view",onClick:d=>le(t),title:"View Details",disabled:V.value},[s("i",{class:b(["fa-solid fa-eye",{"fa-spin":V.value}])},null,2)],8,vs),s("button",{class:"btn-action btn-edit",onClick:d=>ne(t),title:"Edit User"},e[43]||(e[43]=[s("i",{class:"fa-solid fa-edit"},null,-1)]),8,ps),t.status==="suspended"?(f(),m("button",{key:0,class:"btn-action btn-activate",onClick:d=>re(t,"active"),title:"Activate User"},e[44]||(e[44]=[s("i",{class:"fa-solid fa-play"},null,-1)]),8,ms)):P("",!0),s("button",{class:"btn-action btn-delete",onClick:d=>ue(t),title:"Delete User"},e[45]||(e[45]=[s("i",{class:"fa-solid fa-trash"},null,-1)]),8,fs)])])],2))),128))])),$.value>1?(f(),m("div",ws,[s("button",{class:"btn-page",disabled:v.value===1,onClick:e[4]||(e[4]=t=>v.value=1)},e[47]||(e[47]=[s("i",{class:"fa-solid fa-angles-left"},null,-1)]),8,gs),s("button",{class:"btn-page",disabled:v.value===1,onClick:e[5]||(e[5]=t=>v.value--)},e[48]||(e[48]=[s("i",{class:"fa-solid fa-angle-left"},null,-1)]),8,hs),s("span",bs," Page "+n(v.value)+" of "+n($.value),1),s("button",{class:"btn-page",disabled:v.value===$.value,onClick:e[6]||(e[6]=t=>v.value++)},e[49]||(e[49]=[s("i",{class:"fa-solid fa-angle-right"},null,-1)]),8,_s),s("button",{class:"btn-page",disabled:v.value===$.value,onClick:e[7]||(e[7]=t=>v.value=$.value)},e[50]||(e[50]=[s("i",{class:"fa-solid fa-angles-right"},null,-1)]),8,ys)])):P("",!0)]),F.value?(f(),m("div",{key:0,class:"modal-overlay",onClick:D},[s("div",{class:"modal-content",onClick:e[15]||(e[15]=R(()=>{},["stop"])),ref:"addUserModalRef"},[s("div",{class:"modal-header"},[e[51]||(e[51]=s("h3",null,"Add New User",-1)),s("button",{class:"close-btn",onClick:D},"×")]),s("div",Us,[s("form",{onSubmit:R(oe,["prevent"]),class:"user-form"},[s("div",ks,[s("div",Es,[e[52]||(e[52]=s("label",{for:"name"},"Full Name *",-1)),u(s("input",{type:"text",id:"name","onUpdate:modelValue":e[8]||(e[8]=t=>l.value.name=t),required:"",class:"form-control",placeholder:"Enter full name"},null,512),[[w,l.value.name]])]),s("div",Ps,[e[53]||(e[53]=s("label",{for:"email"},"Email Address *",-1)),u(s("input",{type:"email",id:"email","onUpdate:modelValue":e[9]||(e[9]=t=>l.value.email=t),required:"",class:"form-control",placeholder:"Enter email address"},null,512),[[w,l.value.email]])])]),s("div",Cs,[s("div",As,[e[54]||(e[54]=s("label",{for:"phone"},"Phone Number *",-1)),u(s("input",{type:"tel",id:"phone","onUpdate:modelValue":e[10]||(e[10]=t=>l.value.phone=t),required:"",class:"form-control",placeholder:"Enter phone number"},null,512),[[w,l.value.phone]])]),s("div",Ns,[e[56]||(e[56]=s("label",{for:"role"},"User Role *",-1)),u(s("select",{id:"role","onUpdate:modelValue":e[11]||(e[11]=t=>l.value.role=t),required:"",class:"form-control"},e[55]||(e[55]=[s("option",{value:""},"Select Role",-1),s("option",{value:"user"},"👤 User",-1),s("option",{value:"admin"},"👑 Admin",-1)]),512),[[A,l.value.role]])])]),s("div",Ms,[s("div",Ss,[e[58]||(e[58]=s("label",{for:"status"},"Account Status *",-1)),u(s("select",{id:"status","onUpdate:modelValue":e[12]||(e[12]=t=>l.value.status=t),required:"",class:"form-control"},e[57]||(e[57]=[s("option",{value:""},"Select Status",-1),s("option",{value:"active"},"✅ Active",-1),s("option",{value:"inactive"},"⏸️ Inactive",-1),s("option",{value:"suspended"},"🚫 Suspended",-1)]),512),[[A,l.value.status]])])]),s("div",$s,[s("div",Ds,[e[59]||(e[59]=s("label",{for:"password"},"Password *",-1)),u(s("input",{type:"password",id:"password","onUpdate:modelValue":e[13]||(e[13]=t=>l.value.password=t),required:"",class:"form-control",placeholder:"Enter password (min 6 characters)",minlength:"6"},null,512),[[w,l.value.password]]),e[60]||(e[60]=s("small",{class:"form-help"},"Password must be at least 6 characters long",-1))]),s("div",js,[e[61]||(e[61]=s("label",{for:"confirmPassword"},"Confirm Password *",-1)),u(s("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[14]||(e[14]=t=>l.value.confirmPassword=t),required:"",class:"form-control",placeholder:"Confirm your password",minlength:"6"},null,512),[[w,l.value.confirmPassword]])])]),s("div",Rs,[s("div",Fs,[e[62]||(e[62]=s("label",{for:"profile_image"},"Profile Image",-1)),s("input",{type:"file",id:"profile_image",onChange:ae,accept:"image/*",class:"form-control file-input"},null,32),e[63]||(e[63]=s("small",{class:"form-help"},"Upload profile picture (JPG, PNG, GIF - Max 2MB)",-1))])]),s("div",Vs,[s("button",{type:"button",class:"btn-secondary",onClick:D},"Cancel"),s("button",{type:"submit",class:"btn-primary",disabled:I.value},[I.value?(f(),m("span",Ls,e[64]||(e[64]=[s("i",{class:"fa-solid fa-spinner fa-spin"},null,-1),C(" Creating User... ")]))):P("",!0),u((f(),m("span",null,e[65]||(e[65]=[s("i",{class:"fa-solid fa-user-plus"},null,-1),C(" Add User ")]))),[[o]])],8,Is)])],32)])],512)])):P("",!0),N.value?(f(),m("div",{key:1,class:"modal-overlay",onClick:j},[s("div",{class:"modal-content",onClick:e[22]||(e[22]=R(()=>{},["stop"])),ref:"editUserModalRef"},[s("div",qs,[s("h3",null,"Edit User: "+n(i.value.name),1),s("button",{class:"close-btn",onClick:j},"×")]),s("div",xs,[s("form",{onSubmit:R(de,["prevent"]),class:"user-form"},[s("div",Ts,[s("div",Bs,[e[66]||(e[66]=s("label",{for:"editName"},"Full Name",-1)),u(s("input",{type:"text",id:"editName","onUpdate:modelValue":e[16]||(e[16]=t=>i.value.name=t),required:"",class:"form-control",placeholder:"Enter full name"},null,512),[[w,i.value.name]])]),s("div",Xs,[e[67]||(e[67]=s("label",{for:"editEmail"},"Email",-1)),u(s("input",{type:"email",id:"editEmail","onUpdate:modelValue":e[17]||(e[17]=t=>i.value.email=t),required:"",class:"form-control",placeholder:"Enter email address"},null,512),[[w,i.value.email]])])]),s("div",zs,[s("div",Hs,[e[68]||(e[68]=s("label",{for:"editPhone"},"Phone",-1)),u(s("input",{type:"tel",id:"editPhone","onUpdate:modelValue":e[18]||(e[18]=t=>i.value.phone=t),class:"form-control",placeholder:"Enter phone number"},null,512),[[w,i.value.phone]])]),s("div",Gs,[e[70]||(e[70]=s("label",{for:"editRole"},"Role",-1)),u(s("select",{id:"editRole","onUpdate:modelValue":e[19]||(e[19]=t=>i.value.role=t),required:"",class:"form-control"},e[69]||(e[69]=[s("option",{value:"user"},"User",-1),s("option",{value:"admin"},"Admin",-1)]),512),[[A,i.value.role]])])]),s("div",Js,[s("div",Os,[e[72]||(e[72]=s("label",{for:"editStatus"},"Status",-1)),u(s("select",{id:"editStatus","onUpdate:modelValue":e[20]||(e[20]=t=>i.value.status=t),required:"",class:"form-control"},e[71]||(e[71]=[s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1),s("option",{value:"suspended"},"Suspended",-1)]),512),[[A,i.value.status]])]),s("div",Ws,[e[73]||(e[73]=s("label",{for:"editPassword"},"New Password (Optional)",-1)),u(s("input",{type:"password",id:"editPassword","onUpdate:modelValue":e[21]||(e[21]=t=>i.value.newPassword=t),class:"form-control",placeholder:"Leave blank to keep current password"},null,512),[[w,i.value.newPassword]])])]),s("div",{class:"form-actions"},[s("button",{type:"button",class:"btn-secondary",onClick:j},"Cancel"),e[74]||(e[74]=s("button",{type:"submit",class:"btn-primary"},"Update User",-1))])],32)])],512)])):P("",!0),M.value?(f(),m("div",{key:2,class:"modal-overlay",onClick:q},[s("div",{class:"modal-content",onClick:e[23]||(e[23]=R(()=>{},["stop"]))},[s("div",Ys,[s("h3",null,"User Details: "+n(r.value.name),1),s("button",{class:"close-btn",onClick:q},"×")]),s("div",Ks,[s("div",Zs,[s("div",Qs,[s("img",{src:r.value.avatar,alt:r.value.name},null,8,et)]),s("div",st,[s("div",tt,[e[75]||(e[75]=s("span",{class:"info-label"},"ID:",-1)),s("span",at,n(r.value.id),1)]),s("div",ot,[e[76]||(e[76]=s("span",{class:"info-label"},"Name:",-1)),s("span",lt,n(r.value.name),1)]),s("div",nt,[e[77]||(e[77]=s("span",{class:"info-label"},"Email:",-1)),s("span",it,n(r.value.email),1)]),s("div",rt,[e[78]||(e[78]=s("span",{class:"info-label"},"Phone:",-1)),s("span",dt,n(r.value.phone||"N/A"),1)]),s("div",ut,[e[79]||(e[79]=s("span",{class:"info-label"},"Role:",-1)),s("span",ct,[s("span",{class:b(["role-badge",G(r.value.role)])},n(r.value.role),3)])]),s("div",vt,[e[80]||(e[80]=s("span",{class:"info-label"},"Status:",-1)),s("span",pt,[s("span",{class:b(["status-badge",J(r.value.status)])},n(r.value.status),3)])]),s("div",mt,[e[81]||(e[81]=s("span",{class:"info-label"},"Joined:",-1)),s("span",ft,n(T(r.value.created_at)),1)]),s("div",wt,[e[82]||(e[82]=s("span",{class:"info-label"},"Last Login:",-1)),s("span",gt,n(r.value.last_login||"Never"),1)]),s("div",ht,[e[83]||(e[83]=s("span",{class:"info-label"},"Total Balance:",-1)),s("span",bt,"₹"+n(r.value.total_balance||"0.00"),1)]),s("div",_t,[e[87]||(e[87]=s("h4",{class:"section-title"},"🏦 Bank Details",-1)),s("div",yt,[e[84]||(e[84]=s("span",{class:"info-label"},"Bank Name:",-1)),s("span",Ut,n(r.value.bank_name||"Not provided"),1)]),s("div",kt,[e[85]||(e[85]=s("span",{class:"info-label"},"Account Number:",-1)),s("span",Et,n(r.value.account_no||"Not provided"),1)]),s("div",Pt,[e[86]||(e[86]=s("span",{class:"info-label"},"IFSC Code:",-1)),s("span",Ct,n(r.value.ifsc_code||"Not provided"),1)])])])]),s("div",{class:"modal-actions"},[s("button",{class:"btn-secondary",onClick:q},"Close"),s("button",{class:"btn-primary",onClick:ie},"Edit User")])])])])):P("",!0)])}}},St=me(At,[["__scopeId","data-v-e5e415c1"]]);export{St as default};
